services:
  # Backend API Service
  - type: web
    name: ecoloop-backend
    runtime: node
    plan: free
    # Build and deployment configuration
    buildCommand: "npm install"
    startCommand: "npm start"
    # Environment variables
    envVars:
      - key: NODE_ENV
        value: production
      - key: MONGO_URI
        sync: false
      - key: PORT
        value: 3000
    # Health check - use root endpoint
    healthCheckPath: /
    # Auto-deploy configuration
    autoDeploy: yes
    # Specify the root directory for this service
    rootDir: backend

  # Frontend Static Site Service
  - type: web
    name: ecoloop-frontend
    runtime: static
    plan: free
    # Build and deployment configuration
    buildCommand: "echo 'No build needed - static files'"
    # Specify the root directory for this service
    rootDir: frontend
    # Auto-deploy configuration
    autoDeploy: yes
