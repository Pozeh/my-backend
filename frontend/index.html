<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>EcoLoop Kenya - Sustainable Marketplace</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="assets/css/productLayer.css">
    <style>
        :root {
            --primary-color: #2ecc71;
            --secondary-color: #27ae60;
            --accent-color: #f39c12;
            --text-dark: #333;
            --text-light: #666;
            --bg-light: #f8f9fa;
            --white: #ffffff;
            --shadow: 0 2px 10px rgba(0,0,0,0.1);
            --shadow-lg: 0 5px 20px rgba(0,0,0,0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            min-width: 1200px; /* Force desktop minimum width */
            overflow-x: auto; /* Allow horizontal scrolling if needed */
            overflow-y: auto; /* Ensure vertical scrolling is always allowed */
            height: auto; /* Allow body to grow naturally */
            min-height: 100vh; /* Ensure minimum full viewport height */
        }

        /* Header Styles */
        .top-header {
            position: relative;
            background: linear-gradient(135deg, #0a4f3a, #0d6b4f, #0a4f3a);
            color: var(--white);
            padding: 10px 0;
            overflow: hidden;
            z-index: 1;
        }

        /* Futuristic Ocean Wave Background */
        .top-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(ellipse at 20% 30%, rgba(0, 255, 255, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 70%, rgba(255, 0, 255, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 50%, rgba(0, 200, 255, 0.2) 0%, transparent 70%);
            animation: oceanGlow 8s ease-in-out infinite alternate;
            z-index: -2;
        }

        /* Wave Layers */
        .top-header::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 120' preserveAspectRatio='none'%3E%3Cpath d='M0,56 C150,100 350,0 600,56 C850,120 1050,0 1200,56 L1200,120 L0,120 Z' fill='rgba(0,255,255,0.1)'/%3E%3C/svg%3E") repeat-x;
            animation: waveFlow 20s linear infinite;
            z-index: -1;
        }

        /* Additional Wave Layer */
        .ocean-waves {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            opacity: 0.3;
            z-index: -1;
            pointer-events: none;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 120' preserveAspectRatio='none'%3E%3Cpath d='M0,60 C200,90 400,30 600,60 C800,90 1000,30 1200,60 L1200,120 L0,120 Z' fill='rgba(0,200,255,0.2)'/%3E%3C/svg%3E") repeat-x;
            animation: waveFlow2 15s linear infinite reverse;
        }

        /* Bioluminescent Particles */
        .bio-particles {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: -1;
            pointer-events: none;
            overflow: hidden;
        }

        .bio-particle {
            position: absolute;
            width: 3px;
            height: 3px;
            background: radial-gradient(circle, rgba(0, 255, 255, 0.8) 0%, rgba(0, 255, 255, 0) 70%);
            border-radius: 50%;
            animation: floatParticle 8s infinite ease-in-out;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.6);
        }

        /* Current Effects */
        .ocean-currents {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: -1;
            pointer-events: none;
            background: 
                linear-gradient(45deg, transparent 30%, rgba(0, 255, 255, 0.05) 50%, transparent 70%),
                linear-gradient(-45deg, transparent 30%, rgba(255, 0, 255, 0.03) 50%, transparent 70%);
            background-size: 200% 200%;
            animation: currentFlow 12s ease-in-out infinite;
        }

        /* Reflection Effects */
        .ocean-reflections {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: -1;
            pointer-events: none;
            background: 
                linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.05) 50%, transparent 100%);
            background-size: 100% 100%;
            animation: reflectionMove 6s linear infinite;
        }

        /* Animations */
        @keyframes oceanGlow {
            0% {
                opacity: 0.3;
                transform: scale(1);
            }
            50% {
                opacity: 0.6;
                transform: scale(1.05);
            }
            100% {
                opacity: 0.4;
                transform: scale(1);
            }
        }

        @keyframes waveFlow {
            0% {
                transform: translateX(0) translateY(0);
            }
            50% {
                transform: translateX(-25%) translateY(-10px);
            }
            100% {
                transform: translateX(-50%) translateY(0);
            }
        }

        @keyframes waveFlow2 {
            0% {
                transform: translateX(0) translateY(0) scaleY(1);
            }
            25% {
                transform: translateX(-15%) translateY(5px) scaleY(1.1);
            }
            50% {
                transform: translateX(-30%) translateY(0) scaleY(1);
            }
            75% {
                transform: translateX(-45%) translateY(-5px) scaleY(0.9);
            }
            100% {
                transform: translateX(-60%) translateY(0) scaleY(1);
            }
        }

        @keyframes floatParticle {
            0% {
                transform: translateY(100vh) translateX(0) scale(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
                transform: translateY(80vh) translateX(10px) scale(1);
            }
            50% {
                opacity: 0.8;
                transform: translateY(40vh) translateX(-10px) scale(1.2);
            }
            90% {
                opacity: 0.3;
                transform: translateY(10vh) translateX(5px) scale(0.8);
            }
            100% {
                transform: translateY(-10vh) translateX(0) scale(0);
                opacity: 0;
            }
        }

        @keyframes currentFlow {
            0% {
                background-position: 0% 0%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 100%;
            }
        }

        @keyframes reflectionMove {
            0% {
                transform: translateX(-100%) skewX(-10deg);
                opacity: 0;
            }
            50% {
                opacity: 0.3;
                transform: translateX(0%) skewX(0deg);
            }
            100% {
                transform: translateX(100%) skewX(10deg);
                opacity: 0;
            }
        }

        /* Interactive Wave Distortion */
        .top-header .user-actions a:hover::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(0, 255, 255, 0.3) 0%, transparent 70%);
            transform: translate(-50%, -50%);
            animation: rippleEffect 1s ease-out;
            pointer-events: none;
            z-index: 1;
        }

        @keyframes rippleEffect {
            0% {
                width: 0;
                height: 0;
                opacity: 1;
            }
            100% {
                width: 150px;
                height: 150px;
                opacity: 0;
            }
        }

        /* Enhanced button hover effects */
        .top-header .user-actions {
            position: relative;
            z-index: 2;
        }

        .top-header .user-actions a {
            position: relative;
            color: var(--white);
            text-decoration: none;
            margin-left: 15px;
            transition: all 0.3s ease;
            padding: 5px 10px;
            border-radius: 20px;
            backdrop-filter: blur(5px);
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .top-header .user-actions a:hover {
            background: rgba(0, 255, 255, 0.2);
            border-color: rgba(0, 255, 255, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.3);
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.8);
        }

        .top-header .contact-info span {
            position: relative;
            margin-right: 20px;
            z-index: 2;
            backdrop-filter: blur(5px);
            background: rgba(255, 255, 255, 0.05);
            padding: 5px 10px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .top-header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .contact-info span {
            margin-right: 20px;
        }

        .user-actions a {
            color: var(--white);
            text-decoration: none;
            margin-left: 15px;
            transition: opacity 0.3s;
        }

        .user-actions a:hover {
            opacity: 0.8;
        }

        .main-header {
            background: var(--white);
            padding: 20px 0;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
            text-decoration: none;
        }

        .search-bar {
            flex: 1;
            max-width: 500px;
            margin: 0 40px;
        }

        .search-input {
            width: 100%;
            padding: 12px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .commerce-icons {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .icon-wrapper {
            position: relative;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            background: rgba(0, 255, 255, 0.1);
            border: 2px solid rgba(0, 255, 255, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
        }

        .icon-wrapper:hover {
            background: rgba(0, 255, 255, 0.2);
            border-color: rgba(0, 255, 255, 0.6);
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.4);
        }

        .icon-wrapper i {
            color: #00ffff;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .icon-wrapper:hover i {
            color: #ffffff;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.8);
        }

        .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: linear-gradient(135deg, #ff6b6b, #ff4757);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: bold;
            border: 2px solid var(--white);
            box-shadow: 0 2px 8px rgba(255, 107, 107, 0.4);
            animation: badgePulse 2s infinite;
        }

        @keyframes badgePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .badge.wishlist-badge {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            box-shadow: 0 2px 8px rgba(231, 76, 60, 0.4);
        }

        .badge.cart-badge {
            background: linear-gradient(135deg, #27ae60, #229954);
            box-shadow: 0 2px 8px rgba(39, 174, 96, 0.4);
        }

        .badge.animate {
            animation: badgeBounce 0.6s ease;
        }

        @keyframes badgeBounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        /* Cart and Wishlist Sidebar Styles */
        .cart-sidebar, .wishlist-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100%;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border-left: 2px solid rgba(0, 255, 255, 0.3);
            box-shadow: -5px 0 20px rgba(0, 0, 0, 0.3);
            transition: right 0.3s ease;
            z-index: 10001;
            display: flex;
            flex-direction: column;
        }

        .cart-sidebar.open, .wishlist-sidebar.open {
            right: 0;
        }

        .cart-header, .wishlist-header {
            background: rgba(0, 255, 255, 0.1);
            border-bottom: 2px solid rgba(0, 255, 255, 0.3);
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-header h3, .wishlist-header h3 {
            color: #00ffff;
            margin: 0;
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .cart-header h3 i, .wishlist-header h3 i {
            color: #00ffff;
        }

        .close-cart, .close-wishlist {
            color: #ffffff;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
        }

        .close-cart:hover, .close-wishlist:hover {
            background: rgba(255, 0, 0, 0.3);
            transform: scale(1.1);
        }

        .cart-content, .wishlist-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .cart-items, .wishlist-items {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .cart-item, .wishlist-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            gap: 15px;
            transition: all 0.3s ease;
        }

        .cart-item:hover, .wishlist-item:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(0, 255, 255, 0.4);
            transform: translateX(-5px);
        }

        .cart-item-image, .wishlist-item-image {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
            border: 1px solid rgba(0, 255, 255, 0.3);
        }

        .cart-item-details, .wishlist-item-details {
            flex: 1;
        }

        .cart-item-title, .wishlist-item-title {
            color: #ffffff;
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .cart-item-price, .wishlist-item-price {
            color: #00ffff;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 5px;
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 5px;
        }

        .quantity-btn {
            background: none;
            border: none;
            color: #00ffff;
            width: 25px;
            height: 25px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .quantity-btn:hover {
            background: rgba(0, 255, 255, 0.2);
        }

        .quantity-value {
            color: #ffffff;
            min-width: 30px;
            text-align: center;
        }

        .cart-item-actions, .wishlist-item-actions {
            display: flex;
            gap: 10px;
        }

        .btn-remove, .btn-move-to-cart {
            background: none;
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: #ffffff;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .btn-remove:hover {
            background: rgba(255, 0, 0, 0.3);
            border-color: rgba(255, 0, 0, 0.5);
        }

        .btn-move-to-cart:hover {
            background: rgba(0, 255, 0, 0.3);
            border-color: rgba(0, 255, 0, 0.5);
        }

        .cart-empty, .wishlist-empty {
            text-align: center;
            color: #ffffff;
            padding: 40px 20px;
        }

        .cart-empty i, .wishlist-empty i {
            font-size: 48px;
            color: rgba(0, 255, 255, 0.3);
            margin-bottom: 20px;
        }

        .cart-summary {
            border-top: 2px solid rgba(0, 255, 255, 0.3);
            padding: 20px;
            background: rgba(0, 255, 255, 0.05);
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            color: #ffffff;
            margin-bottom: 10px;
        }

        .summary-row.total {
            font-weight: bold;
            font-size: 18px;
            color: #00ffff;
            border-top: 1px solid rgba(0, 255, 255, 0.3);
            padding-top: 10px;
            margin-top: 10px;
        }

        .checkout-btn {
            width: 100%;
            margin-top: 20px;
            padding: 15px;
            background: linear-gradient(135deg, #00ffff, #0080ff);
            border: none;
            border-radius: 8px;
            color: #000;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.4);
        }

        /* Overlay for cart/wishlist */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 10000;
            display: none;
        }

        .overlay.active {
            display: block;
        }

        @media (max-width: 768px) {
            .cart-sidebar, .wishlist-sidebar {
                width: 100%;
                right: -100%;
            }
        }

        /* Futuristic Hero Section with Enhanced Design */
        .hero {
            position: relative;
            min-height: 25vh;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background: radial-gradient(ellipse at center, #001a33 0%, #000511 50%, #000000 100%);
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 0, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(255, 255, 0, 0.05) 0%, transparent 50%);
            animation: heroGlow 10s ease-in-out infinite alternate;
            pointer-events: none;
        }

        @keyframes heroGlow {
            0% { opacity: 0.3; transform: scale(1); }
            100% { opacity: 0.6; transform: scale(1.1); }
        }

        /* Futuristic Side Backgrounds */
        .futuristic-background-left,
        .futuristic-background-right {
            position: absolute;
            top: 0;
            width: 35%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
            overflow: hidden;
        }

        .futuristic-background-left {
            left: 0;
            background: linear-gradient(135deg, 
                rgba(0, 255, 255, 0.02) 0%, 
                rgba(255, 0, 255, 0.03) 50%, 
                rgba(0, 255, 255, 0.02) 100%);
        }

        .futuristic-background-right {
            right: 0;
            background: linear-gradient(225deg, 
                rgba(255, 255, 0, 0.02) 0%, 
                rgba(0, 255, 255, 0.03) 50%, 
                rgba(255, 255, 0, 0.02) 100%);
        }

        /* Holographic Streams */
        .holographic-streams {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(45deg, 
                    transparent 30%, 
                    rgba(0, 255, 255, 0.1) 50%, 
                    transparent 70%),
                linear-gradient(-45deg, 
                    transparent 30%, 
                    rgba(255, 0, 255, 0.1) 50%, 
                    transparent 70%);
            animation: holographicFlow 8s linear infinite;
            opacity: 0.6;
        }

        @keyframes holographicFlow {
            0% { transform: translateX(-100%) translateY(-100%); }
            50% { transform: translateX(0%) translateY(0%); }
            100% { transform: translateX(100%) translateY(100%); }
        }

        /* Neon Particle Waves */
        .neon-particle-waves {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 20%, rgba(0, 255, 255, 0.8) 2px, transparent 2px),
                radial-gradient(circle at 80% 80%, rgba(255, 0, 255, 0.8) 2px, transparent 2px),
                radial-gradient(circle at 50% 50%, rgba(255, 255, 0, 0.8) 2px, transparent 2px);
            background-size: 60px 60px, 80px 80px, 100px 100px;
            animation: particleWave 15s linear infinite;
        }

        @keyframes particleWave {
            0% { transform: translate(0, 0) scale(1); opacity: 0.3; }
            25% { transform: translate(-20px, -20px) scale(1.2); opacity: 0.6; }
            50% { transform: translate(20px, -10px) scale(0.8); opacity: 0.4; }
            75% { transform: translate(-10px, 20px) scale(1.1); opacity: 0.7; }
            100% { transform: translate(0, 0) scale(1); opacity: 0.3; }
        }

        /* Cybernetic Grid */
        .cybernetic-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 255, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 255, 0.1) 1px, transparent 1px);
            background-size: 40px 40px;
            animation: gridPulse 10s ease-in-out infinite;
        }

        @keyframes gridPulse {
            0%, 100% { opacity: 0.2; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.05); }
        }

        /* Light Streaks */
        .light-streaks {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(90deg, 
                    transparent 0%, 
                    rgba(0, 255, 255, 0.6) 10%, 
                    transparent 20%),
                linear-gradient(90deg, 
                    transparent 30%, 
                    rgba(255, 0, 255, 0.6) 40%, 
                    transparent 50%),
                linear-gradient(90deg, 
                    transparent 60%, 
                    rgba(255, 255, 0, 0.6) 70%, 
                    transparent 80%);
            background-size: 200% 100%;
            animation: lightStreakFlow 6s linear infinite;
        }

        @keyframes lightStreakFlow {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        /* Canvas positioning for backgrounds */
        .futuristic-background-left canvas,
        .futuristic-background-right canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        /* Responsive adjustments for futuristic backgrounds */
        @media (max-width: 1200px) {
            .futuristic-background-left,
            .futuristic-background-right {
                width: 30%;
            }
        }

        @media (max-width: 768px) {
            .futuristic-background-left,
            .futuristic-background-right {
                width: 25%;
            }
            
            .cybernetic-grid {
                background-size: 30px 30px;
            }
            
            .neon-particle-waves {
                background-size: 40px 40px, 50px 50px, 60px 60px;
            }
        }

        @media (max-width: 480px) {
            .futuristic-background-left,
            .futuristic-background-right {
                width: 20%;
            }
            
            .cybernetic-grid {
                background-size: 20px 20px;
            }
            
            .neon-particle-waves {
                background-size: 30px 30px, 35px 35px, 40px 40px;
            }
        }

        .hero-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            border-radius: 30px;
            overflow: hidden;
        }

        /* Panel Particle Container - Contained within panel */
        .panel-particles-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            border-radius: 30px;
        }

        .panel-particles-container::before,
        .panel-particles-container::after {
            content: '';
            position: absolute;
            width: 4px;
            height: 4px;
            background: #00ffff;
            border-radius: 50%;
            box-shadow: 
                20px 30px #ff00ff,
                40px 10px #ffff00,
                60px 50px #00ffff,
                80px 20px #ff00ff,
                100px 60px #ffff00,
                120px 40px #00ffff,
                140px 70px #ff00ff,
                160px 30px #ffff00,
                180px 80px #00ffff,
                200px 50px #ff00ff;
            animation: panelParticleFloat 15s linear infinite;
        }

        .panel-particles-container::after {
            animation-delay: -7.5s;
            box-shadow: 
                10px 20px #ffff00,
                30px 40px #00ffff,
                50px 15px #ff00ff,
                70px 35px #ffff00,
                90px 55px #00ffff,
                110px 25px #ff00ff,
                130px 45px #ffff00,
                150px 65px #00ffff,
                170px 35px #ff00ff,
                190px 75px #ffff00;
        }

        /* Panel Energy Waves - Contained within panel */
        .panel-energy-waves {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 150%;
            height: 150%;
            pointer-events: none;
        }

        .panel-energy-waves::before,
        .panel-energy-waves::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            border: 2px solid;
            border-radius: 50%;
            opacity: 0;
        }

        .panel-energy-waves::before {
            border-color: #00ffff;
            animation: panelWaveExpand 4s ease-out infinite;
        }

        .panel-energy-waves::after {
            border-color: #ff00ff;
            animation: panelWaveExpand 4s ease-out infinite 2s;
        }

        /* Panel Holographic Overlay - Contained within panel */
        .panel-holographic-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                135deg,
                rgba(0, 255, 255, 0.1) 0%,
                rgba(255, 0, 255, 0.05) 25%,
                rgba(255, 255, 0, 0.1) 50%,
                rgba(0, 255, 255, 0.05) 75%,
                rgba(255, 0, 255, 0.1) 100%
            );
            animation: panelHolographicShift 8s ease-in-out infinite;
            pointer-events: none;
            border-radius: 30px;
        }

        /* Panel Neon Grid - Contained within panel */
        .panel-neon-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 255, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 255, 0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: panelGridMove 20s linear infinite;
            opacity: 0.3;
            border-radius: 30px;
        }

        /* Enhanced Panel-specific Animations */
        @keyframes panelParticleFloat {
            0%, 100% { 
                transform: translateY(0px) rotate(0deg) scale(1); 
                opacity: 0; 
            }
            10% { 
                opacity: 1; 
                transform: translateY(-10px) rotate(36deg) scale(1.2);
            }
            25% { 
                transform: translateY(-30px) rotate(90deg) scale(1.5);
            }
            50% { 
                transform: translateY(-60px) rotate(180deg) scale(1.8);
            }
            75% { 
                transform: translateY(-90px) rotate(270deg) scale(1.5);
            }
            90% { 
                opacity: 1; 
                transform: translateY(-110px) rotate(324deg) scale(1.2);
            }
        }

        @keyframes panelWaveExpand {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 1;
                filter: brightness(1.5);
            }
            50% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0.7;
                filter: brightness(1.2);
            }
            100% {
                transform: translate(-50%, -50%) scale(2);
                opacity: 0;
                filter: brightness(0.8);
            }
        }

        @keyframes panelHolographicShift {
            0%, 100% { 
                transform: translateX(0) translateY(0) rotate(0deg); 
                filter: hue-rotate(0deg) brightness(1);
            }
            25% { 
                transform: translateX(15px) translateY(-8px) rotate(90deg); 
                filter: hue-rotate(30deg) brightness(1.1);
            }
            50% { 
                transform: translateX(-8px) translateY(15px) rotate(180deg); 
                filter: hue-rotate(-30deg) brightness(0.9);
            }
            75% { 
                transform: translateX(-15px) translateY(-15px) rotate(270deg); 
                filter: hue-rotate(60deg) brightness(1.2);
            }
        }

        @keyframes panelGridMove {
            0% { 
                transform: translate(0, 0) scale(1); 
                opacity: 0.4;
            }
            25% { 
                transform: translate(25px, 25px) scale(1.1); 
                opacity: 0.6;
            }
            50% { 
                transform: translate(50px, 50px) scale(1); 
                opacity: 0.3;
            }
            75% { 
                transform: translate(25px, 75px) scale(0.9); 
                opacity: 0.5;
            }
            100% { 
                transform: translate(50px, 50px) scale(1); 
                opacity: 0.4;
            }
        }

        /* Restore Original Futuristic Animations */
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        @keyframes waveExpand {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(2);
                opacity: 0;
            }
        }

        @keyframes particlesFloat {
            0%, 100% { 
                transform: translateY(0) rotate(0deg); 
                opacity: 0.8;
            }
            33% { 
                transform: translateY(-20px) rotate(120deg); 
                opacity: 1;
            }
            66% { 
                transform: translateY(20px) rotate(240deg); 
                opacity: 0.6;
            }
        }

        @keyframes holographicShift {
            0%, 100% { 
                transform: translateX(-100%) rotate(0deg); 
                filter: hue-rotate(0deg);
            }
            50% { 
                transform: translateX(100%) rotate(180deg); 
                filter: hue-rotate(180deg);
            }
        }

        /* Enhanced Title Animations */
        @keyframes panelFloat {
            0%, 100% { 
                transform: translateY(0) scale(1); 
                filter: brightness(1);
            }
            25% { 
                transform: translateY(-5px) scale(1.005); 
                filter: brightness(1.05);
            }
            50% { 
                transform: translateY(-15px) scale(1.01); 
                filter: brightness(1.1);
            }
            75% { 
                transform: translateY(-8px) scale(1.005); 
                filter: brightness(1.05);
            }
        }

        @keyframes glowRotate {
            0% { 
                transform: rotate(0deg) scale(1); 
                filter: hue-rotate(0deg);
            }
            25% { 
                transform: rotate(90deg) scale(1.1); 
                filter: hue-rotate(90deg);
            }
            50% { 
                transform: rotate(180deg) scale(1); 
                filter: hue-rotate(180deg);
            }
            75% { 
                transform: rotate(270deg) scale(0.9); 
                filter: hue-rotate(270deg);
            }
            100% { 
                transform: rotate(360deg) scale(1); 
                filter: hue-rotate(360deg);
            }
        }

        @keyframes titleGlow {
            0%, 100% { 
                background-position: 0% 50%;
                filter: brightness(1) drop-shadow(0 0 20px rgba(0, 255, 255, 0.5));
                transform: scale(1);
            }
            25% { 
                background-position: 25% 50%;
                filter: brightness(1.1) drop-shadow(0 0 25px rgba(255, 0, 255, 0.6));
                transform: scale(1.02);
            }
            50% { 
                background-position: 100% 50%;
                filter: brightness(1.2) drop-shadow(0 0 30px rgba(255, 0, 255, 0.7));
                transform: scale(1.03);
            }
            75% { 
                background-position: 75% 50%;
                filter: brightness(1.15) drop-shadow(0 0 25px rgba(255, 255, 0, 0.6));
                transform: scale(1.02);
            }
        }

        @keyframes subtitlePulse {
            0%, 100% { 
                opacity: 0.8; 
                transform: scale(1);
            }
            25% { 
                opacity: 0.9; 
                transform: scale(1.02);
            }
            50% { 
                opacity: 1; 
                transform: scale(1.05);
            }
            75% { 
                opacity: 0.95; 
                transform: scale(1.03);
            }
        }

        /* Glass Morphism Welcome Panel with Contained Animation */
        .welcome-panel {
            position: relative;
            z-index: 10;
            text-align: center;
            padding: 45px 40px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            max-width: 800px;
            margin: 0 auto;
            transform: translateY(0);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            animation: panelFloat 6s ease-in-out infinite;
            overflow: hidden; /* Ensure containment */
        }

        /* Enhanced Panel-contained Animated Background */
        .panel-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            border-radius: 30px;
            overflow: hidden;
            pointer-events: none;
            background: 
                radial-gradient(circle at 30% 70%, rgba(0, 255, 255, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 70% 30%, rgba(255, 0, 255, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 50% 50%, rgba(255, 255, 0, 0.08) 0%, transparent 50%);
            animation: panelBackgroundPulse 8s ease-in-out infinite alternate;
        }

        @keyframes panelBackgroundPulse {
            0% { opacity: 0.7; transform: scale(1); }
            50% { opacity: 0.9; transform: scale(1.05); }
            100% { opacity: 0.8; transform: scale(1.02); }
        }

        /* Enhanced Panel Particle Container */
        .panel-particles-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            border-radius: 30px;
        }

        .panel-particles-container::before,
        .panel-particles-container::after {
            content: '';
            position: absolute;
            width: 4px;
            height: 4px;
            background: #00ffff;
            border-radius: 50%;
            box-shadow: 
                20px 30px #ff00ff,
                40px 10px #ffff00,
                60px 50px #00ffff,
                80px 20px #ff00ff,
                100px 60px #ffff00,
                120px 40px #00ffff,
                140px 70px #ff00ff,
                160px 30px #ffff00,
                180px 80px #00ffff,
                200px 50px #ff00ff,
                220px 25px #00ff88,
                240px 75px #ff8800;
            animation: panelParticleFloat 20s linear infinite;
        }

        .panel-particles-container::after {
            animation-delay: -10s;
            box-shadow: 
                10px 20px #ffff00,
                30px 40px #00ffff,
                50px 15px #ff00ff,
                70px 35px #ffff00,
                90px 55px #00ffff,
                110px 25px #ff00ff,
                130px 45px #ffff00,
                150px 65px #00ffff,
                170px 35px #ff00ff,
                190px 75px #ffff00,
                210px 40px #00ff88,
                230px 60px #ff8800;
        }

        /* Additional Particle Layers */
        .panel-particles-container::before {
            animation: panelParticleFloat 25s linear infinite reverse;
        }

        /* Enhanced Panel Energy Waves */
        .panel-energy-waves {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 150%;
            height: 150%;
            pointer-events: none;
        }

        .panel-energy-waves::before,
        .panel-energy-waves::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            border: 2px solid;
            border-radius: 50%;
            opacity: 0;
        }

        .panel-energy-waves::before {
            border-color: #00ffff;
            animation: panelWaveExpand 4s ease-out infinite;
        }

        .panel-energy-waves::after {
            border-color: #ff00ff;
            animation: panelWaveExpand 4s ease-out infinite 2s;
        }

        /* Additional Wave Layers */
        .panel-energy-waves::before,
        .panel-energy-waves::after {
            box-shadow: 
                0 0 20px currentColor,
                0 0 40px currentColor,
                inset 0 0 20px currentColor;
        }

        /* Enhanced Panel Holographic Overlay */
        .panel-holographic-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                135deg,
                rgba(0, 255, 255, 0.15) 0%,
                rgba(255, 0, 255, 0.08) 25%,
                rgba(255, 255, 0, 0.15) 50%,
                rgba(0, 255, 255, 0.08) 75%,
                rgba(255, 0, 255, 0.15) 100%
            );
            animation: panelHolographicShift 8s ease-in-out infinite;
            pointer-events: none;
            border-radius: 30px;
            mix-blend-mode: screen;
        }

        /* Enhanced Panel Neon Grid */
        .panel-neon-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 255, 255, 0.15) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 255, 0.15) 1px, transparent 1px),
                linear-gradient(45deg, rgba(255, 0, 255, 0.05) 2px, transparent 2px),
                linear-gradient(-45deg, rgba(255, 255, 0, 0.05) 2px, transparent 2px);
            background-size: 50px 50px, 50px 50px, 100px 100px, 100px 100px;
            animation: panelGridMove 20s linear infinite;
            opacity: 0.4;
            border-radius: 30px;
        }

        /* Additional Futuristic Elements */
        .panel-background::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(
                from 0deg,
                transparent 0deg,
                rgba(0, 255, 255, 0.1) 60deg,
                transparent 120deg,
                rgba(255, 0, 255, 0.1) 180deg,
                transparent 240deg,
                rgba(255, 255, 0, 0.1) 300deg,
                transparent 360deg
            );
            animation: panelConicRotate 15s linear infinite;
            border-radius: 30px;
        }

        @keyframes panelConicRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .welcome-panel:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 
                0 20px 60px rgba(0, 255, 255, 0.3),
                0 8px 32px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }

        /* Panel Content - Positioned above animated background */
        .welcome-panel > * {
            position: relative;
            z-index: 20;
        }

        /* Canvas positioning */
        .welcome-panel canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            pointer-events: none;
            border-radius: 30px;
        }

        /* Panel Glow Effect - Behind content but above background */
        .panel-glow {
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #00ffff, #ff00ff, #ffff00, #00ffff);
            border-radius: 30px;
            z-index: 15;
            opacity: 0.5;
            animation: glowRotate 4s linear infinite;
            filter: blur(10px);
            pointer-events: none;
        }

        /* Futuristic Title */
        .welcome-title {
            font-size: clamp(2.5rem, 6vw, 4rem);
            font-weight: 700;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #ffffff, #00ffff, #ff00ff, #ffffff);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            text-transform: uppercase;
            letter-spacing: 3px;
            animation: titleGlow 3s ease-in-out infinite;
            text-shadow: 0 0 30px rgba(0, 255, 255, 0.5);
        }

        /* Futuristic Subtitle */
        .welcome-subtitle {
            font-size: clamp(1rem, 2.5vw, 1.3rem);
            margin-bottom: 40px;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 300;
            letter-spacing: 1px;
            animation: subtitlePulse 4s ease-in-out infinite;
        }

        /* Enhanced Futuristic Button */
        .futuristic-btn {
            position: relative;
            display: inline-block;
            padding: 18px 50px;
            background: linear-gradient(135deg, #00ffff 0%, #0080ff 50%, #ff00ff 100%);
            background-size: 200% 200%;
            color: #000;
            text-decoration: none;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 
                0 4px 20px rgba(0, 255, 255, 0.4),
                inset 0 0 20px rgba(255, 255, 255, 0.2);
            animation: gradientShift 3s ease-in-out infinite;
            cursor: pointer;
        }

        .futuristic-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
            transition: left 0.6s ease;
            z-index: 1;
        }

        .futuristic-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.3) 50%, transparent 70%);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
            z-index: 1;
        }

        .futuristic-btn:hover {
            transform: translateY(-5px) scale(1.08) rotateX(5deg);
            box-shadow: 
                0 8px 40px rgba(255, 0, 255, 0.6),
                0 4px 20px rgba(0, 255, 255, 0.4),
                inset 0 0 30px rgba(255, 255, 255, 0.3);
            animation-play-state: paused;
            background: linear-gradient(225deg, #00ffff 0%, #ff00ff 50%, #0080ff 100%);
        }

        .futuristic-btn:hover::before {
            left: 100%;
        }

        .futuristic-btn:hover::after {
            transform: translateX(100%);
        }

        .futuristic-btn:active {
            transform: translateY(-2px) scale(1.05) rotateX(2deg);
            box-shadow: 
                0 4px 20px rgba(255, 0, 255, 0.4),
                inset 0 0 20px rgba(0, 0, 0, 0.2);
        }

        .btn-text {
            position: relative;
            z-index: 2;
            font-weight: 700;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .btn-glow {
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s ease;
            z-index: 1;
        }

        .futuristic-btn:hover .btn-glow {
            left: 100%;
        }

        /* Enhanced Button Ripple Effect */
        .futuristic-btn .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.6);
            transform: scale(0);
            animation: ripple 0.6s ease-out;
            z-index: 1;
        }

        @keyframes ripple {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

        /* Animations */
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        @keyframes waveExpand {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(2);
                opacity: 0;
            }
        }

        @keyframes particlesFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            33% { transform: translateY(-20px) rotate(120deg); }
            66% { transform: translateY(20px) rotate(240deg); }
        }

        @keyframes holographicShift {
            0%, 100% { transform: translateX(-100%); }
            50% { transform: translateX(100%); }
        }

        @keyframes panelFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        @keyframes glowRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes titleGlow {
            0%, 100% { 
                background-position: 0% 50%;
                filter: brightness(1) drop-shadow(0 0 20px rgba(0, 255, 255, 0.5));
            }
            50% { 
                background-position: 100% 50%;
                filter: brightness(1.2) drop-shadow(0 0 30px rgba(255, 0, 255, 0.7));
            }
        }

        @keyframes subtitlePulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }

        /* Responsive Design with Proper Containment */
        @media (max-width: 768px) {
            .welcome-panel {
                padding: 30px 20px;
                margin: 0 20px;
                overflow: hidden; /* Ensure containment on mobile */
            }

            .panel-background {
                border-radius: 30px; /* Match panel border radius */
            }

            .welcome-title {
                font-size: clamp(2rem, 5vw, 3rem);
                letter-spacing: 2px;
            }

            .welcome-subtitle {
                font-size: clamp(0.9rem, 2vw, 1.1rem);
            }

            .futuristic-btn {
                padding: 15px 40px;
                font-size: 1rem;
            }

            .panel-neon-grid {
                background-size: 30px 30px;
            }
        }

        @media (max-width: 480px) {
            .welcome-panel {
                padding: 22px 15px;
                margin: 0 10px;
                overflow: hidden; /* Ensure containment on small mobile */
            }

            .panel-background {
                border-radius: 30px; /* Match panel border radius */
            }

            .futuristic-btn {
                padding: 12px 30px;
                font-size: 0.9rem;
            }
        }

        .btn {
            display: inline-block;
            padding: 12px 30px;
            background: var(--accent-color);
            color: var(--white);
            text-decoration: none;
            border-radius: 25px;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        /* Categories Section */
        .categories {
            padding: 80px 0;
            background: var(--bg-light);
        }

        .section-title {
            text-align: center;
            font-size: 36px;
            margin-bottom: 50px;
            color: var(--text-dark);
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
        }

        .category-card {
            background: var(--white);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .category-icon {
            font-size: 48px;
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .category-name {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .category-count {
            color: var(--text-light);
        }

        /* Products Section */
        .products {
            padding: 80px 0;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
        }

        .product-card {
            background: var(--white);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .product-info {
            padding: 20px;
        }

        .product-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .product-price {
            font-size: 24px;
            color: var(--primary-color);
            font-weight: bold;
            margin-bottom: 15px;
        }

        .product-description {
            color: var(--text-light);
            margin-bottom: 15px;
        }

        /* Footer */
        .footer {
            position: relative;
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
            color: var(--white);
            padding: 50px 0 20px;
            overflow: hidden;
        }

        /* Kenyan Flag Creative Background */
        .footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                /* Black base with geometric patterns */
                linear-gradient(45deg, #000000 25%, transparent 25%),
                linear-gradient(-45deg, #000000 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, #000000 75%),
                linear-gradient(-45deg, transparent 75%, #000000 75%),
                /* Red accents */
                radial-gradient(circle at 20% 30%, rgba(255, 0, 0, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(255, 0, 0, 0.12) 0%, transparent 35%),
                radial-gradient(circle at 50% 20%, rgba(255, 0, 0, 0.08) 0%, transparent 30%),
                /* Green elements */
                linear-gradient(120deg, transparent 40%, rgba(0, 128, 0, 0.1) 50%, transparent 60%),
                linear-gradient(60deg, transparent 35%, rgba(0, 128, 0, 0.08) 45%, transparent 55%),
                /* White highlights */
                radial-gradient(ellipse at 30% 80%, rgba(255, 255, 255, 0.05) 0%, transparent 50%),
                radial-gradient(ellipse at 70% 20%, rgba(255, 255, 255, 0.03) 0%, transparent 40%);
            background-size: 
                80px 80px, 80px 80px, 80px 80px, 80px 80px,
                200px 200px, 180px 180px, 150px 150px,
                300px 100%, 300px 100%,
                250px 150px, 200px 120px;
            background-position: 
                0 0, 0 40px, 40px -40px, -40px 0px,
                0 0, 100% 100%, 50% 0,
                0 0, 0 50%,
                30% 70%, 70% 30%;
            z-index: -1;
        }

        /* Kenyan-inspired geometric overlay */
        .footer::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                /* Maasai-inspired shield patterns */
                conic-gradient(from 45deg at 25% 25%, transparent 0deg, rgba(255, 0, 0, 0.1) 60deg, transparent 120deg, transparent 240deg, rgba(0, 128, 0, 0.1) 300deg, transparent 360deg),
                conic-gradient(from 225deg at 75% 75%, transparent 0deg, rgba(0, 128, 0, 0.08) 60deg, transparent 120deg, transparent 240deg, rgba(255, 0, 0, 0.08) 300deg, transparent 360deg),
                /* Spear-like diagonal lines */
                linear-gradient(30deg, transparent 48%, rgba(255, 255, 255, 0.02) 50%, transparent 52%),
                linear-gradient(-30deg, transparent 48%, rgba(255, 255, 255, 0.02) 50%, transparent 52%),
                linear-gradient(150deg, transparent 48%, rgba(255, 255, 255, 0.02) 50%, transparent 52%),
                linear-gradient(-150deg, transparent 48%, rgba(255, 255, 255, 0.02) 50%, transparent 52%);
            background-size: 
                300px 300px, 300px 300px,
                100px 100%, 100px 100%, 100px 100%, 100px 100%;
            background-position: 
                0 0, 100% 100%,
                0 0, 50px 0, 100px 0, 150px 0;
            z-index: -1;
        }

        /* Subtle texture overlay */
        .footer .kenyan-texture {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(255, 255, 255, 0.01) 2px, rgba(255, 255, 255, 0.01) 4px),
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0, 0, 0, 0.03) 2px, rgba(0, 0, 0, 0.03) 4px);
            z-index: -1;
            pointer-events: none;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 30px;
            position: relative;
            z-index: 2;
        }

        .footer-section {
            position: relative;
            z-index: 2;
        }

        .footer-section h3 {
            margin-bottom: 20px;
            font-size: 1.4rem;
            font-weight: 600;
            color: #ffffff;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
            position: relative;
            padding-bottom: 10px;
        }

        .footer-section h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 3px;
            background: linear-gradient(90deg, #ff0000, #008000);
            border-radius: 2px;
        }

        .footer-section p {
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 12px;
            position: relative;
            padding-left: 20px;
        }

        .footer-section ul li::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            color: rgba(255, 0, 0, 0.7);
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .footer-section ul li:hover::before {
            color: rgba(0, 128, 0, 0.9);
            transform: translateX(3px);
        }

        .footer-section a {
            color: rgba(255, 255, 255, 0.85);
            text-decoration: none;
            transition: all 0.3s ease;
            display: inline-block;
            position: relative;
        }

        .footer-section a::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 1px;
            background: linear-gradient(90deg, #ff0000, #008000);
            transition: width 0.3s ease;
        }

        .footer-section a:hover {
            color: #ffffff;
            transform: translateX(2px);
        }

        .footer-section a:hover::after {
            width: 100%;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
            opacity: 0.8;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            overflow-y: auto; /* Allow scrolling within modal */
        }

        .modal-content {
            background-color: var(--white);
            margin: 5% auto;
            padding: 0;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            position: relative;
            animation: modalSlideIn 0.3s ease-out;
            min-height: fit-content; /* Ensure modal fits content */
        }

        @keyframes modalSlideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            background: var(--primary-color);
            color: var(--white);
            padding: 20px;
            border-radius: 15px 15px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            margin: 0;
        }

        .close {
            color: var(--white);
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
        }

        .close:hover {
            opacity: 0.7;
        }

        .modal-body {
            padding: 30px;
        }

        /* Product Details Modal Styles */
        .product-details-modal {
            max-width: 900px;
            width: 95%;
        }

        .product-details-body {
            padding: 0;
        }

        .product-details-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 30px;
        }

        .product-image-section {
            text-align: center;
        }

        .product-detail-image {
            width: 100%;
            max-width: 400px;
            height: 300px;
            object-fit: cover;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .product-rating {
            margin-top: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .product-rating #productRating {
            color: #f39c12;
            font-size: 18px;
        }

        .product-rating #ratingValue {
            color: var(--text-light);
            font-weight: 600;
        }

        .product-price-section {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .product-price-section h3 {
            color: var(--primary-color);
            font-size: 28px;
            margin: 0;
        }

        .stock-badge {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            background: #27ae60;
            color: white;
        }

        .stock-badge.out-of-stock {
            background: #e74c3c;
        }

        .product-description,
        .product-features,
        .product-specifications {
            margin-bottom: 25px;
        }

        .product-description h4,
        .product-features h4,
        .product-specifications h4 {
            color: var(--text-dark);
            margin-bottom: 10px;
            font-size: 18px;
        }

        .product-description p {
            color: var(--text-light);
            line-height: 1.6;
        }

        .product-features ul {
            list-style: none;
            padding: 0;
        }

        .product-features li {
            padding: 8px 0;
            color: var(--text-light);
            position: relative;
            padding-left: 25px;
        }

        .product-features li:before {
            content: "";
            position: absolute;
            left: 0;
            color: var(--primary-color);
            font-weight: bold;
        }

        .specifications-grid {
            display: grid;
            gap: 10px;
        }

        .spec-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
        }

        .spec-label {
            font-weight: 600;
            color: var(--text-dark);
        }

        .spec-value {
            color: var(--text-light);
        }

        .product-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .product-actions .btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .product-actions .btn i {
            margin-right: 8px;
        }

        .btn-wishlist {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }

        .btn-wishlist:hover {
            background: linear-gradient(135deg, #c0392b, #a93226);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
        }

        .btn-wishlist i {
            margin-right: 5px;
        }

        @media (max-width: 768px) {
            .product-details-grid {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 20px;
            }

            .product-detail-image {
                height: 250px;
            }

            .product-actions {
                flex-direction: column;
            }

            .product-price-section {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .error {
            color: #dc3545;
            font-size: 14px;
            margin-top: 5px;
        }

        .btn-primary {
            width: 100%;
            padding: 15px;
            background: var(--primary-color);
            color: var(--white);
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .btn-primary:hover {
            background: var(--secondary-color);
        }

        .btn-primary:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .form-footer {
            text-align: center;
            margin-top: 20px;
            color: var(--text-light);
        }

        .form-footer a {
            color: var(--primary-color);
            text-decoration: none;
        }

        .form-footer a:hover {
            text-decoration: underline;
        }

        /* User authentication styles */
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--accent-color);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--primary-color);
            color: var(--white);
            padding: 15px 20px;
            border-radius: 5px;
            z-index: 10000;
            animation: slideIn 0.3s ease-out;
        }

        .toast.success {
            background: #28a745;
        }

        .toast.error {
            background: #dc3545;
        }

        .toast.warning {
            background: #ffc107;
            color: var(--text-dark);
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Loading spinner */
        .spinner {
            border: 2px solid #f3f3f3;
            border-top: 2px solid var(--primary-color);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Seller Dashboard Styles */
        .seller-dashboard {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #2a2a2a 100%);
            z-index: 10000;
            display: none;
            overflow: hidden;
        }

        .dashboard-header {
            background: rgba(0, 0, 0, 0.9);
            border-bottom: 2px solid rgba(0, 255, 255, 0.3);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0, 255, 255, 0.2);
        }

        .dashboard-nav-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .home-icon-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            color: #00ffff;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .home-icon-btn:hover {
            background: rgba(0, 255, 255, 0.2);
            border-color: rgba(0, 255, 255, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 255, 255, 0.3);
            color: #ffffff;
        }

        .home-icon-btn i {
            font-size: 16px;
        }

        .dashboard-logo .logo-text {
            font-size: 24px;
            font-weight: bold;
            color: #00ffff;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.8);
            animation: glow 2s ease-in-out infinite alternate;
        }

        .dashboard-user {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00ffff, #ff00ff);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 18px;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.6);
        }

        .dashboard-user span {
            color: #ffffff;
            font-weight: 600;
        }

        .btn-logout {
            background: linear-gradient(135deg, #ff4444, #cc0000);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(255, 68, 68, 0.3);
        }

        .btn-logout:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(255, 68, 68, 0.5);
        }

        .dashboard-container {
            display: flex;
            height: calc(100vh - 70px);
        }

        .dashboard-sidebar {
            width: 260px;
            background: rgba(0, 0, 0, 0.8);
            border-right: 1px solid rgba(0, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            overflow-y: auto;
        }

        .sidebar-nav {
            padding: 20px 0;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 15px 25px;
            color: #b0b0b0;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 3px solid transparent;
            margin: 5px 0;
        }

        .nav-item:hover {
            background: rgba(0, 255, 255, 0.1);
            color: #00ffff;
            border-left-color: #00ffff;
            transform: translateX(5px);
        }

        .nav-item.active {
            background: rgba(0, 255, 255, 0.2);
            color: #00ffff;
            border-left-color: #00ffff;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
        }

        .nav-item i {
            width: 20px;
            margin-right: 15px;
            font-size: 16px;
        }

        .dashboard-content {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
            background: rgba(0, 0, 0, 0.5);
        }

        .dashboard-section {
            display: none;
            animation: fadeInUp 0.5s ease-out;
        }

        .dashboard-section.active {
            display: block;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section-header h2 {
            color: #00ffff;
            font-size: 32px;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.6);
        }

        .section-subtitle {
            color: #b0b0b0;
            font-size: 16px;
            margin-bottom: 30px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 15px;
            padding: 25px;
            display: flex;
            align-items: center;
            gap: 20px;
            backdrop-filter: blur(10px);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .stat-card:hover::before {
            left: 100%;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 255, 255, 0.3);
            border-color: #00ffff;
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00ffff, #0088cc);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
        }

        .stat-number {
            font-size: 36px;
            font-weight: bold;
            color: #00ffff;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.8);
        }

        .stat-label {
            color: #b0b0b0;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .upload-form {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
            max-width: 800px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            color: #00ffff;
            font-weight: 600;
            margin-bottom: 8px;
            text-shadow: 0 0 5px rgba(0, 255, 255, 0.5);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 8px;
            color: white;
            font-size: 14px;
            transition: all 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #00ffff;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
        }

        .image-upload-area {
            border: 2px dashed rgba(0, 255, 255, 0.3);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s;
        }

        .upload-drop-zone {
            padding: 30px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .upload-drop-zone:hover {
            background: rgba(0, 255, 255, 0.1);
            border-color: #00ffff;
        }

        .upload-drop-zone i {
            font-size: 48px;
            color: #00ffff;
            margin-bottom: 15px;
        }

        .image-preview-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }

        .image-preview {
            position: relative;
            width: 100px;
            height: 100px;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid rgba(0, 255, 255, 0.3);
        }

        .image-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .image-preview .remove-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255, 68, 68, 0.8);
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .form-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #00ffff, #0088cc);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0, 255, 255, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(0, 255, 255, 0.5);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #00ffff;
            border: 1px solid rgba(0, 255, 255, 0.3);
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn-secondary:hover {
            background: rgba(0, 255, 255, 0.1);
            border-color: #00ffff;
        }

        .products-toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .filter-controls {
            display: flex;
            gap: 10px;
        }

        .filter-controls select,
        .search-controls input {
            padding: 8px 12px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 8px;
            color: white;
            font-size: 14px;
        }

        .products-table-container {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 15px;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .products-table {
            width: 100%;
            border-collapse: collapse;
        }

        .products-table th {
            background: rgba(0, 255, 255, 0.1);
            color: #00ffff;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 12px;
            letter-spacing: 1px;
        }

        .products-table td {
            padding: 15px;
            border-top: 1px solid rgba(0, 255, 255, 0.1);
            color: white;
        }

        .products-table tr:hover {
            background: rgba(0, 255, 255, 0.05);
        }

        .product-image-thumb {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            object-fit: cover;
            border: 1px solid rgba(0, 255, 255, 0.3);
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-pending {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
            border: 1px solid rgba(255, 193, 7, 0.3);
        }

        .status-approved {
            background: rgba(40, 167, 69, 0.2);
            color: #28a745;
            border: 1px solid rgba(40, 167, 69, 0.3);
        }

        .status-featured {
            background: rgba(255, 215, 0, 0.2);
            color: #ffd700;
            border: 1px solid rgba(255, 215, 0, 0.3);
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .status-rejected {
            background: rgba(220, 53, 69, 0.2);
            color: #dc3545;
            border: 1px solid rgba(220, 53, 69, 0.3);
        }

        .featured-products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .featured-product-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 15px;
            overflow: hidden;
            backdrop-filter: blur(10px);
            transition: all 0.3s;
            position: relative;
        }

        .featured-product-card::before {
            content: '';
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 215, 0, 0.9);
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            z-index: 1;
        }

        .featured-product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.3);
        }

        .featured-product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .featured-product-info {
            padding: 20px;
        }

        .featured-product-name {
            color: #ffd700;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .featured-product-price {
            color: #00ffff;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .account-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .account-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
        }

        .account-card h3 {
            color: #00ffff;
            margin-bottom: 20px;
            font-size: 20px;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .info-item label {
            color: #b0b0b0;
            font-weight: 600;
        }

        .info-item span {
            color: white;
            font-weight: 500;
        }

        .notifications-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
        }

        .notifications-section h3 {
            color: #00ffff;
            margin-bottom: 20px;
            font-size: 20px;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }

        .notifications-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .notification-item {
            background: rgba(0, 0, 0, 0.3);
            border-left: 3px solid #00ffff;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 5px;
            animation: slideInRight 0.3s ease-out;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .notification-item.info {
            border-left-color: #17a2b8;
        }

        .notification-item.success {
            border-left-color: #28a745;
        }

        .notification-item.warning {
            border-left-color: #ffc107;
        }

        .notification-item.error {
            border-left-color: #dc3545;
        }

        .no-products,
        .no-featured {
            text-align: center;
            padding: 60px 20px;
            color: #b0b0b0;
        }

        .no-products i,
        .no-featured i {
            font-size: 64px;
            color: #00ffff;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .no-products p,
        .no-featured p {
            font-size: 18px;
            margin-bottom: 10px;
        }

        .no-products small,
        .no-featured small {
            font-size: 14px;
            opacity: 0.7;
        }

        .activity-list {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            max-height: 300px;
            overflow-y: auto;
        }

        .activity-item {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(0, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #00ffff;
            margin-right: 15px;
        }

        .activity-content {
            flex: 1;
        }

        .activity-title {
            color: white;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .activity-time {
            color: #b0b0b0;
            font-size: 12px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .dashboard-sidebar {
                width: 200px;
            }

            .dashboard-content {
                padding: 20px;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .products-toolbar {
                flex-direction: column;
                align-items: stretch;
            }

            .filter-controls {
                flex-direction: column;
            }

            .featured-products-grid {
                grid-template-columns: 1fr;
            }

            .account-info-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .dashboard-header {
                padding: 10px 15px;
            }

            .dashboard-logo .logo-text {
                font-size: 18px;
            }

            .dashboard-user span {
                display: none;
            }

            .dashboard-sidebar {
                width: 60px;
            }

            .nav-item span {
                display: none;
            }

            .nav-item {
                justify-content: center;
                padding: 15px 10px;
            }

            .nav-item i {
                margin: 0;
            }

            .dashboard-content {
                margin-left: 0;
            }
        }

        /* Admin Dashboard Styles */
        .admin-dashboard {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #2a2a2a 100%);
            z-index: 10000;
            display: none;
            overflow: hidden;
        }

        .admin-header {
            background: rgba(0, 0, 0, 0.9);
            border-bottom: 2px solid rgba(255, 0, 255, 0.3);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(255, 0, 255, 0.2);
        }

        .admin-logo .logo-text {
            font-size: 24px;
            font-weight: bold;
            color: #ff00ff;
            text-shadow: 0 0 20px rgba(255, 0, 255, 0.8);
            animation: glow 2s ease-in-out infinite alternate;
        }

        .admin-user {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .admin-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff00ff, #00ffff);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 18px;
            box-shadow: 0 0 20px rgba(255, 0, 255, 0.6);
        }

        .admin-user span {
            color: #ffffff;
            font-weight: 600;
        }

        .admin-container {
            display: flex;
            height: calc(100vh - 70px);
        }

        .admin-sidebar {
            width: 260px;
            background: rgba(0, 0, 0, 0.8);
            border-right: 1px solid rgba(255, 0, 255, 0.2);
            backdrop-filter: blur(10px);
            overflow-y: auto;
        }

        .admin-nav {
            padding: 20px 0;
        }

        .admin-nav-item {
            display: flex;
            align-items: center;
            padding: 15px 25px;
            color: #b0b0b0;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 3px solid transparent;
            margin: 5px 0;
            position: relative;
        }

        .admin-nav-item:hover {
            background: rgba(255, 0, 255, 0.1);
            color: #ff00ff;
            border-left-color: #ff00ff;
            transform: translateX(5px);
        }

        .admin-nav-item.active {
            background: rgba(255, 0, 255, 0.2);
            color: #ff00ff;
            border-left-color: #ff00ff;
            box-shadow: 0 0 20px rgba(255, 0, 255, 0.3);
        }

        .admin-nav-item i {
            width: 20px;
            margin-right: 15px;
            font-size: 16px;
        }

        .admin-content {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
            background: rgba(0, 0, 0, 0.5);
        }

        .admin-section {
            display: none;
            animation: fadeInUp 0.5s ease-out;
        }

        .admin-section.active {
            display: block;
        }

        .admin-stat-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 0, 255, 0.3);
            border-radius: 15px;
            padding: 25px;
            display: flex;
            align-items: center;
            gap: 20px;
            backdrop-filter: blur(10px);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .admin-stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 0, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .admin-stat-card:hover::before {
            left: 100%;
        }

        .admin-stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255, 0, 255, 0.3);
            border-color: #ff00ff;
        }

        .admin-stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff00ff, #8800cc);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            box-shadow: 0 0 20px rgba(255, 0, 255, 0.5);
        }

        .admin-stat-number {
            font-size: 36px;
            font-weight: bold;
            color: #ff00ff;
            text-shadow: 0 0 10px rgba(255, 0, 255, 0.8);
        }

        .admin-stat-label {
            color: #b0b0b0;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .approval-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 0, 255, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            backdrop-filter: blur(10px);
            transition: all 0.3s;
        }

        .approval-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 0, 255, 0.2);
        }

        .approval-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .approval-title {
            color: #ff00ff;
            font-size: 18px;
            font-weight: 600;
        }

        .approval-actions {
            display: flex;
            gap: 10px;
        }

        .btn-approve {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn-approve:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4);
        }

        .btn-reject {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn-reject:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(220, 53, 69, 0.4);
        }

        .approval-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .detail-item {
            display: flex;
            flex-direction: column;
        }

        .detail-label {
            color: #b0b0b0;
            font-size: 12px;
            text-transform: uppercase;
            margin-bottom: 5px;
        }

        .detail-value {
            color: white;
            font-weight: 600;
        }

        .product-preview {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .product-image {
            width: 80px;
            height: 80px;
            border-radius: 10px;
            object-fit: cover;
            border: 1px solid rgba(255, 0, 255, 0.3);
        }

        .product-info {
            flex: 1;
        }

        .product-name {
            color: #ff00ff;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .product-category {
            color: #b0b0b0;
            font-size: 14px;
        }

        .control-panel {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 0, 255, 0.3);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
            margin-bottom: 20px;
        }

        .control-title {
            color: #ff00ff;
            font-size: 20px;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(255, 0, 255, 0.5);
        }

        .control-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .control-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            border: 1px solid rgba(255, 0, 255, 0.2);
        }

        .control-label {
            color: white;
            font-weight: 600;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 25px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .toggle-switch.active {
            background: linear-gradient(135deg, #ff00ff, #8800cc);
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 21px;
            height: 21px;
            background: white;
            border-radius: 50%;
            transition: all 0.3s;
        }

        .toggle-switch.active::after {
            left: 27px;
        }

        .admin-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: linear-gradient(135deg, #ff00ff, #8800cc);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
            box-shadow: 0 0 10px rgba(255, 0, 255, 0.8);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .live-indicator {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 5px 10px;
            background: rgba(40, 167, 69, 0.2);
            border: 1px solid rgba(40, 167, 69, 0.3);
            border-radius: 15px;
            font-size: 12px;
            color: #28a745;
            margin-left: 10px;
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background: #28a745;
            border-radius: 50%;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }

        /* Admin Icon in Header */
        .admin-icon {
            position: relative;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.3s;
            display: none;
        }

        .admin-icon:hover {
            background: rgba(255, 0, 255, 0.1);
            transform: scale(1.1);
        }

        .admin-icon i {
            color: #ff00ff;
            font-size: 20px;
        }

        .admin-icon.show {
            display: block;
        }

        .users-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .user-item {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 0, 255, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-info {
            flex: 1;
        }

        .user-name {
            color: #ff00ff;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .user-email {
            color: #b0b0b0;
            font-size: 14px;
        }

        .user-role {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .role-admin {
            background: rgba(255, 0, 255, 0.2);
            color: #ff00ff;
            border: 1px solid rgba(255, 0, 255, 0.3);
        }

        .role-seller {
            background: rgba(0, 255, 255, 0.2);
            color: #00ffff;
            border: 1px solid rgba(0, 255, 255, 0.3);
        }

        .role-user {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .user-actions {
            display: flex;
            gap: 8px;
        }

        .btn-suspend {
            background: linear-gradient(135deg, #ffc107, #ff9800);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            font-size: 12px;
            transition: all 0.3s;
        }

        .btn-suspend:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 10px rgba(255, 193, 7, 0.4);
        }

        .btn-delete {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            font-size: 12px;
            transition: all 0.3s;
        }

        .btn-delete:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 10px rgba(220, 53, 69, 0.4);
        }

        /* Role Selector Styles */
        .role-selector {
            display: flex;
            gap: 15px;
            margin-top: 8px;
        }

        .role-option {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.05);
            position: relative;
            overflow: hidden;
        }

        .role-option:hover {
            border-color: rgba(0, 255, 255, 0.5);
            background: rgba(0, 255, 255, 0.1);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.2);
        }

        .role-option input[type="radio"] {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }

        .role-option input[type="radio"]:checked + .role-label {
            color: #00ffff;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.8);
        }

        .role-option input[type="radio"]:checked ~ .role-option {
            border-color: #00ffff;
            background: rgba(0, 255, 255, 0.2);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.4);
        }

        .role-option input[type="radio"]:checked + .role-label::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.1), rgba(255, 0, 255, 0.1));
            animation: glow 2s ease-in-out infinite alternate;
        }

        .role-label {
            font-weight: 600;
            color: #ffffff;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 14px;
        }

        .role-option input[type="radio"]:checked + .role-label {
            color: #00ffff;
        }

        .role-option:has(input[type="radio"]:checked) {
            border-color: #00ffff;
            background: rgba(0, 255, 255, 0.2);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.4);
        }

        @keyframes glow {
            from {
                box-shadow: 0 0 5px rgba(0, 255, 255, 0.4);
            }
            to {
                box-shadow: 0 0 20px rgba(0, 255, 255, 0.8);
            }
        }

        /* Form Help Text Styles */
        .form-help-text {
            display: block;
            margin-top: 8px;
            color: #b0b0b0;
            font-size: 12px;
            font-style: italic;
            line-height: 1.4;
        }

        /* Mobile Responsive Ocean Effects */
        @media (max-width: 768px) {
            .top-header {
                padding: 8px 0;
            }
            
            .bio-particle {
                width: 2px !important;
                height: 2px !important;
            }
            
            .top-header .user-actions a {
                padding: 3px 6px;
                font-size: 12px;
                margin-left: 8px;
            }
            
            .top-header .contact-info span {
                font-size: 11px;
                padding: 3px 6px;
                margin-right: 10px;
            }
            
            /* Reduce animation intensity on mobile for performance */
            .ocean-currents {
                animation-duration: 20s !important;
            }
            
            .ocean-reflections {
                animation-duration: 10s !important;
            }
            
            @keyframes waveFlow {
                0% {
                    transform: translateX(0) translateY(0);
                }
                100% {
                    transform: translateX(-50%) translateY(0);
                }
            }
            
            @keyframes waveFlow2 {
                0% {
                    transform: translateX(0) translateY(0);
                }
                100% {
                    transform: translateX(-50%) translateY(0);
                }
            }
        }

        /* High Performance Mode for older devices */
        @media (prefers-reduced-motion: reduce) {
            .ocean-waves,
            .ocean-currents,
            .ocean-reflections,
            .bio-particle {
                animation: none !important;
            }
            
            .top-header::before {
                animation: none !important;
            }
        }

        /* User Info Styles */
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
            color: white;
            font-weight: 600;
        }

        .user-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00ffff, #ff00ff);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 16px;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
            text-transform: uppercase;
        }

        .user-info span {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .user-info span:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .user-info a {
            color: #ff4444;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            background: rgba(255, 68, 68, 0.1);
            border-radius: 25px;
            border: 1px solid rgba(255, 68, 68, 0.3);
            transition: all 0.3s ease;
        }

        .user-info a:hover {
            background: rgba(255, 68, 68, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 68, 68, 0.3);
        }

        /* Dynamic Seller Tools Styles */
        .dynamic-seller-tool {
            display: flex;
            gap: 15px;
            align-items: center;
            padding: 0 10px;
            border-left: 1px solid rgba(0, 255, 255, 0.2);
            margin-left: 10px;
        }

        .seller-tool-link {
            color: #00ffff;
            text-decoration: none;
            font-size: 14px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 5px 10px;
            border-radius: 5px;
        }

        .seller-tool-link:hover {
            background: rgba(0, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .seller-tool-link.upload-btn {
            background: linear-gradient(135deg, #00ff88, #00cc66);
            color: #003322;
            font-weight: bold;
        }

        .seller-tool-link.upload-btn:hover {
            background: linear-gradient(135deg, #00ffaa, #00ff88);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 255, 136, 0.3);
        }

        .dynamic-seller-commerce {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .dynamic-seller-commerce:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 255, 255, 0.4);
        }

        .seller-badge {
            background: #00ffff !important;
            color: #000 !important;
            font-weight: bold;
        }

        /* Seller Dashboard Panel on Homepage */
        .dynamic-seller-panel {
            background: rgba(0, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 20px;
            margin: 30px 0;
            padding: 30px;
            animation: slideInUp 0.6s ease-out;
        }

        .seller-panel-content h3 {
            color: #00ffff;
            font-size: 24px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .seller-stats-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .stat-item {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(0, 255, 255, 0.1);
        }

        .stat-number {
            display: block;
            font-size: 28px;
            font-weight: bold;
            color: #00ffff;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .seller-quick-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .seller-action-btn {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            color: #00ffff;
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .seller-action-btn:hover {
            background: rgba(0, 255, 255, 0.2);
            border-color: #00ffff;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 255, 255, 0.3);
        }

        /* Seller Account Panel Overlay */
        .seller-account-panel-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 10000;
            display: flex;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease-out;
        }

        .seller-account-panel {
            background: linear-gradient(135deg, #0a4f3a 0%, #0d6b4f 50%, #0a4f3a 100%);
            border: 2px solid rgba(0, 255, 255, 0.3);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 255, 255, 0.3);
            animation: slideInUp 0.4s ease-out;
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(0, 255, 255, 0.2);
        }

        .panel-header h2 {
            color: #00ffff;
            font-size: 28px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .close-panel-btn {
            background: rgba(255, 68, 68, 0.2);
            border: 1px solid rgba(255, 68, 68, 0.3);
            color: #ff4444;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-panel-btn:hover {
            background: rgba(255, 68, 68, 0.3);
            border-color: #ff4444;
            transform: scale(1.1);
        }

        .account-overview {
            text-align: center;
            margin-bottom: 30px;
        }

        .account-info h3 {
            color: #ffffff;
            font-size: 24px;
            margin-bottom: 10px;
        }

        .account-info p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 16px;
            margin-bottom: 15px;
        }

        .account-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .account-actions button {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            color: #00ffff;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
        }

        .account-actions button:hover {
            background: rgba(0, 255, 255, 0.2);
            border-color: #00ffff;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 255, 255, 0.3);
        }

        /* Animations */
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .dynamic-seller-tool {
                flex-direction: column;
                gap: 10px;
                padding: 10px 0;
            }

            .seller-tool-link {
                font-size: 12px;
                padding: 8px 12px;
            }

            .seller-stats-summary {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .seller-quick-actions {
                flex-direction: column;
            }

            .seller-action-btn {
                width: 100%;
                justify-content: center;
            }

            .account-actions {
                grid-template-columns: 1fr;
            }

            .seller-account-panel {
                padding: 20px;
                margin: 20px;
            }
        }

        /* Unified Seller Homepage Styles */
        .unified-seller-homepage {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #ffffff;
        }

        .seller-homepage-header {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0, 255, 255, 0.2);
            padding: 15px 0;
        }

        .homepage-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
        }

        .back-btn, .dashboard-btn {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            color: #00ffff;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .back-btn:hover, .dashboard-btn:hover {
            background: rgba(0, 255, 255, 0.2);
            border-color: #00ffff;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 255, 255, 0.3);
        }

        .homepage-logo .logo-text {
            font-size: 24px;
            font-weight: bold;
            color: #00ffff;
        }

        .seller-homepage-content {
            padding: 40px 0;
        }

        .seller-profile-section {
            text-align: center;
            margin-bottom: 50px;
        }

        .profile-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00ffff, #0088cc);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid rgba(0, 255, 255, 0.5);
            box-shadow: 0 8px 32px rgba(0, 255, 255, 0.3);
        }

        .profile-info h1 {
            font-size: 36px;
            margin-bottom: 10px;
            color: #00ffff;
        }

        .profile-info p {
            font-size: 18px;
            margin-bottom: 15px;
            opacity: 0.8;
        }

        .status-badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .status-badge.approved {
            background: linear-gradient(135deg, #00ff88, #00cc66);
            color: #003322;
        }

        .status-badge.pending {
            background: linear-gradient(135deg, #ffaa00, #ff8800);
            color: #332200;
        }

        .status-badge.rejected {
            background: linear-gradient(135deg, #ff4444, #cc0000);
            color: #330000;
        }

        .seller-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 25px;
            margin-bottom: 50px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 24px rgba(0, 255, 255, 0.2);
            border-color: #00ffff;
        }

        .stat-card i {
            font-size: 36px;
            color: #00ffff;
            margin-bottom: 15px;
        }

        .stat-card h3 {
            font-size: 28px;
            margin-bottom: 10px;
            color: #ffffff;
        }

        .stat-card p {
            font-size: 14px;
            opacity: 0.7;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .seller-actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 50px;
        }

        .action-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .action-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 24px rgba(0, 255, 255, 0.3);
            border-color: #00ffff;
            background: rgba(0, 255, 255, 0.1);
        }

        .action-card i {
            font-size: 42px;
            color: #00ffff;
            margin-bottom: 20px;
        }

        .action-card h3 {
            font-size: 20px;
            margin-bottom: 10px;
            color: #ffffff;
        }

        .action-card p {
            font-size: 14px;
            opacity: 0.7;
            line-height: 1.4;
        }

        .seller-notifications-section {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 15px;
            padding: 30px;
        }

        .seller-notifications-section h2 {
            color: #00ffff;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .notifications-list {
            max-height: 400px;
            overflow-y: auto;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .homepage-nav {
                flex-direction: column;
                gap: 15px;
            }

            .profile-header {
                flex-direction: column;
                text-align: center;
            }

            .seller-stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 15px;
            }

            .seller-actions-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .profile-info h1 {
                font-size: 28px;
            }

            .homepage-logo .logo-text {
                font-size: 20px;
            }
        }

        /* Seller Homepage Styles */
        .seller-homepage {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #2a2a2a 100%);
            z-index: 10000;
            display: none;
            overflow-y: auto;
        }

        .homepage-header {
            background: rgba(0, 0, 0, 0.9);
            border-bottom: 2px solid rgba(0, 255, 255, 0.3);
            padding: 15px 30px;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0, 255, 255, 0.2);
            position: sticky;
            top: 0;
            z-index: 10001;
        }

        .homepage-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .homepage-logo .logo-text {
            font-size: 24px;
            font-weight: bold;
            color: #00ffff;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.8);
        }

        .homepage-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .btn-back-to-dashboard {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            color: #00ffff;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .btn-back-to-dashboard:hover {
            background: rgba(0, 255, 255, 0.2);
            border-color: rgba(0, 255, 255, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 255, 255, 0.3);
            color: #ffffff;
        }

        .homepage-content {
            padding: 40px 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .seller-profile-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 40px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 255, 255, 0.2);
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 30px;
        }

        .profile-avatar {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #00ffff, #0088cc);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: white;
            box-shadow: 0 8px 32px rgba(0, 255, 255, 0.4);
            position: relative;
            overflow: hidden;
        }

        .profile-avatar::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transform: rotate(45deg);
            animation: shimmer 3s infinite;
        }

        .profile-info h1 {
            font-size: 36px;
            font-weight: bold;
            color: #00ffff;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.8);
        }

        .business-name {
            font-size: 18px;
            color: #b0b0b0;
            margin-bottom: 15px;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid rgba(0, 255, 0, 0.3);
            color: #00ff00;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .status-badge.pending {
            background: rgba(255, 165, 0, 0.1);
            border-color: rgba(255, 165, 0, 0.3);
            color: #ffa500;
        }

        .status-badge.rejected {
            background: rgba(255, 0, 0, 0.1);
            border-color: rgba(255, 0, 0, 0.3);
            color: #ff0000;
        }

        .quick-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 15px;
            padding: 25px;
            display: flex;
            align-items: center;
            gap: 20px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 255, 255, 0.3);
            border-color: rgba(0, 255, 255, 0.5);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #00ffff, #0088cc);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            box-shadow: 0 4px 20px rgba(0, 255, 255, 0.4);
        }

        .stat-info h3 {
            font-size: 28px;
            font-weight: bold;
            color: #00ffff;
            margin-bottom: 5px;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.8);
        }

        .stat-info p {
            color: #b0b0b0;
            font-size: 14px;
        }

        .quick-actions h2 {
            font-size: 28px;
            font-weight: bold;
            color: #00ffff;
            margin-bottom: 25px;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.8);
        }

        .action-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .action-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            text-decoration: none;
            color: inherit;
        }

        .action-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 255, 255, 0.3);
            border-color: rgba(0, 255, 255, 0.5);
            background: rgba(0, 255, 255, 0.1);
        }

        .action-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #00ffff, #0088cc);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            color: white;
            margin: 0 auto 20px;
            box-shadow: 0 8px 30px rgba(0, 255, 255, 0.4);
        }

        .action-card h3 {
            font-size: 20px;
            font-weight: bold;
            color: #00ffff;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.8);
        }

        .action-card p {
            color: #b0b0b0;
            font-size: 14px;
            line-height: 1.4;
        }

        .notifications-section h2 {
            font-size: 28px;
            font-weight: bold;
            color: #00ffff;
            margin-bottom: 25px;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.8);
        }

        .notifications-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .notification-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 15px;
            padding: 25px;
            display: flex;
            gap: 20px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .notification-item:hover {
            border-color: rgba(0, 255, 255, 0.5);
            background: rgba(0, 255, 255, 0.05);
        }

        .notification-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #00ffff, #0088cc);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
            flex-shrink: 0;
            box-shadow: 0 4px 20px rgba(0, 255, 255, 0.4);
        }

        .notification-content h4 {
            font-size: 18px;
            font-weight: bold;
            color: #00ffff;
            margin-bottom: 8px;
        }

        .notification-content p {
            color: #b0b0b0;
            font-size: 14px;
            line-height: 1.4;
            margin-bottom: 8px;
        }

        .notification-time {
            color: #888;
            font-size: 12px;
        }

        @keyframes shimmer {
            0% {
                transform: rotate(45deg) translateY(-100%);
            }
            100% {
                transform: rotate(45deg) translateY(100%);
            }
        }

        @media (max-width: 768px) {
            .profile-header {
                flex-direction: column;
                text-align: center;
                gap: 20px;
            }

            .quick-stats {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }

            .action-grid {
                grid-template-columns: 1fr;
            }

            .homepage-content {
                padding: 20px 15px;
            }
        }

        /* ============================================
           NYUMBASURE STYLES - COMPLETELY ISOLATED
           ============================================ */
        
        /* NyumbaSure Icon Container - Enhanced with Futuristic Effects */
        .nyumbasure-icon-container {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 25;
            opacity: 0;
            transform: scale(0.9);
            animation: nyumbasureFadeIn 1s ease-out 2s forwards;
        }

        .nyumbasure-icon-link {
            display: block;
            text-decoration: none;
            transition: all 0.3s ease;
            position: relative;
        }

        .nyumbasure-icon-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(0, 100, 200, 0.3);
            border-radius: 15px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        /* Futuristic Holographic Glow Effect */
        .nyumbasure-icon-wrapper::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, 
                transparent 30%, 
                rgba(0, 255, 255, 0.8) 50%, 
                transparent 70%),
                linear-gradient(-45deg, 
                transparent 30%, 
                rgba(255, 0, 255, 0.8) 50%, 
                transparent 70%);
            background-size: 200% 200%;
            border-radius: 15px;
            opacity: 0;
            z-index: -1;
            transition: opacity 0.3s ease;
            animation: holographicRotate 3s linear infinite;
        }

        .nyumbasure-icon-wrapper:hover::before {
            opacity: 1;
        }

        @keyframes holographicRotate {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Enhanced Hover Effects */
        .nyumbasure-icon-wrapper:hover {
            background: rgba(0, 100, 200, 0.15);
            border-color: rgba(0, 255, 255, 0.6);
            transform: scale(1.1) rotateY(5deg) rotateX(5deg);
            box-shadow: 
                0 8px 25px rgba(0, 100, 200, 0.4),
                0 0 30px rgba(0, 255, 255, 0.3),
                inset 0 0 20px rgba(0, 255, 255, 0.1);
        }

        /* 3D Transform Effect */
        .nyumbasure-icon-wrapper:active {
            transform: scale(1.05) rotateY(-2deg) rotateX(-2deg);
            transition: all 0.1s ease;
        }

        /* Icon Enhancement with Glow */
        .nyumbasure-icon {
            font-size: 32px;
            display: block;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
            transition: all 0.3s ease;
            position: relative;
        }

        .nyumbasure-icon-wrapper:hover .nyumbasure-icon {
            transform: scale(1.2);
            filter: 
                drop-shadow(0 0 10px rgba(0, 255, 255, 0.8))
                drop-shadow(0 0 20px rgba(0, 100, 200, 0.6))
                drop-shadow(0 4px 8px rgba(0, 0, 0, 0.4));
            animation: iconPulse 2s ease-in-out infinite;
        }

        @keyframes iconPulse {
            0%, 100% { transform: scale(1.2); }
            50% { transform: scale(1.3); }
        }

        /* Text Enhancement */
        .nyumbasure-text {
            font-size: 12px;
            font-weight: 600;
            color: #0064c8;
            text-align: center;
            white-space: nowrap;
            transition: all 0.3s ease;
            position: relative;
        }

        .nyumbasure-icon-wrapper:hover .nyumbasure-text {
            color: #00ffff;
            font-weight: 700;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.8);
            transform: translateY(-2px);
        }

        /* Particle Trail Effects */
        .nyumbasure-icon-wrapper::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: radial-gradient(circle, rgba(0, 255, 255, 0.6) 0%, transparent 70%);
            border-radius: 50%;
            opacity: 0;
            transition: all 0.5s ease;
            transform: translate(-50%, -50%);
        }

        .nyumbasure-icon-wrapper:hover::after {
            width: 100px;
            height: 100px;
            opacity: 0.3;
            animation: particleExpand 1s ease-out infinite;
        }

        @keyframes particleExpand {
            0% { 
                width: 0; 
                height: 0; 
                opacity: 0.6; 
            }
            100% { 
                width: 150px; 
                height: 150px; 
                opacity: 0; 
            }
        }

        /* Floating Particles Around Icon */
        .nyumbasure-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(0, 255, 255, 0.8);
            border-radius: 50%;
            pointer-events: none;
            opacity: 0;
        }

        .nyumbasure-icon-wrapper:hover .nyumbasure-particle {
            opacity: 1;
            animation: particleFloat 3s ease-in-out infinite;
        }

        @keyframes particleFloat {
            0% { 
                transform: translate(0, 0) scale(0); 
                opacity: 0; 
            }
            20% { 
                transform: translate(var(--tx1), var(--ty1)) scale(1); 
                opacity: 1; 
            }
            80% { 
                transform: translate(var(--tx2), var(--ty2)) scale(1); 
                opacity: 1; 
            }
            100% { 
                transform: translate(var(--tx3), var(--ty3)) scale(0); 
                opacity: 0; 
            }
        }

        /* Futuristic Tooltip */
        .nyumbasure-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(-10px);
            background: linear-gradient(135deg, 
                rgba(0, 100, 200, 0.95) 0%, 
                rgba(0, 50, 150, 0.95) 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 12px;
            font-size: 13px;
            font-weight: 600;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 255, 255, 0.3);
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.3),
                0 0 20px rgba(0, 255, 255, 0.2);
            z-index: 1000;
            pointer-events: none;
        }

        .nyumbasure-tooltip::before {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 8px solid transparent;
            border-top-color: rgba(0, 100, 200, 0.95);
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
        }

        .nyumbasure-icon-wrapper:hover .nyumbasure-tooltip {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(-15px);
        }

        /* Scanning Animation */
        .nyumbasure-scan-line {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(0, 255, 255, 0.8) 50%, 
                transparent 100%);
            opacity: 0;
            transform: scaleX(0);
            transform-origin: left;
            transition: all 0.3s ease;
        }

        .nyumbasure-icon-wrapper:hover .nyumbasure-scan-line {
            opacity: 1;
            animation: scanning 2s ease-in-out infinite;
        }

        @keyframes scanning {
            0% { 
                transform: scaleX(0); 
                left: 0%; 
            }
            50% { 
                transform: scaleX(1); 
                left: 0%; 
            }
            51% { 
                transform: scaleX(1); 
                left: 100%; 
            }
            100% { 
                transform: scaleX(0); 
                left: 100%; 
            }
        }

        /* Energy Field Effect */
        .nyumbasure-energy-field {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 60px;
            height: 60px;
            border: 2px solid rgba(0, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .nyumbasure-icon-wrapper:hover .nyumbasure-energy-field {
            opacity: 1;
            animation: energyPulse 2s ease-in-out infinite;
        }

        @keyframes energyPulse {
            0%, 100% { 
                transform: translate(-50%, -50%) scale(1); 
                opacity: 0.3; 
            }
            50% { 
                transform: translate(-50%, -50%) scale(1.3); 
                opacity: 0.1; 
            }
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .nyumbasure-icon-container {
                top: 10px;
                right: 10px;
            }
            
            .nyumbasure-icon-wrapper {
                padding: 12px;
            }
            
            .nyumbasure-icon {
                font-size: 28px;
            }
            
            .nyumbasure-text {
                font-size: 11px;
            }
            
            .nyumbasure-tooltip {
                font-size: 12px;
                padding: 10px 16px;
            }
        }

        @media (max-width: 480px) {
            .nyumbasure-icon-container {
                top: 8px;
                right: 8px;
            }
            
            .nyumbasure-icon-wrapper {
                padding: 10px;
            }
            
            .nyumbasure-icon {
                font-size: 24px;
            }
            
            .nyumbasure-text {
                font-size: 10px;
            }
        }

        @keyframes nyumbasureFadeIn {
            to {
                opacity: 1;
                transform: scale(1.05);
            }
        }

        /* NyumbaSure Homepage Styles - Completely Isolated */
        .nyumbasure-homepage {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            z-index: 10000;
            overflow-y: auto;
        }

        .nyumbasure-homepage.active {
            display: block;
        }

        .nyumbasure-hero {
            background: linear-gradient(135deg, #0064c8 0%, #004494 100%);
            padding: 80px 20px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .nyumbasure-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="nyumbasure-grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23nyumbasure-grid)"/></svg>');
            opacity: 0.3;
        }

        .nyumbasure-hero-content {
            position: relative;
            z-index: 2;
            max-width: 800px;
            margin: 0 auto;
        }

        .nyumbasure-hero h1 {
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 700;
            margin-bottom: 20px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .nyumbasure-hero p {
            font-size: clamp(1.1rem, 2vw, 1.4rem);
            margin-bottom: 30px;
            opacity: 0.9;
            line-height: 1.6;
        }

        .nyumbasure-cta-button {
            display: inline-block;
            padding: 15px 40px;
            background: white;
            color: #0064c8;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .nyumbasure-cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .nyumbasure-features {
            padding: 80px 20px;
            background: white;
        }

        .nyumbasure-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .nyumbasure-section-title {
            text-align: center;
            font-size: 2.5rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 50px;
        }

        .nyumbasure-features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }

        .nyumbasure-feature-card {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid #e9ecef;
        }

        .nyumbasure-feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border-color: #0064c8;
        }

        .nyumbasure-feature-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            display: block;
        }

        .nyumbasure-feature-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
        }

        .nyumbasure-feature-description {
            color: #666;
            line-height: 1.6;
        }

        .nyumbasure-search-section {
            background: #f8f9fa;
            padding: 60px 20px;
        }

        .nyumbasure-search-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .nyumbasure-search-form {
            display: grid;
            grid-template-columns: 1fr auto auto;
            gap: 15px;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .nyumbasure-search-input {
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }

        .nyumbasure-search-select {
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            background: white;
        }

        .nyumbasure-search-button {
            padding: 15px 30px;
            background: #0064c8;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nyumbasure-search-button:hover {
            background: #004494;
        }

        .nyumbasure-listings {
            padding: 60px 20px;
            background: white;
        }

        .nyumbasure-listings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .nyumbasure-listing-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 1px solid #e9ecef;
        }

        .nyumbasure-listing-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }

        .nyumbasure-listing-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .nyumbasure-listing-content {
            padding: 20px;
        }

        .nyumbasure-listing-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: #0064c8;
            margin-bottom: 10px;
        }

        .nyumbasure-listing-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }

        .nyumbasure-listing-location {
            color: #666;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .nyumbasure-listing-verified {
            display: inline-block;
            background: #28a745;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .nyumbasure-how-it-works {
            padding: 80px 20px;
            background: #f8f9fa;
        }

        .nyumbasure-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-top: 50px;
        }

        .nyumbasure-step {
            text-align: center;
            position: relative;
        }

        .nyumbasure-step-number {
            width: 60px;
            height: 60px;
            background: #0064c8;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0 auto 20px;
        }

        .nyumbasure-step-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
        }

        .nyumbasure-step-description {
            color: #666;
            line-height: 1.6;
        }

        .nyumbasure-pricing {
            padding: 80px 20px;
            background: white;
        }

        .nyumbasure-pricing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 50px;
        }

        .nyumbasure-pricing-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 40px 30px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .nyumbasure-pricing-card.featured {
            border-color: #0064c8;
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0, 100, 200, 0.2);
        }

        .nyumbasure-pricing-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
        }

        .nyumbasure-pricing-card.featured:hover {
            transform: scale(1.05) translateY(-5px);
        }

        .nyumbasure-price {
            font-size: 3rem;
            font-weight: 700;
            color: #0064c8;
            margin-bottom: 10px;
        }

        .nyumbasure-price-period {
            color: #666;
            font-size: 1rem;
            margin-bottom: 30px;
        }

        .nyumbasure-pricing-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
        }

        .nyumbasure-pricing-features {
            list-style: none;
            margin-bottom: 30px;
        }

        .nyumbasure-pricing-features li {
            padding: 10px 0;
            border-bottom: 1px solid #f8f9fa;
            color: #666;
        }

        .nyumbasure-pricing-button {
            display: inline-block;
            padding: 15px 30px;
            background: #0064c8;
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 100%;
        }

        .nyumbasure-pricing-button:hover {
            background: #004494;
            transform: translateY(-2px);
        }

        .nyumbasure-navigation {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10001;
            display: flex;
            gap: 10px;
        }

        .nyumbasure-nav-button {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            color: #0064c8;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .nyumbasure-nav-button:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        /* NyumbaSure Dashboard Styles - Completely Isolated */
        .nyumbasure-dashboard {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: #f8f9fa;
            z-index: 10000;
            overflow-y: auto;
        }

        .nyumbasure-dashboard.active {
            display: block;
        }

        .nyumbasure-dashboard-header {
            background: linear-gradient(135deg, #0064c8 0%, #004494 100%);
            color: white;
            padding: 20px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .nyumbasure-dashboard-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .nyumbasure-dashboard-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .nyumbasure-dashboard-menu {
            display: flex;
            gap: 20px;
        }

        .nyumbasure-dashboard-menu a {
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .nyumbasure-dashboard-menu a:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .nyumbasure-dashboard-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .nyumbasure-dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .nyumbasure-dashboard-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .nyumbasure-dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }

        .nyumbasure-dashboard-card h3 {
            color: #0064c8;
            margin-bottom: 20px;
            font-size: 1.3rem;
        }

        .nyumbasure-dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .nyumbasure-stat-card {
            background: linear-gradient(135deg, #0064c8 0%, #004494 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
        }

        .nyumbasure-stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .nyumbasure-stat-label {
            opacity: 0.9;
            font-size: 1rem;
        }

        .nyumbasure-upload-form {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 40px;
        }

        .nyumbasure-form-group {
            margin-bottom: 20px;
        }

        .nyumbasure-form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .nyumbasure-form-group input,
        .nyumbasure-form-group select,
        .nyumbasure-form-group textarea {
            width: 100%;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }

        .nyumbasure-form-group textarea {
            resize: vertical;
            min-height: 120px;
        }

        .nyumbasure-form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .nyumbasure-submit-button {
            background: #0064c8;
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nyumbasure-submit-button:hover {
            background: #004494;
            transform: translateY(-2px);
        }

        .nyumbasure-listings-table {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .nyumbasure-table {
            width: 100%;
            border-collapse: collapse;
        }

        .nyumbasure-table th {
            background: #0064c8;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        .nyumbasure-table td {
            padding: 15px;
            border-bottom: 1px solid #f8f9fa;
        }

        .nyumbasure-table tr:hover {
            background: #f8f9fa;
        }

        .nyumbasure-status-badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .nyumbasure-status-verified {
            background: #28a745;
            color: white;
        }

        .nyumbasure-status-pending {
            background: #ffc107;
            color: #333;
        }

        .nyumbasure-status-rejected {
            background: #dc3545;
            color: white;
        }

        /* Responsive Design for NyumbaSure */
        @media (max-width: 768px) {
            .nyumbasure-icon-container {
                position: absolute;
                top: 10px;
                right: 10px;
                transform: scale(0.8);
                opacity: 1;
                animation: none;
            }

            .nyumbasure-search-form {
                grid-template-columns: 1fr;
            }

            .nyumbasure-form-row {
                grid-template-columns: 1fr;
            }

            .nyumbasure-dashboard-menu {
                flex-direction: column;
                gap: 10px;
            }

            .nyumbasure-dashboard-nav {
                flex-direction: column;
                gap: 20px;
            }

            .nyumbasure-navigation {
                position: static;
                justify-content: center;
                padding: 20px;
                background: rgba(255, 255, 255, 0.9);
                border-radius: 15px;
                margin: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Top Header -->
    <div class="top-header">
        <!-- Ocean Wave Effects -->
        <div class="ocean-waves"></div>
        <div class="ocean-currents"></div>
        <div class="ocean-reflections"></div>
        <div class="bio-particles" id="bioParticles"></div>
        
        <div class="container">
            <div class="contact-info">
                <span><i class="fas fa-phone"></i> <a href="https://wa.me/254705424364" target="_blank" aria-label="Chat with us on WhatsApp" style="color: inherit; text-decoration: none; transition: all 0.3s ease;">0705424364</a></span>
                <span><i class="fas fa-envelope"></i> <a href="mailto:ecoloopke@gmail.com">ecoloopke@gmail.com</a></span>
            </div>
            <div class="user-actions" id="userActions">
                <a href="#" onclick="showLoginModal(); return false;"><i class="fas fa-user"></i> Login</a>
                <a href="#" onclick="showRegisterModal(); return false;"><i class="fas fa-user-plus"></i> Register</a>
                <!-- Dynamic seller tools will be inserted here -->
                <a href="#" onclick="showSellerRegisterModal(); return false;" id="sellerRegisterLink"><i class="fas fa-store"></i> Sell</a>
                <a href="#" onclick="showToast('Help section coming soon!', 'info'); return false;"><i class="fas fa-question-circle"></i> Help</a>
                <a href="admin/admin-login.html"><i class="fas fa-leaf"></i> Admin</a>
            </div>
        </div>
    </div>

    <!-- Main Header -->
    <header class="main-header">
        <div class="container">
            <div class="header-content">
                <a href="#" class="logo"> EcoLoop Kenya</a>
                <div class="search-bar">
                    <input type="text" class="search-input" id="searchInput" placeholder="Search for products...">
                </div>
                <div class="header-actions">
                    <div class="commerce-icons">
                        <div class="icon-wrapper" onclick="toggleWishlist()">
                            <i class="fas fa-heart"></i>
                            <span class="badge wishlist-badge" id="wishlistBadge">0</span>
                        </div>
                        <div class="icon-wrapper" onclick="toggleCart()">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="badge cart-badge" id="cartBadge">0</span>
                        </div>
                        <!-- Dynamic seller icons will be inserted here -->
                    </div>
                    <a href="#" class="btn" id="startSellingBtn" onclick="showSellerRegisterModal(); return false;">Start Selling</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <!-- Futuristic Side Backgrounds -->
        <div class="futuristic-background-left">
            <div class="holographic-streams"></div>
            <div class="neon-particle-waves"></div>
            <div class="cybernetic-grid"></div>
            <div class="light-streaks"></div>
            <canvas id="leftBackgroundCanvas" aria-hidden="true"></canvas>
        </div>
        <div class="futuristic-background-right">
            <div class="holographic-streams"></div>
            <div class="neon-particle-waves"></div>
            <div class="cybernetic-grid"></div>
            <div class="light-streaks"></div>
            <canvas id="rightBackgroundCanvas" aria-hidden="true"></canvas>
        </div>
        
        <div class="container">
            <div class="welcome-panel">
                <!-- Animated Background Elements - Now contained within panel -->
                <div class="panel-background">
                    <div class="panel-particles-container"></div>
                    <div class="panel-energy-waves"></div>
                    <div class="panel-holographic-overlay"></div>
                    <div class="panel-neon-grid"></div>
                </div>
                <canvas id="ecoloopProductLayer" aria-hidden="true"></canvas>
                <div class="panel-glow"></div>
                <h1 class="welcome-title">Welcome to EcoLoop Kenya</h1>
                <p class="welcome-subtitle">Your sustainable marketplace for eco-friendly products and services</p>
                <a href="#products" class="futuristic-btn">
                    <span class="btn-text">Start Shopping</span>
                    <div class="btn-glow"></div>
                </a>
            </div>
        </div>
        
        <!-- NyumbaSure Icon - Enhanced with Futuristic Effects -->
        <div class="nyumbasure-icon-container">
            <a href="#nyumba" class="nyumbasure-icon-link" onclick="showNyumbaSure(); return false;" title="NyumbaSure - Verified Affordable Housing">
                <div class="nyumbasure-icon-wrapper">
                    <!-- Holographic Glow Effects -->
                    <div class="nyumbasure-energy-field"></div>
                    <div class="nyumbasure-scan-line"></div>
                    
                    <!-- Floating Particles -->
                    <div class="nyumbasure-particle" style="--tx1: -20px; --ty1: -20px; --tx2: 20px; --ty2: -30px; --tx3: 40px; --ty3: 20px;"></div>
                    <div class="nyumbasure-particle" style="--tx1: 15px; --ty1: -25px; --tx2: -15px; --ty2: -15px; --tx3: -25px; --ty3: 25px;"></div>
                    <div class="nyumbasure-particle" style="--tx1: -18px; --ty1: 18px; --tx2: 22px; --ty2: 12px; --tx3: 18px; --ty3: -22px;"></div>
                    <div class="nyumbasure-particle" style="--tx1: 25px; --ty1: 15px; --tx2: -20px; --ty2: 25px; --tx3: -30px; --ty3: -15px;"></div>
                    <div class="nyumbasure-particle" style="--tx1: -22px; --ty1: -12px; --tx2: 18px; --ty2: -22px; --tx3: 12px; --ty3: 28px;"></div>
                    
                    <!-- Icon and Text -->
                    <span class="nyumbasure-icon"></span>
                    <span class="nyumbasure-text">NyumbaSure</span>
                    
                    <!-- Futuristic Tooltip -->
                    <div class="nyumbasure-tooltip">
                        NyumbaSure  Verified Affordable Housing Platform
                    </div>
                </div>
            </a>
        </div>
    </section>

    <!-- Categories Section -->
    <section class="categories" id="categories">
        <div class="container">
            <h2 class="section-title">Shop by Category</h2>
            <div class="categories-grid" id="categoriesGrid">
                <!-- Categories will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section class="products" id="products">
        <div class="container">
            <h2 class="section-title">Featured Products</h2>
            <div class="products-grid" id="productsGrid">
                <!-- Products will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <!-- Kenyan Flag Creative Background Elements -->
        <div class="kenyan-texture"></div>
        
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>About EcoLoop</h3>
                    <p>We are Kenya's leading sustainable marketplace, connecting eco-conscious buyers with responsible sellers.</p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">How It Works</a></li>
                        <li><a href="#">Sustainability</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Categories</h3>
                    <ul>
                        <li><a href="#">Electronics</a></li>
                        <li><a href="#">Fashion</a></li>
                        <li><a href="#">Home & Kitchen</a></li>
                        <li><a href="#">Sports</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Connect</h3>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 EcoLoop Kenya. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Login</h2>
                <span class="close" onclick="closeModal('loginModal')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="loginForm" onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label for="loginRole">Login as</label>
                        <div class="role-selector">
                            <label class="role-option">
                                <input type="radio" name="loginRole" value="user" checked>
                                <span class="role-label">User</span>
                            </label>
                            <label class="role-option">
                                <input type="radio" name="loginRole" value="seller">
                                <span class="role-label">Seller</span>
                            </label>
                        </div>
                        <small class="form-help-text">
                            <span id="roleHelpText">Login as a regular user to browse and purchase products</span>
                        </small>
                    </div>
                    <div class="form-group">
                        <label for="loginEmail">Email</label>
                        <input type="email" id="loginEmail" required placeholder="Enter your email">
                        <div class="error" id="loginEmailError"></div>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" required placeholder="Enter your password">
                        <div class="error" id="loginPasswordError"></div>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="rememberMe"> Remember me
                        </label>
                    </div>
                    <button type="submit" class="btn-primary" id="loginBtn">
                        <span id="loginBtnText">Login</span>
                    </button>
                </form>
                <div class="form-footer">
                    <p>Don't have an account? <a href="#" onclick="switchModal('loginModal', 'registerModal')">Register</a></p>
                    <p>Want to sell? <a href="#" onclick="switchModal('loginModal', 'sellerRegisterModal')">Register as Seller</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Register</h2>
                <span class="close" onclick="closeModal('registerModal')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="registerForm" onsubmit="handleRegister(event)">
                    <div class="form-group">
                        <label for="registerFirstName">First Name</label>
                        <input type="text" id="registerFirstName" required placeholder="Enter your first name">
                        <div class="error" id="registerFirstNameError"></div>
                    </div>
                    <div class="form-group">
                        <label for="registerLastName">Last Name</label>
                        <input type="text" id="registerLastName" required placeholder="Enter your last name">
                        <div class="error" id="registerLastNameError"></div>
                    </div>
                    <div class="form-group">
                        <label for="registerEmail">Email</label>
                        <input type="email" id="registerEmail" required placeholder="Enter your email">
                        <div class="error" id="registerEmailError"></div>
                    </div>
                    <div class="form-group">
                        <label for="registerPhone">Phone</label>
                        <input type="tel" id="registerPhone" required placeholder="Enter your phone number">
                        <div class="error" id="registerPhoneError"></div>
                    </div>
                    <div class="form-group">
                        <label for="registerPassword">Password</label>
                        <input type="password" id="registerPassword" required placeholder="Enter your password">
                        <div class="error" id="registerPasswordError"></div>
                    </div>
                    <div class="form-group">
                        <label for="registerConfirmPassword">Confirm Password</label>
                        <input type="password" id="registerConfirmPassword" required placeholder="Confirm your password">
                        <div class="error" id="registerConfirmPasswordError"></div>
                    </div>
                    <button type="submit" class="btn-primary" id="registerBtn">
                        <span id="registerBtnText">Register</span>
                    </button>
                </form>
                <div class="form-footer">
                    <p>Already have an account? <a href="#" onclick="switchModal('registerModal', 'loginModal')">Login</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Seller Register Modal -->
    <div id="sellerRegisterModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Register as Seller</h2>
                <span class="close" onclick="closeModal('sellerRegisterModal')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="sellerRegisterForm" onsubmit="handleSellerRegister(event)">
                    <div class="form-group">
                        <label for="sellerFirstName">First Name</label>
                        <input type="text" id="sellerFirstName" required placeholder="Enter your first name">
                        <div class="error" id="sellerFirstNameError"></div>
                    </div>
                    <div class="form-group">
                        <label for="sellerLastName">Last Name</label>
                        <input type="text" id="sellerLastName" required placeholder="Enter your last name">
                        <div class="error" id="sellerLastNameError"></div>
                    </div>
                    <div class="form-group">
                        <label for="sellerEmail">Email</label>
                        <input type="email" id="sellerEmail" required placeholder="Enter your email">
                        <div class="error" id="sellerEmailError"></div>
                    </div>
                    <div class="form-group">
                        <label for="sellerPhone">Phone</label>
                        <input type="tel" id="sellerPhone" required placeholder="Enter your phone number">
                        <div class="error" id="sellerPhoneError"></div>
                    </div>
                    <div class="form-group">
                        <label for="sellerPassword">Password</label>
                        <input type="password" id="sellerPassword" required placeholder="Enter your password">
                        <div class="error" id="sellerPasswordError"></div>
                    </div>
                    <div class="form-group">
                        <label for="sellerConfirmPassword">Confirm Password</label>
                        <input type="password" id="sellerConfirmPassword" required placeholder="Confirm your password">
                        <div class="error" id="sellerConfirmPasswordError"></div>
                    </div>
                    <div class="form-group">
                        <label for="businessName">Business Name</label>
                        <input type="text" id="businessName" required placeholder="Enter your business name">
                        <div class="error" id="businessNameError"></div>
                    </div>
                    <div class="form-group">
                        <label for="businessType">Business Type</label>
                        <select id="businessType" required>
                            <option value="">Select business type</option>
                            <option value="retail">Retail Store</option>
                            <option value="manufacturer">Manufacturer</option>
                            <option value="distributor">Distributor</option>
                            <option value="service">Service Provider</option>
                            <option value="individual">Individual Seller</option>
                        </select>
                        <div class="error" id="businessTypeError"></div>
                    </div>
                    <div class="form-group">
                        <label for="businessDescription">Business Description</label>
                        <textarea id="businessDescription" required placeholder="Describe your business" rows="3"></textarea>
                        <div class="error" id="businessDescriptionError"></div>
                    </div>
                    <div class="form-group">
                        <label for="businessAddress">Business Address</label>
                        <input type="text" id="businessAddress" placeholder="Enter your business address">
                    </div>
                    <div class="form-group">
                        <label for="businessCity">City</label>
                        <input type="text" id="businessCity" placeholder="Enter your city">
                    </div>
                    <div class="form-group">
                        <label for="businessCountry">Country</label>
                        <input type="text" id="businessCountry" placeholder="Enter your country">
                    </div>
                    <button type="submit" class="btn-primary" id="sellerRegisterBtn">
                        <span id="sellerRegisterBtnText">Register as Seller</span>
                    </button>
                </form>
                <div class="form-footer">
                    <p>Already have an account? <a href="#" onclick="switchModal('sellerRegisterModal', 'loginModal')">Login</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Product Details Modal -->
    <div id="productDetailsModal" class="modal">
        <div class="modal-content product-details-modal">
            <div class="modal-header">
                <h2 id="productTitle">Product Details</h2>
                <span class="close" onclick="closeProductDetailsModal()">&times;</span>
            </div>
            <div class="modal-body product-details-body">
                <div class="product-details-grid">
                    <div class="product-image-section">
                        <img id="productImage" src="" alt="" class="product-detail-image">
                        <div class="product-rating">
                            <span id="productRating"></span>
                            <span id="ratingValue">(4.5)</span>
                        </div>
                    </div>
                    <div class="product-info-section">
                        <div class="product-price-section">
                            <h3 id="productPrice">KES 0</h3>
                            <span class="stock-badge" id="stockBadge">In Stock</span>
                        </div>
                        
                        <div class="product-description">
                            <h4>Description</h4>
                            <p id="productDescription">Product description here</p>
                        </div>

                        <div class="product-features">
                            <h4>Key Features</h4>
                            <ul id="productFeatures">
                                <li>Feature 1</li>
                                <li>Feature 2</li>
                            </ul>
                        </div>

                        <div class="product-specifications">
                            <h4>Specifications</h4>
                            <div class="specifications-grid" id="productSpecifications">
                                <div class="spec-item">
                                    <span class="spec-label">Brand:</span>
                                    <span class="spec-value">Brand Name</span>
                                </div>
                            </div>
                        </div>

                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="addToCart()">
                                <i class="fas fa-shopping-cart"></i> Add to Cart
                            </button>
                            <button class="btn btn-success" onclick="buyNow()">
                                <i class="fas fa-bolt"></i> Buy Now
                            </button>
                            <button class="btn btn-wishlist" onclick="addToWishlist()" title="Add to Wishlist">
                                <i class="fas fa-heart"></i> Wishlist
                            </button>
                            <button class="btn btn-secondary" onclick="closeProductDetailsModal()">
                                <i class="fas fa-arrow-left"></i> Back
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cart Sidebar -->
    <div id="cartSidebar" class="cart-sidebar">
        <div class="cart-header">
            <h3><i class="fas fa-shopping-cart"></i> Shopping Cart</h3>
            <span class="close-cart" onclick="toggleCart()">&times;</span>
        </div>
        <div class="cart-content">
            <div class="cart-items" id="cartItems">
                <!-- Cart items will be dynamically added here -->
            </div>
            <div class="cart-empty" id="cartEmpty" style="display: none;">
                <i class="fas fa-shopping-cart"></i>
                <p>Your cart is empty</p>
                <button class="btn" onclick="closeCart()">Continue Shopping</button>
            </div>
            <div class="cart-summary" id="cartSummary" style="display: none;">
                <div class="summary-row">
                    <span>Subtotal:</span>
                    <span id="cartSubtotal">KES 0</span>
                </div>
                <div class="summary-row">
                    <span>Shipping:</span>
                    <span id="cartShipping">KES 0</span>
                </div>
                <div class="summary-row total">
                    <span>Total:</span>
                    <span id="cartTotal">KES 0</span>
                </div>
                <button class="btn btn-primary checkout-btn" onclick="proceedToCheckout()">
                    <i class="fas fa-lock"></i> Proceed to Checkout
                </button>
            </div>
        </div>
    </div>

    <!-- Wishlist Sidebar -->
    <div id="wishlistSidebar" class="wishlist-sidebar">
        <div class="wishlist-header">
            <h3><i class="fas fa-heart"></i> My Wishlist</h3>
            <span class="close-wishlist" onclick="toggleWishlist()">&times;</span>
        </div>
        <div class="wishlist-content">
            <div class="wishlist-items" id="wishlistItems">
                <!-- Wishlist items will be dynamically added here -->
            </div>
            <div class="wishlist-empty" id="wishlistEmpty" style="display: none;">
                <i class="fas fa-heart"></i>
                <p>Your wishlist is empty</p>
                <button class="btn" onclick="closeWishlist()">Continue Shopping</button>
            </div>
        </div>
    </div>

    <!-- Seller Homepage -->
    <div id="sellerHomepage" class="seller-homepage" style="display: none;">
        <div class="homepage-header">
            <div class="homepage-nav">
                <div class="homepage-logo">
                    <span class="logo-text"> EcoLoop Seller</span>
                </div>
                <div class="homepage-actions">
                    <button class="btn-back-to-dashboard" onclick="backToSellerDashboard()">
                        <i class="fas fa-arrow-left"></i> Back to Dashboard
                    </button>
                    <button class="btn-logout" onclick="sellerLogout()">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
        </div>

        <div class="homepage-content">
            <!-- Seller Profile Section -->
            <div class="seller-profile-section">
                <div class="profile-header">
                    <div class="profile-avatar" id="homepageSellerAvatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="profile-info">
                        <h1 id="homepageSellerName">Seller Name</h1>
                        <p class="business-name" id="homepageBusinessName">Business Name</p>
                        <div class="status-badge" id="homepageStatusBadge">
                            <i class="fas fa-check-circle"></i>
                            <span id="homepageStatusText">Approved</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="quick-stats">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-box"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalProductsCount">0</h3>
                        <p>Total Products</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalOrdersCount">0</h3>
                        <p>Total Orders</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalRevenueAmount">KES 0</h3>
                        <p>Total Revenue</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="averageRating">0.0</h3>
                        <p>Average Rating</p>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <h2>Quick Actions</h2>
                <div class="action-grid">
                    <button class="action-card" onclick="goToSellerDashboard()">
                        <div class="action-icon">
                            <i class="fas fa-tachometer-alt"></i>
                        </div>
                        <h3>Dashboard</h3>
                        <p>View detailed analytics and manage your store</p>
                    </button>
                    <button class="action-card" onclick="showDashboardSection('upload')">
                        <div class="action-icon">
                            <i class="fas fa-plus-circle"></i>
                        </div>
                        <h3>Add Product</h3>
                        <p>List a new product for sale</p>
                    </button>
                    <button class="action-card" onclick="showDashboardSection('products')">
                        <div class="action-icon">
                            <i class="fas fa-box-open"></i>
                        </div>
                        <h3>Manage Products</h3>
                        <p>Edit or remove existing products</p>
                    </button>
                    <button class="action-card" onclick="showDashboardSection('account')">
                        <div class="action-icon">
                            <i class="fas fa-user-cog"></i>
                        </div>
                        <h3>Account Settings</h3>
                        <p>Update your business information</p>
                    </button>
                </div>
            </div>

            <!-- Notifications -->
            <div class="notifications-section">
                <h2>Notifications</h2>
                <div class="notifications-list" id="sellerNotifications">
                    <div class="notification-item">
                        <div class="notification-icon">
                            <i class="fas fa-info-circle"></i>
                        </div>
                        <div class="notification-content">
                            <h4>Welcome to EcoLoop Seller Portal!</h4>
                            <p>Your seller account has been successfully set up. Start by adding your first product.</p>
                            <span class="notification-time">Just now</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Seller Dashboard -->
    <div id="sellerDashboard" class="seller-dashboard" style="display: none;">
        <div class="dashboard-header">
            <div class="dashboard-logo">
                <span class="logo-text"> EcoLoop Seller Portal</span>
            </div>
            <div class="dashboard-nav-left">
                <button class="home-icon-btn" onclick="goToMainWebsite()" title="Go to Main Website">
                    <i class="fas fa-home"></i>
                    <span>Website</span>
                </button>
            </div>
            <div class="dashboard-user">
                <div class="user-avatar" id="sellerAvatar">S</div>
                <span id="sellerName">Seller Name</span>
                <button class="btn-logout" onclick="sellerLogout()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>
        
        <div class="dashboard-container">
            <!-- Sidebar Navigation -->
            <div class="dashboard-sidebar">
                <div class="sidebar-nav">
                    <div class="nav-item active" onclick="showDashboardSection('home')" data-section="home">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard Home</span>
                    </div>
                    <div class="nav-item" onclick="showDashboardSection('upload')" data-section="upload">
                        <i class="fas fa-upload"></i>
                        <span>Upload Product</span>
                    </div>
                    <div class="nav-item" onclick="showDashboardSection('products')" data-section="products">
                        <i class="fas fa-box"></i>
                        <span>My Products</span>
                    </div>
                    <div class="nav-item" onclick="showDashboardSection('featured')" data-section="featured">
                        <i class="fas fa-star"></i>
                        <span>Featured Products</span>
                    </div>
                    <div class="nav-item" onclick="showDashboardSection('account')" data-section="account">
                        <i class="fas fa-user-circle"></i>
                        <span>Account Status</span>
                    </div>
                </div>
            </div>
            
            <!-- Main Content Area -->
            <div class="dashboard-content">
                <!-- Dashboard Home Section -->
                <div id="dashboardHome" class="dashboard-section active">
                    <div class="section-header">
                        <h2>Dashboard Overview</h2>
                        <p class="section-subtitle">Welcome back! Here's your selling performance overview.</p>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-box"></i>
                            </div>
                            <div class="stat-info">
                                <div class="stat-number" id="totalProducts">0</div>
                                <div class="stat-label">Total Products</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-info">
                                <div class="stat-number" id="approvedProducts">0</div>
                                <div class="stat-label">Approved</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="stat-info">
                                <div class="stat-number" id="featuredProducts">0</div>
                                <div class="stat-label">Featured</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-info">
                                <div class="stat-number" id="pendingProducts">0</div>
                                <div class="stat-label">Pending</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="recent-activity">
                        <h3>Recent Activity</h3>
                        <div id="recentActivityList" class="activity-list">
                            <!-- Activity items will be dynamically added -->
                        </div>
                    </div>
                </div>
                
                <!-- Upload Product Section -->
                <div id="dashboardUpload" class="dashboard-section">
                    <div class="section-header">
                        <h2>Upload New Product</h2>
                        <p class="section-subtitle">Add a new product to your inventory</p>
                    </div>
                    
                    <form id="productUploadForm" class="upload-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="productName">Product Name *</label>
                                <input type="text" id="productName" name="productName" required>
                            </div>
                            <div class="form-group">
                                <label for="productCategory">Category *</label>
                                <select id="productCategory" name="productCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="electronics">Electronics</option>
                                    <option value="clothing">Clothing</option>
                                    <option value="home">Home & Garden</option>
                                    <option value="sports">Sports</option>
                                    <option value="books">Books</option>
                                    <option value="toys">Toys & Games</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="productDescription">Description *</label>
                            <textarea id="productDescription" name="productDescription" rows="4" required></textarea>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="productPrice">Price (KES) *</label>
                                <input type="number" id="productPrice" name="productPrice" min="0" step="0.01" required>
                            </div>
                            <div class="form-group">
                                <label for="productStock">Stock Quantity *</label>
                                <input type="number" id="productStock" name="productStock" min="0" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="productTags">Tags / Keywords</label>
                            <input type="text" id="productTags" name="productTags" placeholder="Separate tags with commas">
                        </div>
                        
                        <div class="form-group">
                            <label for="productImages">Product Images</label>
                            <div class="image-upload-area">
                                <input type="file" id="productImages" name="productImages" multiple accept="image/*">
                                <div class="upload-drop-zone" id="imageDropZone">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Drag & drop images here or click to browse</p>
                                    <small>Supports: JPG, PNG, GIF (Max 5MB per image)</small>
                                </div>
                                <div id="imagePreviewContainer" class="image-preview-container">
                                    <!-- Image previews will be added here -->
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn-primary">
                                <i class="fas fa-upload"></i> Upload Product
                            </button>
                            <button type="button" class="btn-secondary" onclick="resetUploadForm()">
                                <i class="fas fa-redo"></i> Reset Form
                            </button>
                        </div>
                    </form>
                </div>
                
                <!-- My Products Section -->
                <div id="dashboardProducts" class="dashboard-section">
                    <div class="section-header">
                        <h2>My Products</h2>
                        <p class="section-subtitle">Manage your product inventory</p>
                    </div>
                    
                    <div class="products-toolbar">
                        <div class="filter-controls">
                            <select id="productStatusFilter">
                                <option value="all">All Products</option>
                                <option value="pending">Pending</option>
                                <option value="approved">Approved</option>
                                <option value="featured">Featured</option>
                                <option value="rejected">Rejected</option>
                            </select>
                            <select id="productCategoryFilter">
                                <option value="all">All Categories</option>
                                <option value="electronics">Electronics</option>
                                <option value="clothing">Clothing</option>
                                <option value="home">Home & Garden</option>
                                <option value="sports">Sports</option>
                                <option value="books">Books</option>
                                <option value="toys">Toys & Games</option>
                            </select>
                        </div>
                        <div class="search-controls">
                            <input type="text" id="productSearch" placeholder="Search products...">
                        </div>
                    </div>
                    
                    <div id="productsTableContainer" class="products-table-container">
                        <table class="products-table">
                            <thead>
                                <tr>
                                    <th>Image</th>
                                    <th>Name</th>
                                    <th>Category</th>
                                    <th>Price</th>
                                    <th>Stock</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="productsTableBody">
                                <!-- Products will be dynamically loaded -->
                            </tbody>
                        </table>
                        <div id="noProductsMessage" class="no-products" style="display: none;">
                            <i class="fas fa-box-open"></i>
                            <p>No products found</p>
                        </div>
                    </div>
                </div>
                
                <!-- Featured Products Section -->
                <div id="dashboardFeatured" class="dashboard-section">
                    <div class="section-header">
                        <h2>Featured Products</h2>
                        <p class="section-subtitle">Products approved by admin for featuring</p>
                    </div>
                    
                    <div id="featuredProductsGrid" class="featured-products-grid">
                        <!-- Featured products will be dynamically loaded -->
                    </div>
                    <div id="noFeaturedProducts" class="no-featured" style="display: none;">
                        <i class="fas fa-star"></i>
                        <p>No featured products yet</p>
                        <small>Products approved by admin will appear here</small>
                    </div>
                </div>
                
                <!-- Account Status Section -->
                <div id="dashboardAccount" class="dashboard-section">
                    <div class="section-header">
                        <h2>Account Status</h2>
                        <p class="section-subtitle">Your seller account information</p>
                    </div>
                    
                    <div class="account-info-grid">
                        <div class="account-card">
                            <h3>Personal Information</h3>
                            <div class="info-item">
                                <label>Full Name:</label>
                                <span id="sellerFullName">-</span>
                            </div>
                            <div class="info-item">
                                <label>Email:</label>
                                <span id="sellerEmail">-</span>
                            </div>
                            <div class="info-item">
                                <label>Phone:</label>
                                <span id="sellerPhone">-</span>
                            </div>
                            <div class="info-item">
                                <label>Business Name:</label>
                                <span id="sellerBusinessName">-</span>
                            </div>
                        </div>
                        
                        <div class="account-card">
                            <h3>Account Details</h3>
                            <div class="info-item">
                                <label>Account Status:</label>
                                <span id="sellerAccountStatus" class="status-badge">-</span>
                            </div>
                            <div class="info-item">
                                <label>Registration Date:</label>
                                <span id="sellerRegDate">-</span>
                            </div>
                            <div class="info-item">
                                <label>Total Products:</label>
                                <span id="sellerTotalProducts">0</span>
                            </div>
                            <div class="info-item">
                                <label>Approved Products:</label>
                                <span id="sellerApprovedCount">0</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="notifications-section">
                        <h3>Notifications</h3>
                        <div id="sellerNotifications" class="notifications-list">
                            <!-- Notifications will be dynamically loaded -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Overlay for dashboard -->
    <div class="dashboard-overlay" id="dashboardOverlay"></div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="admin-dashboard" style="display: none;">
        <div class="admin-header">
            <div class="admin-logo">
                <span class="logo-text"> EcoLoop Admin Portal</span>
            </div>
            <div class="admin-user">
                <div class="admin-avatar" id="adminAvatar">A</div>
                <span id="adminName">Admin Name</span>
                <div class="live-indicator">
                    <div class="live-dot"></div>
                    <span>LIVE</span>
                </div>
                <button class="btn-logout" onclick="adminLogout()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>
        
        <div class="admin-container">
            <!-- Sidebar Navigation -->
            <div class="admin-sidebar">
                <div class="admin-nav">
                    <div class="admin-nav-item active" onclick="showAdminSection('dashboard')" data-section="dashboard">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </div>
                    <div class="admin-nav-item" onclick="showAdminSection('users')" data-section="users">
                        <i class="fas fa-users"></i>
                        <span>Manage Users</span>
                    </div>
                    <div class="admin-nav-item" onclick="showAdminSection('sellers')" data-section="sellers">
                        <i class="fas fa-store"></i>
                        <span>Seller Approvals</span>
                        <div class="admin-badge" id="pendingSellersBadge">0</div>
                    </div>
                    <div class="admin-nav-item" onclick="showAdminSection('products')" data-section="products">
                        <i class="fas fa-box"></i>
                        <span>Product Approvals</span>
                        <div class="admin-badge" id="pendingProductsBadge">0</div>
                    </div>
                    <div class="admin-nav-item" onclick="showAdminSection('controls')" data-section="controls">
                        <i class="fas fa-cogs"></i>
                        <span>System Controls</span>
                    </div>
                    <div class="admin-nav-item" onclick="showAdminSection('settings')" data-section="settings">
                        <i class="fas fa-sliders-h"></i>
                        <span>Settings</span>
                    </div>
                </div>
            </div>
            
            <!-- Main Content Area -->
            <div class="admin-content">
                <!-- Dashboard Section -->
                <div id="adminDashboard" class="admin-section active">
                    <div class="section-header">
                        <h2>Admin Dashboard</h2>
                        <p class="section-subtitle">Real-time system overview and analytics</p>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="admin-stat-card">
                            <div class="admin-stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-info">
                                <div class="admin-stat-number" id="totalUsers">0</div>
                                <div class="admin-stat-label">Total Users</div>
                            </div>
                        </div>
                        <div class="admin-stat-card">
                            <div class="admin-stat-icon">
                                <i class="fas fa-store"></i>
                            </div>
                            <div class="stat-info">
                                <div class="admin-stat-number" id="totalSellers">0</div>
                                <div class="admin-stat-label">Total Sellers</div>
                            </div>
                        </div>
                        <div class="admin-stat-card">
                            <div class="admin-stat-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-info">
                                <div class="admin-stat-number" id="pendingSellers">0</div>
                                <div class="admin-stat-label">Pending Sellers</div>
                            </div>
                        </div>
                        <div class="admin-stat-card">
                            <div class="admin-stat-icon">
                                <i class="fas fa-box"></i>
                            </div>
                            <div class="stat-info">
                                <div class="admin-stat-number" id="pendingProducts">0</div>
                                <div class="admin-stat-label">Pending Products</div>
                            </div>
                        </div>
                        <div class="admin-stat-card">
                            <div class="admin-stat-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-info">
                                <div class="admin-stat-number" id="activeProducts">0</div>
                                <div class="admin-stat-label">Active Products</div>
                            </div>
                        </div>
                        <div class="admin-stat-card">
                            <div class="admin-stat-icon">
                                <i class="fas fa-shopping-cart"></i>
                            </div>
                            <div class="stat-info">
                                <div class="admin-stat-number" id="totalOrders">0</div>
                                <div class="admin-stat-label">Total Orders</div>
                            </div>
                        </div>
                        <div class="admin-stat-card">
                            <div class="admin-stat-icon">
                                <i class="fas fa-eye"></i>
                            </div>
                            <div class="stat-info">
                                <div class="admin-stat-number" id="activeUsers">0</div>
                                <div class="admin-stat-label">Active Users</div>
                            </div>
                        </div>
                        <div class="admin-stat-card">
                            <div class="admin-stat-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-info">
                                <div class="admin-stat-number" id="totalRevenue">0</div>
                                <div class="admin-stat-label">Revenue (KES)</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="control-panel">
                        <h3 class="control-title">Quick Actions</h3>
                        <div class="control-grid">
                            <div class="control-item">
                                <span class="control-label">Maintenance Mode</span>
                                <div class="toggle-switch" id="maintenanceToggle" onclick="toggleMaintenance(this)"></div>
                            </div>
                            <div class="control-item">
                                <span class="control-label">New Registrations</span>
                                <div class="toggle-switch active" id="registrationsToggle" onclick="toggleRegistrations(this)"></div>
                            </div>
                            <div class="control-item">
                                <span class="control-label">Product Uploads</span>
                                <div class="toggle-switch active" id="uploadsToggle" onclick="toggleUploads(this)"></div>
                            </div>
                            <div class="control-item">
                                <span class="control-label">Seller Applications</span>
                                <div class="toggle-switch active" id="sellerAppsToggle" onclick="toggleSellerApps(this)"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Manage Users Section -->
                <div id="adminUsers" class="admin-section">
                    <div class="section-header">
                        <h2>Manage Users</h2>
                        <p class="section-subtitle">View and manage all registered users</p>
                    </div>
                    
                    <div class="control-panel">
                        <h3 class="control-title">User Management</h3>
                        <div id="usersList" class="users-list">
                            <!-- Users will be loaded dynamically -->
                        </div>
                    </div>
                </div>
                
                <!-- Seller Approvals Section -->
                <div id="adminSellers" class="admin-section">
                    <div class="section-header">
                        <h2>Seller Approvals</h2>
                        <p class="section-subtitle">Review and approve seller applications</p>
                    </div>
                    
                    <div id="pendingSellersList" class="approvals-list">
                        <!-- Pending sellers will be loaded dynamically -->
                    </div>
                </div>
                
                <!-- Product Approvals Section -->
                <div id="adminProducts" class="admin-section">
                    <div class="section-header">
                        <h2>Product Approvals</h2>
                        <p class="section-subtitle">Review and approve product submissions</p>
                    </div>
                    
                    <div id="pendingProductsList" class="approvals-list">
                        <!-- Pending products will be loaded dynamically -->
                    </div>
                </div>
                
                <!-- System Controls Section -->
                <div id="adminControls" class="admin-section">
                    <div class="section-header">
                        <h2>System Controls</h2>
                        <p class="section-subtitle">Manage website settings and features</p>
                    </div>
                    
                    <div class="control-panel">
                        <h3 class="control-title">Website Controls</h3>
                        <div class="control-grid">
                            <div class="control-item">
                                <span class="control-label">Website Status</span>
                                <div class="toggle-switch active" id="websiteToggle" onclick="toggleWebsite(this)"></div>
                            </div>
                            <div class="control-item">
                                <span class="control-label">User Registration</span>
                                <div class="toggle-switch active" id="userRegToggle" onclick="toggleUserReg(this)"></div>
                            </div>
                            <div class="control-item">
                                <span class="control-label">Cart System</span>
                                <div class="toggle-switch active" id="cartToggle" onclick="toggleCart(this)"></div>
                            </div>
                            <div class="control-item">
                                <span class="control-label">Wishlist System</span>
                                <div class="toggle-switch active" id="wishlistToggle" onclick="toggleWishlist(this)"></div>
                            </div>
                            <div class="control-item">
                                <span class="control-label">Product Search</span>
                                <div class="toggle-switch active" id="searchToggle" onclick="toggleSearch(this)"></div>
                            </div>
                            <div class="control-item">
                                <span class="control-label">Category Filters</span>
                                <div class="toggle-switch active" id="categoryToggle" onclick="toggleCategories(this)"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="control-panel">
                        <h3 class="control-title">Category Management</h3>
                        <div class="control-grid">
                            <div class="control-item">
                                <span class="control-label">Electronics</span>
                                <div class="toggle-switch active" onclick="toggleCategory('electronics', this)"></div>
                            </div>
                            <div class="control-item">
                                <span class="control-label">Clothing</span>
                                <div class="toggle-switch active" onclick="toggleCategory('clothing', this)"></div>
                            </div>
                            <div class="control-item">
                                <span class="control-label">Home & Garden</span>
                                <div class="toggle-switch active" onclick="toggleCategory('home', this)"></div>
                            </div>
                            <div class="control-item">
                                <span class="control-label">Sports</span>
                                <div class="toggle-switch active" onclick="toggleCategory('sports', this)"></div>
                            </div>
                            <div class="control-item">
                                <span class="control-label">Books</span>
                                <div class="toggle-switch active" onclick="toggleCategory('books', this)"></div>
                            </div>
                            <div class="control-item">
                                <span class="control-label">Toys & Games</span>
                                <div class="toggle-switch active" onclick="toggleCategory('toys', this)"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Settings Section -->
                <div id="adminSettings" class="admin-section">
                    <div class="section-header">
                        <h2>Admin Settings</h2>
                        <p class="section-subtitle">Configure system preferences</p>
                    </div>
                    
                    <div class="control-panel">
                        <h3 class="control-title">System Configuration</h3>
                        <div class="approval-details">
                            <div class="detail-item">
                                <span class="detail-label">Auto-approve Products</span>
                                <div class="toggle-switch" id="autoApproveProducts" onclick="toggleAutoApproveProducts(this)"></div>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Auto-approve Sellers</span>
                                <div class="toggle-switch" id="autoApproveSellers" onclick="toggleAutoApproveSellers(this)"></div>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Email Notifications</span>
                                <div class="toggle-switch active" id="emailNotifications" onclick="toggleEmailNotifications(this)"></div>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Real-time Updates</span>
                                <div class="toggle-switch active" id="realTimeUpdates" onclick="toggleRealTimeUpdates(this)"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Icon in Header -->
    <div class="admin-icon" id="adminIcon" onclick="showAdminDashboard()">
        <i class="fas fa-shield-alt"></i>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay" onclick="closeCart(); closeWishlist();"></div>

    <script>
        // Backend API URL
        const BACKEND_URL = 'https://my-backend-1-jk7w.onrender.com';

        // Global state
        let currentUser = null;

        // Modal functions - Make them global immediately
        window.showLoginModal = function() {
            console.log('showLoginModal called');
            const modal = document.getElementById('loginModal');
            if (modal) {
                modal.style.display = 'block';
                // Remove body scroll lock to allow website scrolling
                console.log('Login modal opened');
            } else {
                console.error('Login modal not found');
            }
        };

        window.showRegisterModal = function() {
            console.log('showRegisterModal called');
            const modal = document.getElementById('registerModal');
            if (modal) {
                modal.style.display = 'block';
                // Remove body scroll lock to allow website scrolling
                console.log('Register modal opened');
            } else {
                console.error('Register modal not found');
            }
        };

        window.showSellerRegisterModal = function() {
            console.log('showSellerRegisterModal called');
            const modal = document.getElementById('sellerRegisterModal');
            if (modal) {
                modal.style.display = 'block';
                // Remove body scroll lock to allow website scrolling
                console.log('Seller register modal opened');
            } else {
                console.error('Seller register modal not found');
            }
        };

        window.closeModal = function(modalId) {
            document.getElementById(modalId).style.display = 'none';
            // Don't change body overflow - keep it as auto for normal scrolling
            clearFormErrors(modalId);
        };

        // Authentication System
        class AuthManager {
            constructor() {
                this.init();
            }

            async init() {
                // Check if user is logged in by calling backend session endpoint
                await this.checkAuthStatus();
                this.updateUI();
            }

            async checkAuthStatus() {
                try {
                    // First check localStorage for cached user data
                    const cachedUser = localStorage.getItem('ecoloopUser');
                    if (cachedUser) {
                        currentUser = JSON.parse(cachedUser);
                        this.updateUI();
                    }

                    // Then try to verify with backend
                    const response = await fetch(`${BACKEND_URL}/api/user/session`, {
                        method: 'GET',
                        credentials: 'include' // Important for HTTP-only cookies
                    });

                    if (response.ok) {
                        const data = await response.json();
                        if (data.success && data.user) {
                            currentUser = data.user;
                            // Cache user data in localStorage
                            localStorage.setItem('ecoloopUser', JSON.stringify(currentUser));
                            this.updateUI();
                        } else {
                            // Backend says no user, but we have cached data
                            if (cachedUser) {
                                // Keep using cached data until explicit logout
                                console.log('Using cached user session');
                            } else {
                                currentUser = null;
                                this.updateUI();
                            }
                        }
                    } else {
                        // Backend failed, but we have cached data
                        if (cachedUser) {
                            console.log('Backend unavailable, using cached user session');
                        } else {
                            currentUser = null;
                            this.updateUI();
                        }
                    }
                } catch (error) {
                    console.error('Auth check failed:', error);
                    // Network error, but we have cached data
                    const cachedUser = localStorage.getItem('ecoloopUser');
                    if (cachedUser) {
                        currentUser = JSON.parse(cachedUser);
                        this.updateUI();
                        console.log('Network error, using cached user session');
                    } else {
                        currentUser = null;
                        this.updateUI();
                    }
                }
            }

            async login(email, password, rememberMe = false, role = 'user') {
                try {
                    const response = await fetch(`${BACKEND_URL}/api/user/login`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        credentials: 'include', // Important for HTTP-only cookies
                        body: JSON.stringify({ email, password, rememberMe, role })
                    });

                    const data = await response.json();

                    if (data.success) {
                        currentUser = data.user;
                        // Cache user data in localStorage
                        localStorage.setItem('ecoloopUser', JSON.stringify(currentUser));
                        this.updateUI();
                        showToast('Login successful!', 'success');
                        return { success: true };
                    } else {
                        return { success: false, error: data.message || data.error };
                    }
                } catch (error) {
                    console.error('Login error:', error);
                    return { success: false, error: 'Network error. Please try again.' };
                }
            }

            async register(userData) {
                try {
                    const response = await fetch(`${BACKEND_URL}/api/user/register`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        credentials: 'include', // Important for HTTP-only cookies
                        body: JSON.stringify(userData)
                    });

                    const data = await response.json();

                    if (data.success) {
                        currentUser = data.user;
                        this.updateUI();
                        showToast('Account created successfully!', 'success');
                        return { success: true };
                    } else {
                        return { success: false, error: data.error || 'Registration failed' };
                    }
                } catch (error) {
                    console.error('Registration error:', error);
                    return { success: false, error: 'Network error. Please try again.' };
                }
            }

            async sellerRegister(sellerData) {
                try {
                    const response = await fetch(`${BACKEND_URL}/api/seller/register`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(sellerData)
                    });

                    const data = await response.json();

                    if (response.ok) {
                        showToast('Seller registration successful! Please wait for admin approval.', 'success');
                        return { success: true };
                    } else {
                        return { success: false, error: data.error || 'Registration failed' };
                    }
                } catch (error) {
                    console.error('Seller registration error:', error);
                    return { success: false, error: 'Network error. Please try again.' };
                }
            }

            async logout() {
                try {
                    const response = await fetch(`${BACKEND_URL}/api/user/logout`, {
                        method: 'POST',
                        credentials: 'include' // Important for HTTP-only cookies
                    });
                    
                    // Clear user data regardless of backend response
                    currentUser = null;
                    localStorage.removeItem('ecoloopUser');
                    this.updateUI();
                    showToast('Logged out successfully!', 'success');
                    
                    if (!response.ok) {
                        console.log('Backend logout failed, but cleared local session');
                    }
                } catch (error) {
                    console.error('Logout error:', error);
                    // Clear user data on error
                    currentUser = null;
                    localStorage.removeItem('ecoloopUser');
                    this.updateUI();
                    showToast('Logged out successfully!', 'success');
                }
            }

            updateUI() {
                // Call our comprehensive updateAuthUI function
                updateAuthUI();
                
                // Load cart and wishlist for logged-in users
                if (currentUser) {
                    loadCartItems();
                    loadWishlistItems();
                }
            }
        }

        // Initialize auth manager
        const authManager = new AuthManager();

        // Initialize authentication UI on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log(' Page loaded - initializing unified website personalization');
            updateWebsiteForUserType();
        });

        // Also update UI when authentication state changes
        const originalLoginSuccess = window.handleLoginSuccess;
        window.handleLoginSuccess = function(user, role) {
            if (originalLoginSuccess) {
                originalLoginSuccess(user, role);
            }
            console.log(' Login successful - updating website personalization');
            updateWebsiteForUserType();
        };

        // Update UI on logout
        const originalLogout = window.logout;
        window.logout = function() {
            if (originalLogout) {
                originalLogout();
            }
            console.log(' Logout successful - updating website personalization');
            updateWebsiteForUserType();
        };

        // Futuristic Ocean Effects
        function initializeOceanEffects() {
            // Create bioluminescent particles
            const bioParticlesContainer = document.getElementById('bioParticles');
            if (bioParticlesContainer) {
                for (let i = 0; i < 15; i++) {
                    createBioParticle(bioParticlesContainer, i);
                }
            }
        }

        function createBioParticle(container, index) {
            const particle = document.createElement('div');
            particle.className = 'bio-particle';
            
            // Random positioning and animation delays
            const startX = Math.random() * 100;
            const delay = Math.random() * 8;
            const duration = 8 + Math.random() * 4;
            const size = 2 + Math.random() * 3;
            
            particle.style.left = startX + '%';
            particle.style.animationDelay = delay + 's';
            particle.style.animationDuration = duration + 's';
            particle.style.width = size + 'px';
            particle.style.height = size + 'px';
            
            // Random glow colors
            const colors = [
                'rgba(0, 255, 255, 0.8)',
                'rgba(255, 0, 255, 0.6)',
                'rgba(0, 200, 255, 0.7)',
                'rgba(255, 255, 0, 0.5)'
            ];
            const color = colors[Math.floor(Math.random() * colors.length)];
            particle.style.background = `radial-gradient(circle, ${color} 0%, transparent 70%)`;
            particle.style.boxShadow = `0 0 ${size * 3}px ${color}`;
            
            container.appendChild(particle);
            
            // Recreate particle when animation ends
            particle.addEventListener('animationend', () => {
                container.removeChild(particle);
                createBioParticle(container, index);
            });
        }

        // Interactive wave distortion on button hover
        function initializeInteractiveWaves() {
            const userActions = document.querySelectorAll('.top-header .user-actions a');
            
            userActions.forEach(link => {
                link.addEventListener('mouseenter', function(e) {
                    createRippleEffect(e.target);
                });
            });
        }

        function createRippleEffect(element) {
            const ripple = document.createElement('div');
            ripple.style.position = 'absolute';
            ripple.style.top = '50%';
            ripple.style.left = '50%';
            ripple.style.width = '0px';
            ripple.style.height = '0px';
            ripple.style.background = 'radial-gradient(circle, rgba(0, 255, 255, 0.4) 0%, transparent 70%)';
            ripple.style.transform = 'translate(-50%, -50%)';
            ripple.style.borderRadius = '50%';
            ripple.style.pointerEvents = 'none';
            ripple.style.zIndex = '1';
            ripple.style.transition = 'all 1s ease-out';
            
            element.style.position = 'relative';
            element.appendChild(ripple);
            
            // Animate ripple
            setTimeout(() => {
                ripple.style.width = '150px';
                ripple.style.height = '150px';
                ripple.style.opacity = '0';
            }, 10);
            
            // Remove ripple after animation
            setTimeout(() => {
                if (ripple.parentNode) {
                    ripple.parentNode.removeChild(ripple);
                }
            }, 1000);
        }

        // Dynamic wave response to mouse movement
        function initializeWaveResponse() {
            const topHeader = document.querySelector('.top-header');
            if (!topHeader) return;
            
            let mouseX = 0;
            let mouseY = 0;
            let targetX = 0;
            let targetY = 0;
            
            document.addEventListener('mousemove', (e) => {
                const rect = topHeader.getBoundingClientRect();
                if (e.clientY >= rect.top && e.clientY <= rect.bottom) {
                    mouseX = (e.clientX - rect.left) / rect.width;
                    mouseY = (e.clientY - rect.top) / rect.height;
                }
            });
            
            function updateWaveDistortion() {
                targetX += (mouseX - targetX) * 0.1;
                targetY += (mouseY - targetY) * 0.1;
                
                const waves = topHeader.querySelector('.ocean-waves');
                const currents = topHeader.querySelector('.ocean-currents');
                
                if (waves) {
                    waves.style.transform = `translateX(${targetX * 10}px) translateY(${targetY * 5}px)`;
                }
                
                if (currents) {
                    currents.style.backgroundPosition = `${targetX * 100}% ${targetY * 100}%`;
                }
                
                requestAnimationFrame(updateWaveDistortion);
            }
            
            updateWaveDistortion();
        }

        // Window resize handler for responsive waves
        function handleResize() {
            const particles = document.querySelectorAll('.bio-particle');
            particles.forEach(particle => {
                const currentLeft = parseFloat(particle.style.left);
                // Redistribute particles on resize
                if (Math.random() > 0.7) {
                    particle.style.left = Math.random() * 100 + '%';
                }
            });
        }

        // Initialize all ocean effects when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            initializeOceanEffects();
            initializeInteractiveWaves();
            initializeWaveResponse();
            initializeFuturisticBackgrounds();
            
            // Initialize scroll-seamless animations
            initializeScrollSeamlessAnimations();
            
            // Handle resize events
            window.addEventListener('resize', handleResize);
        });

        // ============================================
        // SCROLL-SEAMLESS ANIMATION SYSTEM
        // ============================================
        
        // Global animation state manager
        const scrollSeamlessAnimations = {
            // Track all animation states
            animationStates: new Map(),
            
            // Performance optimization
            rafId: null,
            isScrolling: false,
            scrollTimeout: null,
            
            // GPU acceleration helpers
            gpuElements: new Set(),
            
            // Animation frame tracking
            lastFrameTime: 0,
            targetFPS: 60,
            frameInterval: 1000 / 60,
            
            // Initialize the scroll-seamless system
            init() {
                console.log(' Initializing scroll-seamless animation system...');
                
                // Detect and optimize all animated elements
                this.detectAnimatedElements();
                
                // Setup scroll listeners with performance optimization
                this.setupScrollListeners();
                
                // Setup RAF loop for continuous animation monitoring
                this.startAnimationLoop();
                
                // Optimize for GPU acceleration
                this.optimizeForGPU();
                
                console.log(' Scroll-seamless animations initialized');
            },
            
            // Detect all elements with animations
            detectAnimatedElements() {
                // Find all elements with CSS animations
                const animatedElements = document.querySelectorAll('*');
                let detectedCount = 0;
                
                animatedElements.forEach(element => {
                    const styles = window.getComputedStyle(element);
                    const animationName = styles.animationName;
                    const animationDuration = styles.animationDuration;
                    
                    if (animationName && animationName !== 'none') {
                        this.registerAnimatedElement(element, {
                            type: 'css',
                            name: animationName,
                            duration: animationDuration,
                            delay: styles.animationDelay,
                            iterationCount: styles.animationIterationCount,
                            playState: styles.animationPlayState
                        });
                        detectedCount++;
                    }
                    
                    // Check for transform animations
                    const transform = styles.transform;
                    if (transform && transform !== 'none') {
                        this.registerAnimatedElement(element, {
                            type: 'transform',
                            currentTransform: transform
                        });
                    }
                    
                    // Check for canvas animations
                    if (element.tagName === 'CANVAS') {
                        this.registerAnimatedElement(element, {
                            type: 'canvas',
                            context: element.getContext('2d')
                        });
                    }
                });
                
                console.log(` Detected ${detectedCount} animated elements`);
            },
            
            // Register an animated element for tracking
            registerAnimatedElement(element, config) {
                const elementId = this.getElementId(element);
                this.animationStates.set(elementId, {
                    element,
                    config,
                    lastAnimationTime: performance.now(),
                    scrollOffset: window.pageYOffset,
                    animationProgress: 0,
                    isPaused: false,
                    forceGPU: false
                });
            },
            
            // Generate unique element ID
            getElementId(element) {
                if (!element.dataset.scrollSeamlessId) {
                    element.dataset.scrollSeamlessId = `ss_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
                }
                return element.dataset.scrollSeamlessId;
            },
            
            // Setup optimized scroll listeners
            setupScrollListeners() {
                let isTicking = false;
                
                // Optimized scroll handler
                const optimizedScrollHandler = () => {
                    if (!isTicking) {
                        window.requestAnimationFrame(() => {
                            this.handleScroll();
                            isTicking = false;
                        });
                        isTicking = true;
                    }
                };
                
                // Throttled scroll event
                window.addEventListener('scroll', optimizedScrollHandler, { passive: true });
                
                // Scroll end detection
                window.addEventListener('scroll', () => {
                    this.isScrolling = true;
                    
                    clearTimeout(this.scrollTimeout);
                    this.scrollTimeout = setTimeout(() => {
                        this.isScrolling = false;
                        this.onScrollEnd();
                    }, 150);
                }, { passive: true });
            },
            
            // Handle scroll events
            handleScroll() {
                const currentScrollOffset = window.pageYOffset;
                const scrollDelta = currentScrollOffset - this.lastScrollOffset || 0;
                
                // Update all animation states
                this.animationStates.forEach((state, elementId) => {
                    this.updateElementScrollState(state, currentScrollOffset, scrollDelta);
                });
                
                this.lastScrollOffset = currentScrollOffset;
            },
            
            // Update individual element scroll state
            updateElementScrollState(state, scrollOffset, scrollDelta) {
                const { element, config } = state;
                
                // Store scroll position for animation continuity
                state.scrollOffset = scrollOffset;
                
                // Handle different animation types
                switch (config.type) {
                    case 'css':
                        this.preserveCSSAnimation(state, scrollOffset, scrollDelta);
                        break;
                    case 'transform':
                        this.preserveTransform(state, scrollOffset, scrollDelta);
                        break;
                    case 'canvas':
                        this.preserveCanvasAnimation(state, scrollOffset, scrollDelta);
                        break;
                }
            },
            
            // Preserve CSS animations during scroll
            preserveCSSAnimation(state, scrollOffset, scrollDelta) {
                const { element, config } = state;
                
                // Get current animation state
                const styles = window.getComputedStyle(element);
                const currentTime = styles.animationPlayState;
                
                // Force animation to continue playing
                if (currentTime === 'paused') {
                    element.style.animationPlayState = 'running';
                }
                
                // Remove scroll compensation to maintain original animation speed
                // Let animations run at their natural pace without interference
                // Only ensure animations don't pause during scroll
            },
            
            // Preserve transform animations
            preserveTransform(state, scrollOffset, scrollDelta) {
                const { element } = state;
                
                // Remove scroll compensation to maintain original animation speed
                // Let transform animations run at their natural pace
                // Only ensure animations continue during scroll without interference
            },
            
            // Preserve canvas animations
            preserveCanvasAnimation(state, scrollOffset, scrollDelta) {
                const { element, config } = state;
                
                // Canvas animations are typically handled by RAF
                // Just ensure they continue running
                if (config.context && !state.canvasOptimized) {
                    this.optimizeCanvas(element, config.context);
                    state.canvasOptimized = true;
                }
            },
            
            // Optimize canvas for scroll performance
            optimizeCanvas(canvas, context) {
                // Enable hardware acceleration for canvas
                canvas.style.willChange = 'transform';
                canvas.style.transform = 'translateZ(0)';
                
                // Optimize context for performance
                context.imageSmoothingEnabled = false;
                context.globalAlpha = 0.8;
            },
            
            // Start continuous animation monitoring loop
            startAnimationLoop() {
                const animate = (currentTime) => {
                    // Remove FPS limiting to maintain original animation speed
                    // Allow animations to run at their natural speed
                    this.updateAllAnimations(currentTime);
                    this.lastFrameTime = currentTime;
                    
                    this.rafId = requestAnimationFrame(animate);
                };
                
                this.rafId = requestAnimationFrame(animate);
            },
            
            // Update all animations continuously
            updateAllAnimations(currentTime) {
                this.animationStates.forEach((state, elementId) => {
                    this.updateAnimationFrame(state, currentTime);
                });
            },
            
            // Update individual animation frame
            updateAnimationFrame(state, currentTime) {
                const { element, config } = state;
                
                // Calculate animation progress
                const deltaTime = currentTime - state.lastAnimationTime;
                state.lastAnimationTime = currentTime;
                
                // Remove performance monitoring to avoid triggering optimizations
                // Let animations run at their natural speed without interference
                
                // Only ensure animations don't pause during scroll
                if (this.isScrolling) {
                    this.ensureAnimationContinuity(state, deltaTime);
                }
            },
            
            // Ensure animation continuity during scroll
            ensureAnimationContinuity(state, deltaTime) {
                const { element, config } = state;
                
                // Only ensure animations don't pause during scroll
                // Avoid any performance optimizations that might slow down animations
                const styles = window.getComputedStyle(element);
                if (styles.animationPlayState === 'paused') {
                    element.style.animationPlayState = 'running';
                }
                
                // Skip GPU forcing to maintain original animation speed
                // Let animations run at their natural pace
            },
            
            // Optimize performance for struggling animations
            optimizePerformance(state) {
                const { element } = state;
                
                // Reduce animation complexity if needed
                if (state.performanceOptimized) return;
                
                // Apply performance optimizations WITHOUT changing animation timing
                // Preserve original animation speed and behavior
                element.style.willChange = 'transform, opacity';
                element.style.transform = 'translateZ(0)';
                
                // Mark as optimized without altering animation properties
                state.performanceOptimized = true;
            },
            
            // Handle scroll end events
            onScrollEnd() {
                // Clean up scroll-specific optimizations
                this.animationStates.forEach((state) => {
                    if (state.forceGPU) {
                        const { element } = state;
                        element.style.willChange = 'auto';
                        state.forceGPU = false;
                    }
                });
            },
            
            // Optimize for GPU acceleration
            optimizeForGPU() {
                // Find and optimize all animated elements
                document.querySelectorAll('[style*="animation"], [style*="transform"]').forEach(element => {
                    this.gpuElements.add(element);
                    element.style.willChange = 'transform, opacity';
                    element.style.transform = 'translateZ(0)';
                });
                
                // Optimize futuristic backgrounds specifically
                const futuristicElements = document.querySelectorAll('.futuristic-background-left, .futuristic-background-right, .holographic-streams, .neon-particle-waves, .cybernetic-grid, .light-streaks');
                futuristicElements.forEach(element => {
                    element.style.willChange = 'transform, opacity, background-position';
                    element.style.transform = 'translateZ(0)';
                    element.style.backfaceVisibility = 'hidden';
                });
                
                // Optimize canvas elements
                document.querySelectorAll('canvas').forEach(canvas => {
                    canvas.style.willChange = 'transform';
                    canvas.style.transform = 'translateZ(0)';
                });
            },
            
            // Public API for manual animation control
            pauseAnimation(element) {
                const elementId = this.getElementId(element);
                const state = this.animationStates.get(elementId);
                if (state) {
                    state.isPaused = true;
                    element.style.animationPlayState = 'paused';
                }
            },
            
            resumeAnimation(element) {
                const elementId = this.getElementId(element);
                const state = this.animationStates.get(elementId);
                if (state) {
                    state.isPaused = false;
                    element.style.animationPlayState = 'running';
                }
            },
            
            // Get animation statistics
            getStats() {
                return {
                    totalAnimatedElements: this.animationStates.size,
                    gpuOptimizedElements: this.gpuElements.size,
                    isScrolling: this.isScrolling,
                    currentFPS: this.targetFPS,
                    memoryUsage: performance.memory ? {
                        used: Math.round(performance.memory.usedJSHeapSize / 1048576) + 'MB',
                        total: Math.round(performance.memory.totalJSHeapSize / 1048576) + 'MB'
                    } : 'N/A'
                };
            }
        };
        
        // Initialize scroll-seamless animations
        function initializeScrollSeamlessAnimations() {
            scrollSeamlessAnimations.init();
            
            // Add debug function to console
            window.scrollSeamlessDebug = () => {
                console.log(' Scroll-Seamless Animation Stats:', scrollSeamlessAnimations.getStats());
            };
            
            // Add performance monitoring
            if (window.performance && window.performance.memory) {
                setInterval(() => {
                    const stats = scrollSeamlessAnimations.getStats();
                    if (stats.memoryUsage.used && parseInt(stats.memoryUsage.used) > 100) {
                        console.warn(' High memory usage detected:', stats.memoryUsage);
                    }
                }, 30000); // Check every 30 seconds
            }
        }

        // Futuristic Background Animations
        function initializeFuturisticBackgrounds() {
            console.log(' Initializing futuristic backgrounds...');
            
            // Initialize left background canvas
            const leftCanvas = document.getElementById('leftBackgroundCanvas');
            if (leftCanvas) {
                initializeBackgroundCanvas(leftCanvas, 'left');
            }
            
            // Initialize right background canvas
            const rightCanvas = document.getElementById('rightBackgroundCanvas');
            if (rightCanvas) {
                initializeBackgroundCanvas(rightCanvas, 'right');
            }
        }

        function initializeBackgroundCanvas(canvas, side) {
            const ctx = canvas.getContext('2d');
            
            // Set canvas size
            function resizeCanvas() {
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
            }
            
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            // Particle system for futuristic effects
            const particles = [];
            const particleCount = 50;
            
            class FuturisticParticle {
                constructor() {
                    this.reset();
                }
                
                reset() {
                    this.x = Math.random() * canvas.width;
                    this.y = Math.random() * canvas.height;
                    this.size = Math.random() * 3 + 1;
                    this.speedX = (Math.random() - 0.5) * 0.5;
                    this.speedY = (Math.random() - 0.5) * 0.5;
                    this.opacity = Math.random() * 0.5 + 0.2;
                    this.color = this.getRandomColor();
                    this.pulsePhase = Math.random() * Math.PI * 2;
                    this.pulseSpeed = Math.random() * 0.02 + 0.01;
                }
                
                getRandomColor() {
                    const colors = [
                        '0, 255, 255',  // Cyan
                        '255, 0, 255',  // Magenta
                        '255, 255, 0',  // Yellow
                        '0, 255, 150',  // Green-cyan
                        '255, 100, 200' // Pink
                    ];
                    return colors[Math.floor(Math.random() * colors.length)];
                }
                
                update() {
                    // Movement
                    this.x += this.speedX;
                    this.y += this.speedY;
                    
                    // Pulse effect
                    this.pulsePhase += this.pulseSpeed;
                    const pulseFactor = Math.sin(this.pulsePhase) * 0.3 + 1;
                    this.currentSize = this.size * pulseFactor;
                    
                    // Wrap around edges
                    if (this.x < 0) this.x = canvas.width;
                    if (this.x > canvas.width) this.x = 0;
                    if (this.y < 0) this.y = canvas.height;
                    if (this.y > canvas.height) this.y = 0;
                    
                    // Random direction change
                    if (Math.random() < 0.01) {
                        this.speedX = (Math.random() - 0.5) * 0.5;
                        this.speedY = (Math.random() - 0.5) * 0.5;
                    }
                }
                
                draw() {
                    ctx.save();
                    
                    // Glow effect
                    const gradient = ctx.createRadialGradient(
                        this.x, this.y, 0,
                        this.x, this.y, this.currentSize * 3
                    );
                    gradient.addColorStop(0, `rgba(${this.color}, ${this.opacity})`);
                    gradient.addColorStop(0.5, `rgba(${this.color}, ${this.opacity * 0.5})`);
                    gradient.addColorStop(1, `rgba(${this.color}, 0)`);
                    
                    ctx.fillStyle = gradient;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.currentSize * 3, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Core particle
                    ctx.fillStyle = `rgba(255, 255, 255, ${this.opacity})`;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.currentSize, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.restore();
                }
            }
            
            // Create particles
            for (let i = 0; i < particleCount; i++) {
                particles.push(new FuturisticParticle());
            }
            
            // Connection lines between nearby particles
            function drawConnections() {
                ctx.strokeStyle = 'rgba(0, 255, 255, 0.1)';
                ctx.lineWidth = 0.5;
                
                for (let i = 0; i < particles.length; i++) {
                    for (let j = i + 1; j < particles.length; j++) {
                        const dx = particles[i].x - particles[j].x;
                        const dy = particles[i].y - particles[j].y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < 100) {
                            const opacity = (1 - distance / 100) * 0.3;
                            ctx.strokeStyle = `rgba(0, 255, 255, ${opacity})`;
                            ctx.beginPath();
                            ctx.moveTo(particles[i].x, particles[i].y);
                            ctx.lineTo(particles[j].x, particles[j].y);
                            ctx.stroke();
                        }
                    }
                }
            }
            
            // Animation loop
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Update and draw particles
                particles.forEach(particle => {
                    particle.update();
                    particle.draw();
                });
                
                // Draw connections
                drawConnections();
                
                requestAnimationFrame(animate);
            }
            
            animate();
        }

        // Role selector helper text update
        document.addEventListener('DOMContentLoaded', function() {
            const roleRadios = document.querySelectorAll('input[name="loginRole"]');
            const roleHelpText = document.getElementById('roleHelpText');
            
            if (roleRadios.length > 0 && roleHelpText) {
                function updateRoleHelpText() {
                    const selectedRole = document.querySelector('input[name="loginRole"]:checked').value;
                    if (selectedRole === 'seller') {
                        roleHelpText.textContent = 'Login with your seller account credentials (email and password used during registration). Only approved sellers can access the dashboard.';
                    } else {
                        roleHelpText.textContent = 'Login as a regular user to browse and purchase products';
                    }
                }
                
                // Add event listeners to role radios
                roleRadios.forEach(radio => {
                    radio.addEventListener('change', updateRoleHelpText);
                });
                
                // Set initial help text
                updateRoleHelpText();
            }
        });

        // Helper functions
        function clearFormErrors(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                const errorElements = modal.querySelectorAll('.error');
                errorElements.forEach(element => element.textContent = '');
            }
        }

        // Comprehensive network and seller login diagnostics
        async function diagnoseSellerLoginIssue() {
            console.log(' === DIAGNOSING SELLER LOGIN ISSUE === ');
            console.log('');
            
            try {
                // Test 1: Check backend connectivity
                console.log(' Test 1: Backend connectivity...');
                const connectivityTest = await fetch(`${BACKEND_URL}/api/simple-test`, {
                    method: 'GET',
                    headers: { 'Content-Type': 'application/json' }
                });
                
                if (connectivityTest.ok) {
                    const connectivityData = await connectivityTest.json();
                    console.log(' Backend connectivity OK:', connectivityData);
                } else {
                    console.error(' Backend connectivity failed:', connectivityTest.status);
                    return;
                }
                
                // Test 2: Check seller login endpoint exists
                console.log(' Test 2: Seller login endpoint...');
                const endpointTest = await fetch(`${BACKEND_URL}/api/seller/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email: 'test@test.com', password: 'test' })
                });
                
                console.log(' Seller login endpoint response:', {
                    status: endpointTest.status,
                    statusText: endpointTest.statusText,
                    headers: Object.fromEntries(endpointTest.headers.entries())
                });
                
                if (endpointTest.status === 404) {
                    console.error(' Seller login endpoint not found (404)');
                } else if (endpointTest.status === 500) {
                    console.error(' Seller login endpoint server error (500)');
                    const errorText = await endpointTest.text();
                    console.error(' Error response:', errorText);
                } else {
                    const loginData = await endpointTest.json();
                    console.log(' Seller login endpoint responds:', loginData);
                }
                
                // Test 3: Check CORS headers
                console.log(' Test 3: CORS configuration...');
                const corsTest = await fetch(`${BACKEND_URL}/api/simple-test`, {
                    method: 'OPTIONS',
                    headers: { 
                        'Origin': window.location.origin,
                        'Access-Control-Request-Method': 'POST',
                        'Access-Control-Request-Headers': 'Content-Type'
                    }
                });
                
                console.log(' CORS response:', {
                    status: corsTest.status,
                    headers: Object.fromEntries(corsTest.headers.entries())
                });
                
                console.log(' === DIAGNOSIS COMPLETE === ');
                console.log(' Summary:');
                console.log('- Backend URL:', BACKEND_URL);
                console.log('- Frontend origin:', window.location.origin);
                console.log('- Browser user agent:', navigator.userAgent);
                console.log('- Online status:', navigator.onLine);
                
            } catch (error) {
                console.error(' Diagnosis failed:', error);
                console.error(' Error details:', {
                    name: error.name,
                    message: error.message,
                    stack: error.stack
                });
            }
        }

        // Test backend connectivity
        async function testBackendConnectivity() {
            try {
                console.log(' Testing backend connectivity...');
                const response = await fetch(`${BACKEND_URL}/api/simple-test`);
                const data = await response.json();
                console.log(' Backend connectivity test:', data);
                return true;
            } catch (error) {
                console.error(' Backend connectivity failed:', error);
                return false;
            }
        }

        // Test seller registration endpoint
        async function testSellerRegistration() {
            try {
                console.log(' Testing seller registration endpoint...');
                
                const testSeller = {
                    firstName: 'Test',
                    lastName: 'Seller',
                    email: 'testseller@example.com',
                    phone: '+254712345678',
                    password: 'testpass123',
                    businessName: 'Test Business',
                    businessType: 'individual',
                    businessDescription: 'Test business description'
                };
                
                const response = await fetch(`${BACKEND_URL}/api/seller/register`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(testSeller)
                });
                
                const data = await response.json();
                console.log(' Seller registration test response:', data);
                
                if (data.success) {
                    console.log(' Seller registration endpoint working');
                    return true;
                } else {
                    console.log(' Seller registration failed:', data.error);
                    return false;
                }
            } catch (error) {
                console.error(' Seller registration test error:', error);
                return false;
            }
        }

        // Test seller login credentials flow
        function testSellerLoginFlow() {
            console.log(' === COMPLETE SELLER SYSTEM TEST === ');
            console.log('');
            console.log(' BACKEND CHANGES MADE:');
            console.log(' 1. Seller Registration  bcrypt password hashing + proper schema');
            console.log(' 2. Seller Login  bcrypt verification + approvalStatus check');
            console.log(' 3. Admin Approval  updates both status + approvalStatus fields');
            console.log(' 4. API Endpoints  /api/seller/register, /api/seller/login, /api/admin/seller/approve');
            console.log('');
            console.log(' FRONTEND CHANGES MADE:');
            console.log(' 5. Role-based routing  seller uses /api/seller/login, user uses /api/user/login');
            console.log(' 6. Response handling  different formats for seller vs user login');
            console.log(' 7. Error messages  specific to seller approval status');
            console.log('');
            console.log(' EXPECTED WORKFLOW:');
            console.log('1 User registers as seller  stored in sellers collection with hashed password');
            console.log('2 Status = "pending"  cannot login yet');
            console.log('3 Admin approves seller  status = "approved"');
            console.log('4 Seller can now login with same credentials');
            console.log('5 Login success  redirect to Seller Dashboard');
            console.log('');
            console.log(' SECURITY FEATURES:');
            console.log(' Passwords are hashed with bcrypt (12 rounds)');
            console.log(' Approval status enforced before login access');
            console.log(' Separate collections for users vs sellers');
            console.log(' Role-based endpoint routing');
            console.log('');
            console.log(' TEST SCENARIOS:');
            console.log(' Pending seller login  "Seller account is pending admin approval"');
            console.log(' Wrong password  "Incorrect password"');
            console.log(' Non-seller email  "Seller not found"');
            console.log(' Approved seller login  "Seller login successful" + Dashboard');
            console.log('');
            console.log(' READY FOR TESTING!');
        }

        // Run all tests
        async function runAllTests() {
            testSellerLoginFlow();
            await diagnoseSellerLoginIssue();
            await testBackendConnectivity();
            await testSellerRegistration();
        }

        // Password storage diagnostic function
        async function diagnosePasswordIssue() {
            console.log(' === DIAGNOSING PASSWORD STORAGE ISSUE === ');
            console.log('');
            
            try {
                // Test with a known seller email (replace with actual email)
                const testEmail = prompt('Enter seller email to test password storage:', 'testseller@example.com');
                if (!testEmail) return;
                
                console.log(' Testing seller:', testEmail);
                
                // Check seller data
                const debugResponse = await fetch(`${BACKEND_URL}/api/debug/seller/${encodeURIComponent(testEmail)}`);
                const debugData = await debugResponse.json();
                
                console.log(' Seller debug data:', debugData);
                
                if (debugData.success) {
                    const seller = debugData.seller;
                    console.log(' Seller found:', {
                        email: seller.email,
                        name: seller.name,
                        approvalStatus: seller.approvalStatus,
                        passwordHashLength: seller.passwordHashLength,
                        passwordHashStart: seller.passwordHashStart
                    });
                    
                    // Test password verification
                    const testPassword = prompt('Enter password to test:', 'testpass123');
                    if (!testPassword) return;
                    
                    const passwordTestResponse = await fetch(`${BACKEND_URL}/api/debug/test-password`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email: testEmail, password: testPassword })
                    });
                    
                    const passwordTestData = await passwordTestResponse.json();
                    console.log(' Password test result:', passwordTestData);
                    
                    if (passwordTestData.success) {
                        const test = passwordTestData.test;
                        console.log(' Password verification details:', {
                            passwordProvided: test.passwordProvided,
                            passwordLength: test.passwordLength,
                            hashExists: test.hashExists,
                            hashLength: test.hashLength,
                            passwordMatch: test.passwordMatch,
                            bcryptError: test.bcryptError
                        });
                        
                        if (test.passwordMatch) {
                            console.log(' Password verification SUCCESSFUL');
                            alert(' Password is stored and verified correctly!');
                        } else {
                            console.log(' Password verification FAILED');
                            if (test.bcryptError) {
                                console.error(' Bcrypt error:', test.bcryptError);
                                alert(' Bcrypt error: ' + test.bcryptError);
                            } else {
                                console.log(' Password does not match hash');
                                alert(' Password does not match stored hash. Possible issues:\n1. Wrong password entered\n2. Hash corrupted\n3. Registration issue');
                            }
                        }
                    }
                } else {
                    console.log(' Seller not found');
                    alert(' Seller not found in database');
                }
                
            } catch (error) {
                console.error(' Password diagnosis failed:', error);
                alert(' Diagnosis failed: ' + error.message);
            }
        }

        // Quick password test function
        async function quickPasswordTest() {
            const email = prompt('Seller email:');
            const password = prompt('Password:');
            
            if (!email || !password) return;
            
            try {
                const response = await fetch(`${BACKEND_URL}/api/debug/test-password`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });
                
                const data = await response.json();
                console.log('Password test result:', data);
                
                if (data.success) {
                    alert(`Password match: ${data.test.passwordMatch ? 'YES ' : 'NO '}`);
                } else {
                    alert('Error: ' + (data.error || data.message));
                }
            } catch (error) {
                console.error('Quick test failed:', error);
                alert('Test failed: ' + error.message);
            }
        }

        // Call test functions for debugging
        runAllTests();
        
        // Add password diagnosis to global scope
        window.diagnosePasswordIssue = diagnosePasswordIssue;
        window.quickPasswordTest = quickPasswordTest;
        
        // Complete registration and password test
        async function testRegistrationAndLogin() {
            console.log(' === COMPLETE REGISTRATION & LOGIN TEST === ');
            console.log('');
            
            try {
                // Step 1: Register a new seller
                const testSeller = {
                    firstName: 'Test',
                    lastName: 'Seller',
                    email: `testseller${Date.now()}@example.com`, // Unique email
                    phone: '+254712345678',
                    password: 'testpass123',
                    businessName: 'Test Business',
                    businessType: 'individual',
                    businessDescription: 'Test business description'
                };
                
                console.log(' Step 1: Registering seller...', { email: testSeller.email });
                
                const registerResponse = await fetch(`${BACKEND_URL}/api/seller/register`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(testSeller)
                });
                
                const registerData = await registerResponse.json();
                console.log(' Registration response:', registerData);
                
                if (!registerData.success) {
                    console.error(' Registration failed:', registerData.error);
                    alert('Registration failed: ' + registerData.error);
                    return;
                }
                
                console.log(' Registration successful!');
                
                // Step 2: Test password immediately
                console.log(' Step 2: Testing password verification...');
                
                const passwordTestResponse = await fetch(`${BACKEND_URL}/api/debug/test-password`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        email: testSeller.email, 
                        password: testSeller.password 
                    })
                });
                
                const passwordTestData = await passwordTestResponse.json();
                console.log(' Password test result:', passwordTestData);
                
                if (passwordTestData.success) {
                    const test = passwordTestData.test;
                    console.log(' Password verification details:', test);
                    
                    if (test.passwordMatch) {
                        console.log(' Password verification IMMEDIATELY after registration: SUCCESS');
                        alert(' Password is working correctly immediately after registration!');
                    } else {
                        console.log(' Password verification IMMEDIATELY after registration: FAILED');
                        alert(' Password does NOT work immediately after registration. Issue is in registration process.');
                    }
                } else {
                    console.error(' Password test failed:', passwordTestData.error);
                    alert('Password test failed: ' + passwordTestData.error);
                }
                
                // Step 3: Test actual login endpoint
                console.log(' Step 3: Testing actual login endpoint...');
                
                const loginResponse = await fetch(`${BACKEND_URL}/api/seller/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        email: testSeller.email, 
                        password: testSeller.password 
                    })
                });
                
                const loginData = await loginResponse.json();
                console.log(' Login response:', loginData);
                
                if (loginData.success) {
                    console.log(' Login endpoint: SUCCESS');
                    alert(' Login endpoint works correctly!');
                } else {
                    console.log(' Login endpoint: FAILED -', loginData.error);
                    alert(' Login endpoint failed: ' + loginData.error);
                }
                
                console.log(' === COMPLETE TEST FINISHED === ');
                
            } catch (error) {
                console.error(' Complete test failed:', error);
                alert('Test failed: ' + error.message);
            }
        }

        // Add to global scope
        window.testRegistrationAndLogin = testRegistrationAndLogin;
        
        // Password migration and reset functions
        async function migrateAllSellerPasswords() {
            console.log(' === MIGRATING ALL SELLER PASSWORDS === ');
            console.log('');
            
            if (!confirm('This will migrate all existing seller passwords to bcrypt hashing. Continue?')) {
                return;
            }
            
            try {
                const adminEmail = prompt('Enter admin email for migration log:', 'admin@example.com');
                if (!adminEmail) return;
                
                console.log(' Starting password migration...');
                
                const response = await fetch(`${BACKEND_URL}/api/admin/migrate-seller-passwords`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ adminEmail })
                });
                
                const data = await response.json();
                console.log(' Migration response:', data);
                
                if (data.success) {
                    const results = data.results;
                    console.log(' Migration completed:', results);
                    alert(` Migration completed!\n\nTotal checked: ${results.totalChecked}\nMigrated: ${results.migrated}\nSkipped: ${results.skipped}\nErrors: ${results.errors}\n\nSee console for details.`);
                } else {
                    console.error(' Migration failed:', data.error);
                    alert(' Migration failed: ' + data.error);
                }
                
            } catch (error) {
                console.error(' Migration error:', error);
                alert('Migration failed: ' + error.message);
            }
        }

        async function checkSellerPasswordStatus() {
            console.log(' === CHECKING SELLER PASSWORD STATUS === ');
            
            const email = prompt('Enter seller email to check:');
            if (!email) return;
            
            try {
                const response = await fetch(`${BACKEND_URL}/api/seller/check-password-status/${encodeURIComponent(email)}`);
                const data = await response.json();
                
                console.log(' Password status:', data);
                
                if (data.success) {
                    const status = data.needsPasswordStatus ? 'NEEDS RESET' : 'SECURE';
                    const hashed = data.isHashed ? 'HASHED' : 'UNHASHED';
                    console.log(` Password Status: ${status} | Hashed: ${hashed}`);
                    alert(`Password Status for ${email}:\n\nStatus: ${status}\nHashed: ${hashed}\n\n${data.message}`);
                } else {
                    console.error(' Status check failed:', data.error);
                    alert('Status check failed: ' + data.error);
                }
                
            } catch (error) {
                console.error(' Status check error:', error);
                alert('Status check failed: ' + error.message);
            }
        }

        async function resetSellerPassword() {
            console.log(' === RESET SELLER PASSWORD === ');
            
            const email = prompt('Enter seller email:');
            const newPassword = prompt('Enter new password (min 6 characters):');
            
            if (!email || !newPassword) return;
            
            if (newPassword.length < 6) {
                alert('Password must be at least 6 characters long.');
                return;
            }
            
            try {
                console.log(' Resetting password for:', email);
                
                const response = await fetch(`${BACKEND_URL}/api/seller/reset-password`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, newPassword })
                });
                
                const data = await response.json();
                console.log(' Password reset response:', data);
                
                if (data.success) {
                    console.log(' Password reset successful');
                    alert(' Password reset successful!\n\n' + data.message + '\n\nThe seller can now login with the new password.');
                } else {
                    console.error(' Password reset failed:', data.error);
                    alert(' Password reset failed: ' + data.error);
                }
                
            } catch (error) {
                console.error(' Password reset error:', error);
                alert('Password reset failed: ' + error.message);
            }
        }

        // Add to global scope
        window.migrateAllSellerPasswords = migrateAllSellerPasswords;
        window.checkSellerPasswordStatus = checkSellerPasswordStatus;
        window.resetSellerPassword = resetSellerPassword;
        
        console.log(' Password management functions added:');
        console.log('- migrateAllSellerPasswords() - Migrate all existing passwords to bcrypt');
        console.log('- checkSellerPasswordStatus() - Check if a seller needs password reset');
        console.log('- resetSellerPassword() - Reset password for a specific seller');
        console.log('Run these functions in browser console to manage existing seller passwords');

        // Seller Homepage Functions
        async function goToSellerHomepage() {
            console.log(' Navigating to Seller Homepage...');
            
            try {
                // Check if seller is authenticated using currentUser
                if (!currentUser || currentUser.role !== 'seller') {
                    console.log(' No authenticated seller found, currentUser:', currentUser);
                    showToast('Please login to access your homepage', 'error');
                    showLoginModal();
                    return;
                }
                
                console.log(' Found authenticated seller:', currentUser.email);
                
                // Load seller homepage data directly using currentUser
                await loadSellerHomepageData(currentUser);
                
                // Show homepage, hide dashboard
                document.getElementById('sellerDashboard').style.display = 'none';
                document.getElementById('sellerHomepage').style.display = 'block';
                
                console.log(' Seller Homepage loaded successfully');
                
            } catch (error) {
                console.error(' Error loading seller homepage:', error);
                showToast('Failed to load homepage. Please try again.', 'error');
            }
        }

        async function checkSellerAuthentication() {
            try {
                // First check if we have current user data
                if (currentUser && currentUser.role === 'seller') {
                    console.log(' Using current seller data:', currentUser.email);
                    return currentUser;
                }
                
                // Check localStorage for cached seller data
                const cachedUser = localStorage.getItem('ecoloopUser');
                if (cachedUser) {
                    const parsedUser = JSON.parse(cachedUser);
                    if (parsedUser && parsedUser.role === 'seller') {
                        console.log(' Found cached seller data:', parsedUser.email);
                        currentUser = parsedUser; // Update global currentUser
                        return currentUser;
                    }
                }
                
                console.log(' No seller authentication found');
                return null;
                
            } catch (error) {
                console.error(' Authentication check failed:', error);
                return null;
            }
        }

        async function loadSellerHomepageData(sellerData) {
            console.log(' Loading seller homepage data...');
            
            try {
                // Update profile information using existing seller data
                const sellerName = sellerData.name || 
                                 (sellerData.firstName && sellerData.lastName ? 
                                  `${sellerData.firstName} ${sellerData.lastName}` : 
                                  sellerData.firstName || 'Seller');
                
                document.getElementById('homepageSellerName').textContent = sellerName;
                document.getElementById('homepageBusinessName').textContent = sellerData.businessName || sellerData.storeName || 'Business Name';
                
                // Update avatar with seller initials
                const initials = sellerName.charAt(0).toUpperCase();
                document.getElementById('homepageSellerAvatar').innerHTML = `<span style="font-size: 48px; color: white;">${initials}</span>`;
                
                // Update status badge
                const statusBadge = document.getElementById('homepageStatusBadge');
                const statusText = document.getElementById('homepageStatusText');
                const approvalStatus = sellerData.approvalStatus || sellerData.status || sellerData.sellerStatus || 'pending';
                
                statusBadge.className = 'status-badge';
                if (approvalStatus === 'approved') {
                    statusBadge.classList.add('approved');
                    statusText.textContent = 'Approved';
                } else if (approvalStatus === 'pending') {
                    statusBadge.classList.add('pending');
                    statusText.textContent = 'Pending Approval';
                } else if (approvalStatus === 'rejected') {
                    statusBadge.classList.add('rejected');
                    statusText.textContent = 'Rejected';
                }
                
                // Load seller statistics (try backend, fallback to defaults)
                await loadSellerStatistics(sellerData.email);
                
                // Load seller notifications (try backend, fallback to defaults)
                await loadSellerNotifications(sellerData.email);
                
                console.log(' Seller homepage data loaded successfully');
                
            } catch (error) {
                console.error(' Error loading homepage data:', error);
                throw error;
            }
        }

        async function loadSellerStatistics(sellerEmail) {
            try {
                console.log(' Loading seller statistics...');
                
                // Fetch seller statistics from backend
                const response = await fetch(`${BACKEND_URL}/api/seller/statistics/${encodeURIComponent(sellerEmail)}`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include'
                });
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.success) {
                        const stats = data.statistics;
                        
                        // Update statistics display
                        document.getElementById('totalProductsCount').textContent = stats.totalProducts || 0;
                        document.getElementById('totalOrdersCount').textContent = stats.totalOrders || 0;
                        document.getElementById('totalRevenueAmount').textContent = `KES ${stats.totalRevenue || 0}`;
                        document.getElementById('averageRating').textContent = (stats.averageRating || 0).toFixed(1);
                        
                        console.log(' Statistics loaded:', stats);
                    }
                } else {
                    // Set default values if endpoint doesn't exist
                    setDefaultStatistics();
                }
                
            } catch (error) {
                console.error(' Error loading statistics:', error);
                // Set default values on error
                setDefaultStatistics();
            }
        }

        function setDefaultStatistics() {
            document.getElementById('totalProductsCount').textContent = '0';
            document.getElementById('totalOrdersCount').textContent = '0';
            document.getElementById('totalRevenueAmount').textContent = 'KES 0';
            document.getElementById('averageRating').textContent = '0.0';
        }

        async function loadSellerNotifications(sellerEmail) {
            try {
                console.log(' Loading seller notifications...');
                
                // Fetch seller notifications from backend
                const response = await fetch(`${BACKEND_URL}/api/seller/notifications/${encodeURIComponent(sellerEmail)}`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include'
                });
                
                const notificationsList = document.getElementById('sellerNotifications');
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.success && data.notifications && data.notifications.length > 0) {
                        displayNotifications(data.notifications);
                    } else {
                        // Show default welcome notification
                        displayDefaultNotifications();
                    }
                } else {
                    // Show default notifications if endpoint doesn't exist
                    displayDefaultNotifications();
                }
                
            } catch (error) {
                console.error(' Error loading notifications:', error);
                // Show default notifications on error
                displayDefaultNotifications();
            }
        }

        function displayNotifications(notifications) {
            const notificationsList = document.getElementById('sellerNotifications');
            notificationsList.innerHTML = '';
            
            notifications.forEach(notification => {
                const notificationElement = createNotificationElement(notification);
                notificationsList.appendChild(notificationElement);
            });
        }

        function displayDefaultNotifications() {
            const notificationsList = document.getElementById('sellerNotifications');
            notificationsList.innerHTML = `
                <div class="notification-item">
                    <div class="notification-icon">
                        <i class="fas fa-info-circle"></i>
                    </div>
                    <div class="notification-content">
                        <h4>Welcome to EcoLoop Seller Portal!</h4>
                        <p>Your seller account has been successfully set up. Start by adding your first product.</p>
                        <span class="notification-time">Just now</span>
                    </div>
                </div>
                <div class="notification-item">
                    <div class="notification-icon">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <div class="notification-content">
                        <h4>Pro Tip</h4>
                        <p>Add high-quality product images and detailed descriptions to attract more customers.</p>
                        <span class="notification-time">2 minutes ago</span>
                    </div>
                </div>
                <div class="notification-item">
                    <div class="notification-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="notification-content">
                        <h4>Security Reminder</h4>
                        <p>Keep your account secure by using a strong password and enabling two-factor authentication.</p>
                        <span class="notification-time">1 hour ago</span>
                    </div>
                </div>
            `;
        }

        function createNotificationElement(notification) {
            const div = document.createElement('div');
            div.className = 'notification-item';
            
            const iconClass = getNotificationIcon(notification.type);
            const timeAgo = getTimeAgo(notification.createdAt);
            
            div.innerHTML = `
                <div class="notification-icon">
                    <i class="fas ${iconClass}"></i>
                </div>
                <div class="notification-content">
                    <h4>${notification.title}</h4>
                    <p>${notification.message}</p>
                    <span class="notification-time">${timeAgo}</span>
                </div>
            `;
            
            return div;
        }

        function getNotificationIcon(type) {
            const icons = {
                'info': 'fa-info-circle',
                'success': 'fa-check-circle',
                'warning': 'fa-exclamation-triangle',
                'error': 'fa-times-circle',
                'order': 'fa-shopping-cart',
                'product': 'fa-box',
                'payment': 'fa-dollar-sign',
                'account': 'fa-user-circle'
            };
            return icons[type] || 'fa-info-circle';
        }

        function getTimeAgo(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffInSeconds = Math.floor((now - date) / 1000);
            
            if (diffInSeconds < 60) return 'Just now';
            if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)} minutes ago`;
            if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)} hours ago`;
            if (diffInSeconds < 604800) return `${Math.floor(diffInSeconds / 86400)} days ago`;
            return date.toLocaleDateString();
        }

        function backToSellerDashboard() {
            console.log(' Returning to Seller Dashboard...');
            
            // Hide homepage, show dashboard
            document.getElementById('sellerHomepage').style.display = 'none';
            document.getElementById('sellerDashboard').style.display = 'block';
            
            // Show dashboard home section
            showDashboardSection('home');
        }

        // Add to global scope
        window.goToSellerHomepage = goToSellerHomepage;
        window.backToSellerDashboard = backToSellerDashboard;
        window.loadSellerHomepageData = loadSellerHomepageData;
        
        console.log(' Seller Homepage functions added:');
        console.log('- goToSellerHomepage() - Navigate to seller homepage');
        console.log('- backToSellerDashboard() - Return to dashboard');
        console.log('- loadSellerHomepageData() - Load seller data into homepage');

        // Unified Website Personalization System
        function updateWebsiteForUserType() {
            console.log(' Updating website for user type:', currentUser?.role);
            
            // Remove existing seller tools first
            removeSellerTools();
            
            if (currentUser && currentUser.role === 'seller' && currentUser.approvalStatus === 'approved') {
                console.log(' Approved seller detected - adding seller tools');
                addSellerTools();
                addSellerPanelsToHomepage();
                
                // Ensure ALL homepage sections are visible for sellers
                showAllHomepageSections();
                
                // Ensure proper scrolling behavior
                ensureProperScrollingForSellers();
            } else {
                console.log(' Regular user or no seller - keeping default website');
                // Keep default website layout - all sections should be visible by default
                showAllHomepageSections();
                
                // Ensure proper scrolling behavior for all users
                ensureProperScrollingForSellers();
            }
        }

        function removeSellerTools() {
            // Remove seller icons from top header
            const existingSellerIcons = document.querySelectorAll('.dynamic-seller-tool');
            existingSellerIcons.forEach(icon => icon.remove());
            
            // Remove seller icons from commerce area
            const existingCommerceSellerIcons = document.querySelectorAll('.dynamic-seller-commerce');
            existingCommerceSellerIcons.forEach(icon => icon.remove());
            
            // Remove seller panels from homepage
            const existingSellerPanels = document.querySelectorAll('.dynamic-seller-panel');
            existingSellerPanels.forEach(panel => panel.remove());
        }

        function addSellerTools() {
            // Add seller tools to top header user actions
            const userActions = document.getElementById('userActions');
            if (userActions) {
                // Find the "Sell" link and insert seller tools before it
                const sellLink = document.getElementById('sellerRegisterLink');
                
                const sellerTools = document.createElement('div');
                sellerTools.className = 'dynamic-seller-tool';
                sellerTools.innerHTML = `
                    <a href="#" onclick="showSellerDashboard(); return false;" class="seller-tool-link">
                        <i class="fas fa-tachometer-alt"></i> Dashboard
                    </a>
                    <a href="#" onclick="showSellerAccountPanel(); return false;" class="seller-tool-link">
                        <i class="fas fa-store"></i> My Account
                    </a>
                    <a href="#" onclick="showProductManager(); return false;" class="seller-tool-link">
                        <i class="fas fa-box"></i> Products
                    </a>
                    <a href="#" onclick="showSellerOrders(); return false;" class="seller-tool-link">
                        <i class="fas fa-shopping-cart"></i> Orders
                    </a>
                    <a href="#" onclick="showUploadProductModal(); return false;" class="seller-tool-link upload-btn">
                        <i class="fas fa-plus-circle"></i> Upload Product
                    </a>
                `;
                
                if (sellLink) {
                    userActions.insertBefore(sellerTools, sellLink);
                } else {
                    userActions.appendChild(sellerTools);
                }
            }
            
            // Add seller tools to commerce icons area
            const commerceIcons = document.querySelector('.commerce-icons');
            if (commerceIcons) {
                const sellerIcon = document.createElement('div');
                sellerIcon.className = 'icon-wrapper dynamic-seller-commerce';
                sellerIcon.onclick = showSellerDashboard;
                sellerIcon.title = 'Go to Seller Dashboard';
                sellerIcon.innerHTML = `
                    <i class="fas fa-store"></i>
                    <span class="badge seller-badge" style="background: #00ffff; color: #000; display: inline-block;"></span>
                `;
                commerceIcons.appendChild(sellerIcon);
            }
            
            // Hide the "Start Selling" button for sellers
            const startSellingBtn = document.getElementById('startSellingBtn');
            if (startSellingBtn) {
                startSellingBtn.style.display = 'none';
            }
            
            // Hide the "Sell" registration link for sellers
            const sellerRegisterLink = document.getElementById('sellerRegisterLink');
            if (sellerRegisterLink) {
                sellerRegisterLink.style.display = 'none';
            }
        }

        function addSellerPanelsToHomepage() {
            // Find the hero section or main content area to add seller panels
            const heroSection = document.querySelector('.hero');
            if (heroSection) {
                // Create seller dashboard panel
                const sellerPanel = document.createElement('div');
                sellerPanel.className = 'dynamic-seller-panel seller-dashboard-panel';
                sellerPanel.innerHTML = `
                    <div class="seller-panel-content">
                        <h3><i class="fas fa-store"></i> Seller Dashboard</h3>
                        <div class="seller-stats-summary">
                            <div class="stat-item">
                                <span class="stat-number" id="sellerProductCount">0</span>
                                <span class="stat-label">Products</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="sellerOrderCount">0</span>
                                <span class="stat-label">Orders</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="sellerRevenueCount">KES 0</span>
                                <span class="stat-label">Revenue</span>
                            </div>
                        </div>
                        <div class="seller-quick-actions">
                            <button class="seller-action-btn" onclick="showSellerDashboard()">
                                <i class="fas fa-tachometer-alt"></i> Full Dashboard
                            </button>
                            <button class="seller-action-btn" onclick="showUploadProductModal()">
                                <i class="fas fa-plus"></i> Add Product
                            </button>
                            <button class="seller-action-btn" onclick="showSellerOrders()">
                                <i class="fas fa-shopping-cart"></i> View Orders
                            </button>
                        </div>
                    </div>
                `;
                
                // Insert after hero content but before products
                const heroContent = heroSection.querySelector('.hero-content');
                if (heroContent) {
                    heroContent.parentNode.insertBefore(sellerPanel, heroContent.nextSibling);
                } else {
                    heroSection.appendChild(sellerPanel);
                }
                
                // Load seller stats into the panel
                loadSellerStatsForPanel();
            }
        }

        function loadSellerStatsForPanel() {
            if (!currentUser || !currentUser.email) return;
            
            // Load seller statistics
            fetch(`${BACKEND_URL}/api/seller/statistics/${encodeURIComponent(currentUser.email)}`)
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        const stats = data.statistics;
                        document.getElementById('sellerProductCount').textContent = stats.totalProducts || 0;
                        document.getElementById('sellerOrderCount').textContent = stats.totalOrders || 0;
                        document.getElementById('sellerRevenueCount').textContent = `KES ${stats.totalRevenue || 0}`;
                    }
                })
                .catch(error => {
                    console.error('Error loading seller stats:', error);
                    // Set default values
                    document.getElementById('sellerProductCount').textContent = '0';
                    document.getElementById('sellerOrderCount').textContent = '0';
                    document.getElementById('sellerRevenueCount').textContent = 'KES 0';
                });
        }

        // Seller tool functions
        function showSellerAccountPanel() {
            console.log(' Showing seller account panel on main website');
            showToast('Seller account panel - Opening account overview...', 'info');
            
            // Create a modal-like panel overlay on the main website
            const existingPanel = document.getElementById('sellerAccountPanel');
            if (existingPanel) {
                existingPanel.remove();
            }
            
            const accountPanel = document.createElement('div');
            accountPanel.id = 'sellerAccountPanel';
            accountPanel.className = 'seller-account-panel-overlay';
            accountPanel.innerHTML = `
                <div class="seller-account-panel">
                    <div class="panel-header">
                        <h2><i class="fas fa-store"></i> Seller Account</h2>
                        <button class="close-panel-btn" onclick="closeSellerAccountPanel()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="panel-content">
                        <div class="account-overview">
                            <div class="account-info">
                                <h3>${currentUser.name || currentUser.firstName || 'Seller'}</h3>
                                <p>${currentUser.businessName || currentUser.storeName || 'Business Name'}</p>
                                <div class="status-badge ${currentUser.approvalStatus}">
                                    ${currentUser.approvalStatus || 'pending'}
                                </div>
                            </div>
                        </div>
                        <div class="account-actions">
                            <button onclick="showSellerDashboard()">
                                <i class="fas fa-tachometer-alt"></i> Dashboard
                            </button>
                            <button onclick="showProductManager()">
                                <i class="fas fa-box"></i> Manage Products
                            </button>
                            <button onclick="showSellerOrders()">
                                <i class="fas fa-shopping-cart"></i> Orders
                            </button>
                            <button onclick="showSellerSettings()">
                                <i class="fas fa-cog"></i> Settings
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(accountPanel);
        }

        function closeSellerAccountPanel() {
            const panel = document.getElementById('sellerAccountPanel');
            if (panel) {
                panel.remove();
            }
        }

        function showProductManager() {
            console.log(' Opening product manager');
            showToast('Product Manager - Opening product management...', 'info');
            // Redirect to seller dashboard with products tab active
            showSellerDashboard();
            // In a real implementation, you'd activate the products tab
        }

        function showSellerOrders() {
            console.log(' Opening seller orders');
            showToast('Orders - Opening order management...', 'info');
            // Redirect to seller dashboard with orders tab active
            showSellerDashboard();
            // In a real implementation, you'd activate the orders tab
        }

        function showUploadProductModal() {
            console.log(' Opening upload product modal');
            showToast('Upload Product - Opening product upload form...', 'info');
            // This would open the add product modal
            if (typeof showAddProductModal === 'function') {
                showAddProductModal();
            } else {
                showToast('Product upload feature coming soon!', 'info');
            }
        }

        function showSellerSettings() {
            console.log(' Opening seller settings');
            showToast('Settings - Opening account settings...', 'info');
            // This would open seller settings
        }

        // Update the "Go to Website" button in seller dashboard
        function goToMainWebsite() {
            console.log(' Going to main website with seller tools activated');
            
            // Hide seller dashboard
            const sellerDashboard = document.getElementById('sellerDashboard');
            if (sellerDashboard) {
                sellerDashboard.style.display = 'none';
            }
            
            // Restore body scrolling
            document.body.style.overflowY = 'auto';
            document.body.style.overflowX = 'auto';
            document.body.style.height = 'auto';
            
            // Show ALL main website sections for sellers
            showAllHomepageSections();
            
            // Ensure seller tools are visible
            updateWebsiteForUserType();
            
            // Scroll to top
            window.scrollTo(0, 0);
            
            showToast('Welcome back to the main website!', 'success');
        }

        // Function to ensure proper scrolling for sellers on main website
        function ensureProperScrollingForSellers() {
            console.log(' Ensuring proper scrolling for sellers on main website');
            
            // Ensure body allows scrolling
            document.body.style.overflowY = 'auto';
            document.body.style.overflowX = 'auto';
            document.body.style.height = 'auto';
            document.body.style.minHeight = '100vh';
            
            // Ensure html element allows scrolling
            document.documentElement.style.overflowY = 'auto';
            document.documentElement.style.overflowX = 'auto';
            document.documentElement.style.height = 'auto';
            
            // Remove any fixed positioning that might block scrolling
            const mainContent = document.querySelector('main') || document.querySelector('.main-content') || document.body;
            if (mainContent) {
                mainContent.style.position = 'relative';
                mainContent.style.height = 'auto';
                mainContent.style.overflowY = 'visible';
            }
            
            // Ensure all homepage sections are visible and scrollable
            const allSections = document.querySelectorAll('section, .hero, .featured-products, .categories, .footer');
            allSections.forEach(section => {
                section.style.position = 'relative';
                section.style.height = 'auto';
                section.style.overflow = 'visible';
            });
            
            // Remove any scroll-blocking styles from containers
            const containers = document.querySelectorAll('.container');
            containers.forEach(container => {
                container.style.overflow = 'visible';
                container.style.height = 'auto';
            });
            
            console.log(' Proper scrolling ensured for sellers');
        }

        // Update the showAllHomepageSections function to include scrolling fixes
        function showAllHomepageSections() {
            console.log(' Showing all homepage sections for seller');
            
            // Show hero section
            const heroSection = document.querySelector('.hero');
            if (heroSection) {
                heroSection.style.display = 'block';
                heroSection.style.position = 'relative';
                heroSection.style.height = 'auto';
            }
            
            // Show main content areas
            const allContainers = document.querySelectorAll('.container');
            allContainers.forEach(container => {
                if (container.parentElement && 
                    (container.parentElement.classList.contains('main-content') ||
                     container.parentElement.classList.contains('featured-products') ||
                     container.parentElement.classList.contains('categories') ||
                     container.parentElement.classList.contains('footer'))) {
                    container.parentElement.style.display = 'block';
                    container.parentElement.style.position = 'relative';
                    container.parentElement.style.height = 'auto';
                    container.parentElement.style.overflow = 'visible';
                }
            });
            
            // Show featured products section
            const featuredProducts = document.querySelector('.featured-products');
            if (featuredProducts) {
                featuredProducts.style.display = 'block';
                featuredProducts.style.position = 'relative';
                featuredProducts.style.height = 'auto';
                featuredProducts.style.overflow = 'visible';
            }
            
            // Show categories section
            const categoriesSection = document.querySelector('.categories');
            if (categoriesSection) {
                categoriesSection.style.display = 'block';
                categoriesSection.style.position = 'relative';
                categoriesSection.style.height = 'auto';
                categoriesSection.style.overflow = 'visible';
            }
            
            // Show footer section
            const footerSection = document.querySelector('.footer');
            if (footerSection) {
                footerSection.style.display = 'block';
                footerSection.style.position = 'relative';
                footerSection.style.height = 'auto';
                footerSection.style.overflow = 'visible';
            }
            
            // Show any other main content sections
            const mainSections = document.querySelectorAll('section:not(.seller-dashboard):not(.unified-seller-homepage)');
            mainSections.forEach(section => {
                section.style.display = 'block';
                section.style.position = 'relative';
                section.style.height = 'auto';
                section.style.overflow = 'visible';
            });
            
            // Ensure proper scrolling
            ensureProperScrollingForSellers();
            
            console.log(' All homepage sections shown with proper scrolling');
        }

        // Update the dashboard "Go to Website" button
        const existingGoToWebsiteBtn = document.querySelector('.dashboard-nav-right .btn-secondary');
        if (existingGoToWebsiteBtn) {
            existingGoToWebsiteBtn.onclick = goToMainWebsite;
            existingGoToWebsiteBtn.textContent = 'Go to Website';
        }

        // Add to global scope
        window.updateWebsiteForUserType = updateWebsiteForUserType;
        window.showSellerAccountPanel = showSellerAccountPanel;
        window.closeSellerAccountPanel = closeSellerAccountPanel;
        window.showProductManager = showProductManager;
        window.showSellerOrders = showSellerOrders;
        window.showUploadProductModal = showUploadProductModal;
        window.showSellerSettings = showSellerSettings;
        window.goToMainWebsite = goToMainWebsite;
        window.showAllHomepageSections = showAllHomepageSections;
        window.ensureProperScrollingForSellers = ensureProperScrollingForSellers;

        // Enhanced Seller Homepage Function - Unified Entry Point
        async function goToSellerHomepage() {
            console.log(' Navigating to Unified Seller Homepage...');
            
            try {
                // Check authentication using existing function
                const sellerData = await checkSellerAuthentication();
                
                if (!sellerData) {
                    console.log(' No authenticated seller found');
                    showToast('Please login to access your seller account', 'error');
                    showLoginModal();
                    return;
                }
                
                console.log(' Authenticated seller found:', sellerData.email);
                
                // Hide all other sections
                hideAllSections();
                
                // Show seller homepage
                await showUnifiedSellerHomepage(sellerData);
                
                console.log(' Unified Seller Homepage loaded successfully');
                
            } catch (error) {
                console.error(' Error loading seller homepage:', error);
                showToast('Failed to load seller account. Please try again.', 'error');
            }
        }

        function hideAllSections() {
            // Hide main website sections
            const heroSection = document.querySelector('.hero');
            if (heroSection) heroSection.style.display = 'none';
            
            const mainContent = document.querySelector('.container');
            if (mainContent && mainContent.parentElement.classList.contains('main-content')) {
                mainContent.parentElement.style.display = 'none';
            }
            
            // Hide seller dashboard
            const sellerDashboard = document.getElementById('sellerDashboard');
            if (sellerDashboard) sellerDashboard.style.display = 'none';
            
            // Hide any modals
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => modal.style.display = 'none');
        }

        async function showUnifiedSellerHomepage(sellerData) {
            console.log(' Loading Unified Seller Homepage for:', sellerData.email);
            
            // Check if unified homepage exists, create if not
            let unifiedHomepage = document.getElementById('unifiedSellerHomepage');
            
            if (!unifiedHomepage) {
                unifiedHomepage = createUnifiedSellerHomepage();
                document.body.appendChild(unifiedHomepage);
            }
            
            // Load seller data into homepage
            await loadUnifiedSellerData(sellerData);
            
            // Show homepage
            unifiedHomepage.style.display = 'block';
            
            // Add to history for back button
            history.pushState({sellerHomepage: true}, 'Seller Account', '/seller/home');
        }

        function createUnifiedSellerHomepage() {
            const homepage = document.createElement('div');
            homepage.id = 'unifiedSellerHomepage';
            homepage.className = 'unified-seller-homepage';
            homepage.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100vh;
                background: linear-gradient(135deg, #0a4f3a 0%, #0d6b4f 50%, #0a4f3a 100%);
                z-index: 1000;
                overflow-y: auto;
                display: none;
            `;
            
            homepage.innerHTML = `
                <div class="seller-homepage-header">
                    <div class="container">
                        <div class="homepage-nav">
                            <button class="back-btn" onclick="closeUnifiedSellerHomepage()">
                                <i class="fas fa-arrow-left"></i> Back to Website
                            </button>
                            <div class="homepage-logo">
                                <span class="logo-text"> EcoLoop Seller Portal</span>
                            </div>
                            <button class="dashboard-btn" onclick="showSellerDashboard()">
                                <i class="fas fa-tachometer-alt"></i> Dashboard
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="seller-homepage-content">
                    <div class="container">
                        <!-- Profile Section -->
                        <div class="seller-profile-section">
                            <div class="profile-header">
                                <div class="profile-avatar" id="unifiedSellerAvatar">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div class="profile-info">
                                    <h1 id="unifiedSellerName">Seller Name</h1>
                                    <p id="unifiedBusinessName">Business Name</p>
                                    <div class="status-badge" id="unifiedStatusBadge">
                                        <span id="unifiedStatusText">Status</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Quick Stats -->
                        <div class="seller-stats-grid">
                            <div class="stat-card">
                                <i class="fas fa-box"></i>
                                <h3 id="unifiedTotalProducts">0</h3>
                                <p>Total Products</p>
                            </div>
                            <div class="stat-card">
                                <i class="fas fa-shopping-cart"></i>
                                <h3 id="unifiedTotalOrders">0</h3>
                                <p>Total Orders</p>
                            </div>
                            <div class="stat-card">
                                <i class="fas fa-dollar-sign"></i>
                                <h3 id="unifiedTotalRevenue">KES 0</h3>
                                <p>Total Revenue</p>
                            </div>
                            <div class="stat-card">
                                <i class="fas fa-star"></i>
                                <h3 id="unifiedAverageRating">0.0</h3>
                                <p>Average Rating</p>
                            </div>
                        </div>
                        
                        <!-- Quick Actions -->
                        <div class="seller-actions-grid">
                            <div class="action-card" onclick="showSellerDashboard()">
                                <i class="fas fa-tachometer-alt"></i>
                                <h3>Dashboard</h3>
                                <p>View detailed analytics and manage your store</p>
                            </div>
                            <div class="action-card" onclick="showAddProductModal()">
                                <i class="fas fa-plus-circle"></i>
                                <h3>Add Product</h3>
                                <p>List new products for sale</p>
                            </div>
                            <div class="action-card" onclick="showManageProducts()">
                                <i class="fas fa-boxes"></i>
                                <h3>Manage Products</h3>
                                <p>Edit, delete, or update existing products</p>
                            </div>
                            <div class="action-card" onclick="showSellerSettings()">
                                <i class="fas fa-cog"></i>
                                <h3>Settings</h3>
                                <p>Manage account settings and preferences</p>
                            </div>
                        </div>
                        
                        <!-- Notifications -->
                        <div class="seller-notifications-section">
                            <h2>Notifications</h2>
                            <div class="notifications-list" id="unifiedSellerNotifications">
                                <!-- Notifications will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            return homepage;
        }

        async function loadUnifiedSellerData(sellerData) {
            console.log(' Loading unified seller data...');
            
            try {
                // Update profile information
                const sellerName = sellerData.name || 
                                 (sellerData.firstName && sellerData.lastName ? 
                                  `${sellerData.firstName} ${sellerData.lastName}` : 
                                  sellerData.firstName || 'Seller');
                
                document.getElementById('unifiedSellerName').textContent = sellerName;
                document.getElementById('unifiedBusinessName').textContent = sellerData.businessName || sellerData.storeName || 'Business Name';
                
                // Update avatar with seller initials
                const initials = sellerName.charAt(0).toUpperCase();
                document.getElementById('unifiedSellerAvatar').innerHTML = `<span style="font-size: 48px; color: white;">${initials}</span>`;
                
                // Update status badge
                const statusBadge = document.getElementById('unifiedStatusBadge');
                const statusText = document.getElementById('unifiedStatusText');
                const approvalStatus = sellerData.approvalStatus || sellerData.status || sellerData.sellerStatus || 'pending';
                
                statusBadge.className = 'status-badge';
                if (approvalStatus === 'approved') {
                    statusBadge.classList.add('approved');
                    statusText.textContent = 'Approved';
                } else if (approvalStatus === 'pending') {
                    statusBadge.classList.add('pending');
                    statusText.textContent = 'Pending Approval';
                } else if (approvalStatus === 'rejected') {
                    statusBadge.classList.add('rejected');
                    statusText.textContent = 'Rejected';
                }
                
                // Load statistics and notifications
                await loadSellerStatistics(sellerData.email);
                await loadSellerNotifications(sellerData.email);
                
                // Update unified homepage stats
                updateUnifiedHomepageStats();
                
                console.log(' Unified seller data loaded successfully');
                
            } catch (error) {
                console.error(' Error loading unified seller data:', error);
                throw error;
            }
        }

        function updateUnifiedHomepageStats() {
            // Update unified homepage stats from dashboard stats
            const totalProducts = document.getElementById('totalProductsCount')?.textContent || '0';
            const totalOrders = document.getElementById('totalOrdersCount')?.textContent || '0';
            const totalRevenue = document.getElementById('totalRevenueAmount')?.textContent || 'KES 0';
            const averageRating = document.getElementById('averageRating')?.textContent || '0.0';
            
            const unifiedTotalProducts = document.getElementById('unifiedTotalProducts');
            const unifiedTotalOrders = document.getElementById('unifiedTotalOrders');
            const unifiedTotalRevenue = document.getElementById('unifiedTotalRevenue');
            const unifiedAverageRating = document.getElementById('unifiedAverageRating');
            
            if (unifiedTotalProducts) unifiedTotalProducts.textContent = totalProducts;
            if (unifiedTotalOrders) unifiedTotalOrders.textContent = totalOrders;
            if (unifiedTotalRevenue) unifiedTotalRevenue.textContent = totalRevenue;
            if (unifiedAverageRating) unifiedAverageRating.textContent = averageRating;
            
            // Update notifications
            const dashboardNotifications = document.getElementById('sellerNotifications')?.innerHTML;
            const unifiedNotifications = document.getElementById('unifiedSellerNotifications');
            if (unifiedNotifications && dashboardNotifications) {
                unifiedNotifications.innerHTML = dashboardNotifications;
            }
        }

        function closeUnifiedSellerHomepage() {
            console.log(' Closing Unified Seller Homepage');
            
            // Hide unified homepage
            const unifiedHomepage = document.getElementById('unifiedSellerHomepage');
            if (unifiedHomepage) unifiedHomepage.style.display = 'none';
            
            // Show main website sections
            const heroSection = document.querySelector('.hero');
            if (heroSection) heroSection.style.display = 'block';
            
            // Update history
            history.back();
        }

        // Handle browser back button
        window.addEventListener('popstate', function(event) {
            if (event.state && event.state.sellerHomepage) {
                closeUnifiedSellerHomepage();
            }
        });

        // Comprehensive Unified Website System Debug Function
        function debugUnifiedWebsiteSystem() {
            console.log(' === UNIFIED WEBSITE SYSTEM DEBUG === ');
            console.log('');
            
            // 1. Check Authentication State
            console.log(' AUTHENTICATION STATE:');
            console.log('currentUser:', currentUser);
            console.log('currentUser.role:', currentUser?.role);
            console.log('currentUser.approvalStatus:', currentUser?.approvalStatus);
            console.log('localStorage ecoloopUser:', localStorage.getItem('ecoloopUser'));
            console.log('');
            
            // 2. Check Dynamic Seller Tools
            console.log(' DYNAMIC SELLER TOOLS:');
            const sellerTools = document.querySelectorAll('.dynamic-seller-tool');
            const commerceSellerIcons = document.querySelectorAll('.dynamic-seller-commerce');
            const sellerPanels = document.querySelectorAll('.dynamic-seller-panel');
            
            console.log('Header seller tools:', sellerTools.length);
            sellerTools.forEach((tool, index) => {
                console.log(`  Tool ${index + 1}:`, {
                    display: tool.style.display,
                    html: tool.innerHTML.substring(0, 100) + '...'
                });
            });
            
            console.log('Commerce seller icons:', commerceSellerIcons.length);
            commerceSellerIcons.forEach((icon, index) => {
                console.log(`  Icon ${index + 1}:`, {
                    display: icon.style.display,
                    onclick: icon.onclick ? 'function set' : 'no function'
                });
            });
            
            console.log('Homepage seller panels:', sellerPanels.length);
            sellerPanels.forEach((panel, index) => {
                console.log(`  Panel ${index + 1}:`, {
                    display: panel.style.display,
                    className: panel.className
                });
            });
            console.log('');
            
            // 3. Check UI Elements
            console.log(' UI ELEMENTS STATUS:');
            const sellerRegisterLink = document.getElementById('sellerRegisterLink');
            const startSellingBtn = document.getElementById('startSellingBtn');
            const loginLink = document.querySelector('a[href*="showLoginModal"]');
            const registerLink = document.querySelector('a[href*="showRegisterModal"]');
            
            console.log('sellerRegisterLink:', sellerRegisterLink ? {
                display: sellerRegisterLink.style.display
            } : 'NOT FOUND');
            
            console.log('startSellingBtn:', startSellingBtn ? {
                display: startSellingBtn.style.display
            } : 'NOT FOUND');
            
            console.log('loginLink:', loginLink ? {
                display: loginLink.style.display
            } : 'NOT FOUND');
            
            console.log('registerLink:', registerLink ? {
                display: registerLink.style.display
            } : 'NOT FOUND');
            console.log('');
            
            // 4. Check Dashboard Elements
            console.log(' DASHBOARD ELEMENTS:');
            const dashboardHomeIcon = document.querySelector('.home-icon-btn');
            const sellerDashboard = document.getElementById('sellerDashboard');
            const goToWebsiteBtn = document.querySelector('.dashboard-nav-right .btn-secondary');
            
            console.log('dashboardHomeIcon:', dashboardHomeIcon ? {
                onclick: dashboardHomeIcon.onclick,
                title: dashboardHomeIcon.title
            } : 'NOT FOUND');
            
            console.log('sellerDashboard:', sellerDashboard ? {
                display: sellerDashboard.style.display
            } : 'NOT FOUND');
            
            console.log('goToWebsiteBtn:', goToWebsiteBtn ? {
                onclick: goToWebsiteBtn.onclick,
                text: goToWebsiteBtn.textContent
            } : 'NOT FOUND');
            console.log('');
            
            // 5. Test Functions
            console.log(' FUNCTION TESTS:');
            
            // Test website personalization
            console.log('Testing updateWebsiteForUserType()...');
            updateWebsiteForUserType();
            console.log(' updateWebsiteForUserType() executed');
            console.log('');
            
            // 6. Expected Behavior
            console.log(' EXPECTED BEHAVIOR:');
            if (currentUser && currentUser.role === 'seller' && currentUser.approvalStatus === 'approved') {
                console.log(' APPROVED SELLER LOGGED IN - Should see:');
                console.log('  - Header seller tools: VISIBLE (Dashboard, My Account, Products, Orders, Upload Product)');
                console.log('  - Commerce seller icon: VISIBLE (store icon with  badge)');
                console.log('  - Homepage seller panels: VISIBLE (dashboard stats panel)');
                console.log('  - sellerRegisterLink: HIDDEN');
                console.log('  - startSellingBtn: HIDDEN');
                console.log('  - loginLink: HIDDEN');
                console.log('  - registerLink: HIDDEN');
                
                // Test seller functions
                console.log(' Testing seller functions...');
                console.log('- showSellerAccountPanel()');
                console.log('- showProductManager()');
                console.log('- showSellerOrders()');
                console.log('- showUploadProductModal()');
                console.log('- goToMainWebsite()');
                
            } else if (currentUser) {
                console.log(' USER LOGGED IN (NOT APPROVED SELLER) - Should see:');
                console.log('  - Header seller tools: HIDDEN');
                console.log('  - Commerce seller icon: HIDDEN');
                console.log('  - Homepage seller panels: HIDDEN');
                console.log('  - sellerRegisterLink: VISIBLE');
                console.log('  - startSellingBtn: VISIBLE');
                console.log('  - loginLink: HIDDEN');
                console.log('  - registerLink: HIDDEN');
            } else {
                console.log(' NO USER LOGGED IN - Should see:');
                console.log('  - Header seller tools: HIDDEN');
                console.log('  - Commerce seller icon: HIDDEN');
                console.log('  - Homepage seller panels: HIDDEN');
                console.log('  - sellerRegisterLink: VISIBLE');
                console.log('  - startSellingBtn: VISIBLE');
                console.log('  - loginLink: VISIBLE');
                console.log('  - registerLink: VISIBLE');
            }
            
            console.log('');
            console.log(' ISSUES & FIXES:');
            console.log('If seller tools are not showing for approved sellers:');
            console.log('1. Check if currentUser.role === "seller" AND currentUser.approvalStatus === "approved"');
            console.log('2. Check if updateWebsiteForUserType() is being called');
            console.log('3. Check if element selectors are correct');
            console.log('4. Check CSS display properties');
            console.log('5. Check localStorage persistence');
            console.log('');
            console.log(' DEBUG COMPLETE!');
        }

        // Comprehensive Homepage Visibility Test Function
        function testHomepageVisibilityForSellers() {
            console.log(' === HOMEPAGE VISIBILITY TEST FOR SELLERS === ');
            console.log('');
            
            // 1. Check Authentication State
            console.log(' AUTHENTICATION STATE:');
            console.log('currentUser:', currentUser);
            console.log('currentUser.role:', currentUser?.role);
            console.log('currentUser.approvalStatus:', currentUser?.approvalStatus);
            console.log('');
            
            // 2. Check Homepage Sections Visibility
            console.log(' HOMEPAGE SECTIONS VISIBILITY:');
            
            const sections = [
                { name: 'Hero Section', selector: '.hero' },
                { name: 'Featured Products', selector: '.featured-products' },
                { name: 'Categories', selector: '.categories' },
                { name: 'Footer', selector: '.footer' },
                { name: 'Main Content', selector: '.main-content' },
                { name: 'All Sections', selector: 'section:not(.seller-dashboard):not(.unified-seller-homepage)' }
            ];
            
            sections.forEach(section => {
                const element = document.querySelector(section.selector);
                const isVisible = element && element.style.display !== 'none';
                console.log(`${section.name}:`, isVisible ? ' VISIBLE' : ' HIDDEN');
                if (element) {
                    console.log(`  - Display: ${element.style.display || 'default'}`);
                    console.log(`  - Found: ${!!element}`);
                }
            });
            console.log('');
            
            // 3. Check Seller Tools
            console.log(' SELLER TOOLS STATUS:');
            const sellerTools = document.querySelectorAll('.dynamic-seller-tool');
            const commerceSellerIcons = document.querySelectorAll('.dynamic-seller-commerce');
            const sellerPanels = document.querySelectorAll('.dynamic-seller-panel');
            
            console.log('Header seller tools:', sellerTools.length > 0 ? ' VISIBLE' : ' HIDDEN');
            console.log('Commerce seller icons:', commerceSellerIcons.length > 0 ? ' VISIBLE' : ' HIDDEN');
            console.log('Homepage seller panels:', sellerPanels.length > 0 ? ' VISIBLE' : ' HIDDEN');
            console.log('');
            
            // 4. Test Functions
            console.log(' TESTING FUNCTIONS:');
            
            // Test homepage visibility
            console.log('Testing showAllHomepageSections()...');
            showAllHomepageSections();
            console.log(' showAllHomepageSections() executed');
            
            // Test website personalization
            console.log('Testing updateWebsiteForUserType()...');
            updateWebsiteForUserType();
            console.log(' updateWebsiteForUserType() executed');
            console.log('');
            
            // 5. Expected Behavior
            console.log(' EXPECTED BEHAVIOR:');
            if (currentUser && currentUser.role === 'seller' && currentUser.approvalStatus === 'approved') {
                console.log(' APPROVED SELLER LOGGED IN - Should see:');
                console.log('  - Hero Section: VISIBLE');
                console.log('  - Featured Products: VISIBLE');
                console.log('  - Categories: VISIBLE');
                console.log('  - Footer: VISIBLE');
                console.log('  - All Main Content: VISIBLE');
                console.log('  - Seller Tools: VISIBLE (Dashboard, My Account, Products, Orders, Upload Product)');
                console.log('  - Seller Dashboard Panel: VISIBLE (on homepage)');
                
                // Test seller functions
                console.log(' Testing seller functions...');
                console.log('- showSellerAccountPanel()');
                console.log('- showProductManager()');
                console.log('- showSellerOrders()');
                console.log('- showUploadProductModal()');
                console.log('- goToMainWebsite()');
                
            } else {
                console.log(' REGULAR USER OR NO SELLER - Should see:');
                console.log('  - Hero Section: VISIBLE');
                console.log('  - Featured Products: VISIBLE');
                console.log('  - Categories: VISIBLE');
                console.log('  - Footer: VISIBLE');
                console.log('  - All Main Content: VISIBLE');
                console.log('  - Seller Tools: HIDDEN');
                console.log('  - Seller Dashboard Panel: HIDDEN');
            }
            
            console.log('');
            console.log(' ISSUES & FIXES:');
            console.log('If homepage sections are not visible for sellers:');
            console.log('1. Run showAllHomepageSections() manually');
            console.log('2. Check if CSS display properties are set correctly');
            console.log('3. Verify element selectors are correct');
            console.log('4. Check if there are conflicting styles');
            console.log('5. Ensure no functions are hiding sections');
            console.log('');
            console.log(' VISIBILITY TEST COMPLETE!');
        }

        // Comprehensive Scrolling Test Function for Sellers
        function testScrollingForSellers() {
            console.log(' === SCROLLING TEST FOR SELLERS === ');
            console.log('');
            
            // 1. Check Body Scrolling Properties
            console.log(' BODY SCROLLING PROPERTIES:');
            console.log('body.style.overflowY:', document.body.style.overflowY);
            console.log('body.style.overflowX:', document.body.style.overflowX);
            console.log('body.style.height:', document.body.style.height);
            console.log('body.style.minHeight:', document.body.style.minHeight);
            console.log('body.scrollHeight:', document.body.scrollHeight);
            console.log('body.clientHeight:', document.body.clientHeight);
            console.log('window.innerHeight:', window.innerHeight);
            console.log('');
            
            // 2. Check HTML Element Properties
            console.log(' HTML ELEMENT PROPERTIES:');
            console.log('document.documentElement.style.overflowY:', document.documentElement.style.overflowY);
            console.log('document.documentElement.style.overflowX:', document.documentElement.style.overflowX);
            console.log('document.documentElement.style.height:', document.documentElement.style.height);
            console.log('document.documentElement.scrollHeight:', document.documentElement.scrollHeight);
            console.log('');
            
            // 3. Check Homepage Sections
            console.log(' HOMEPAGE SECTIONS STATUS:');
            const sections = [
                { name: 'Hero Section', selector: '.hero' },
                { name: 'Featured Products', selector: '.featured-products' },
                { name: 'Categories', selector: '.categories' },
                { name: 'Footer', selector: '.footer' }
            ];
            
            sections.forEach(section => {
                const element = document.querySelector(section.selector);
                if (element) {
                    console.log(`${section.name}:`);
                    console.log(`  - Display: ${element.style.display || 'default'}`);
                    console.log(`  - Position: ${element.style.position || 'default'}`);
                    console.log(`  - Height: ${element.style.height || 'default'}`);
                    console.log(`  - Overflow: ${element.style.overflow || 'default'}`);
                    console.log(`  - OffsetTop: ${element.offsetTop}`);
                    console.log(`  - ScrollHeight: ${element.scrollHeight}`);
                } else {
                    console.log(`${section.name}: NOT FOUND`);
                }
            });
            console.log('');
            
            // 4. Test Scrolling Functions
            console.log(' TESTING SCROLLING FUNCTIONS:');
            
            // Test scrolling fixes
            console.log('Testing ensureProperScrollingForSellers()...');
            ensureProperScrollingForSellers();
            console.log(' ensureProperScrollingForSellers() executed');
            
            // Test homepage sections
            console.log('Testing showAllHomepageSections()...');
            showAllHomepageSections();
            console.log(' showAllHomepageSections() executed');
            
            // Test website personalization
            console.log('Testing updateWebsiteForUserType()...');
            updateWebsiteForUserType();
            console.log(' updateWebsiteForUserType() executed');
            console.log('');
            
            // 5. Test Actual Scrolling
            console.log(' TESTING ACTUAL SCROLLING:');
            
            // Get page dimensions
            const pageHeight = document.documentElement.scrollHeight;
            const viewportHeight = window.innerHeight;
            const scrollableHeight = pageHeight - viewportHeight;
            
            console.log('Page Dimensions:');
            console.log(`  - Total page height: ${pageHeight}px`);
            console.log(`  - Viewport height: ${viewportHeight}px`);
            console.log(`  - Scrollable height: ${scrollableHeight}px`);
            console.log(`  - Can scroll: ${scrollableHeight > 0 ? 'YES' : 'NO'}`);
            
            if (scrollableHeight > 0) {
                console.log(' Page is scrollable');
                
                // Test scrolling to different sections
                console.log('Testing scroll to featured products...');
                const featuredProducts = document.querySelector('.featured-products');
                if (featuredProducts) {
                    featuredProducts.scrollIntoView({ behavior: 'smooth' });
                    setTimeout(() => {
                        console.log(' Scrolled to featured products');
                        
                        console.log('Testing scroll to footer...');
                        const footer = document.querySelector('.footer');
                        if (footer) {
                            footer.scrollIntoView({ behavior: 'smooth' });
                            setTimeout(() => {
                                console.log(' Scrolled to footer');
                                
                                // Scroll back to top
                                window.scrollTo({ top: 0, behavior: 'smooth' });
                                setTimeout(() => {
                                    console.log(' Scrolled back to top');
                                }, 1000);
                            }, 1000);
                        }
                    }, 1000);
                }
            } else {
                console.log(' Page is NOT scrollable - checking for issues...');
                
                // Check for scroll-blocking elements
                const fixedElements = document.querySelectorAll('*');
                let blockingElements = [];
                
                fixedElements.forEach(el => {
                    const style = window.getComputedStyle(el);
                    if (style.position === 'fixed' && style.height === '100vh') {
                        blockingElements.push({
                            element: el.tagName + (el.className ? '.' + el.className : ''),
                            zIndex: style.zIndex
                        });
                    }
                });
                
                if (blockingElements.length > 0) {
                    console.log('Found potential scroll-blocking elements:');
                    blockingElements.forEach(el => {
                        console.log(`  - ${el.element} (z-index: ${el.zIndex})`);
                    });
                }
            }
            
            console.log('');
            console.log(' EXPECTED BEHAVIOR:');
            console.log('For sellers on main website:');
            console.log('  - Body should have overflow-y: auto');
            console.log('  - All sections should be visible and scrollable');
            console.log('  - Page should scroll smoothly to featured products');
            console.log('  - Page should scroll smoothly to footer');
            console.log('  - All animations and interactions should work');
            console.log('');
            console.log(' ISSUES & FIXES:');
            console.log('If scrolling is not working:');
            console.log('1. Run ensureProperScrollingForSellers() manually');
            console.log('2. Check for elements with position: fixed and height: 100vh');
            console.log('3. Verify body and html overflow properties');
            console.log('4. Check if any JavaScript is setting overflow: hidden');
            console.log('');
            console.log(' SCROLLING TEST COMPLETE!');
        }

        // Add to global scope
        window.testHomepageVisibilityForSellers = testHomepageVisibilityForSellers;
        window.testScrollingForSellers = testScrollingForSellers;
        
        console.log(' Scrolling Test function added:');
        console.log('- testScrollingForSellers() - Complete scrolling diagnosis for sellers');
        
        console.log(' Homepage Visibility Test function added:');
        console.log('- testHomepageVisibilityForSellers() - Complete homepage visibility diagnosis');
        
        console.log(' Unified Website System Debug function added:');
        console.log('- debugUnifiedWebsiteSystem() - Complete unified system diagnosis');

        // Comprehensive Unified Seller System Debug Function
        function debugUnifiedSellerSystem() {
            console.log(' === UNIFIED SELLER SYSTEM DEBUG === ');
            console.log('');
            
            // 1. Check Authentication State
            console.log(' AUTHENTICATION STATE:');
            console.log('currentUser:', currentUser);
            console.log('currentUser.role:', currentUser?.role);
            console.log('currentUser.email:', currentUser?.email);
            console.log('currentUser.approvalStatus:', currentUser?.approvalStatus);
            console.log('localStorage ecoloopUser:', localStorage.getItem('ecoloopUser'));
            console.log('');
            
            // 2. Check UI Elements
            console.log(' UI ELEMENTS STATUS:');
            const sellerIcon = document.getElementById('sellerIcon');
            const mainSellerIcon = document.getElementById('mainSellerIcon');
            const sellerBadge = document.getElementById('sellerBadge');
            const sellerRegisterLink = document.getElementById('sellerRegisterLink');
            const startSellingBtn = document.getElementById('startSellingBtn');
            const loginLink = document.querySelector('a[href*="showLoginModal"]');
            const registerLink = document.querySelector('a[href*="showRegisterModal"]');
            
            console.log('sellerIcon (top header):', sellerIcon ? {
                display: sellerIcon.style.display,
                html: sellerIcon.innerHTML
            } : 'NOT FOUND');
            
            console.log('mainSellerIcon (commerce icons):', mainSellerIcon ? {
                display: mainSellerIcon.style.display,
                html: mainSellerIcon.innerHTML
            } : 'NOT FOUND');
            
            console.log('sellerBadge:', sellerBadge ? {
                display: sellerBadge.style.display,
                text: sellerBadge.textContent
            } : 'NOT FOUND');
            
            console.log('sellerRegisterLink:', sellerRegisterLink ? {
                display: sellerRegisterLink.style.display
            } : 'NOT FOUND');
            
            console.log('startSellingBtn:', startSellingBtn ? {
                display: startSellingBtn.style.display
            } : 'NOT FOUND');
            
            console.log('loginLink:', loginLink ? {
                display: loginLink.style.display
            } : 'NOT FOUND');
            
            console.log('registerLink:', registerLink ? {
                display: registerLink.style.display
            } : 'NOT FOUND');
            console.log('');
            
            // 3. Check Dashboard Elements
            console.log(' DASHBOARD ELEMENTS:');
            const dashboardHomeIcon = document.querySelector('.home-icon-btn');
            const sellerDashboard = document.getElementById('sellerDashboard');
            const unifiedHomepage = document.getElementById('unifiedSellerHomepage');
            
            console.log('dashboardHomeIcon:', dashboardHomeIcon ? {
                onclick: dashboardHomeIcon.onclick,
                title: dashboardHomeIcon.title
            } : 'NOT FOUND');
            
            console.log('sellerDashboard:', sellerDashboard ? {
                display: sellerDashboard.style.display
            } : 'NOT FOUND');
            
            console.log('unifiedHomepage:', unifiedHomepage ? {
                display: unifiedHomepage.style.display,
                hasChildren: unifiedHomepage.children.length > 0
            } : 'NOT FOUND');
            console.log('');
            
            // 4. Test Functions
            console.log(' FUNCTION TESTS:');
            
            // Test authentication check
            console.log('Testing checkSellerAuthentication()...');
            checkSellerAuthentication().then(result => {
                console.log(' checkSellerAuthentication result:', result);
            }).catch(error => {
                console.log(' checkSellerAuthentication error:', error);
            });
            
            // Test UI update
            console.log('Testing updateAuthUI()...');
            updateAuthUI();
            console.log(' updateAuthUI() executed');
            console.log('');
            
            // 5. Expected Behavior
            console.log(' EXPECTED BEHAVIOR:');
            if (currentUser && currentUser.role === 'seller') {
                console.log(' SELLER LOGGED IN - Should see:');
                console.log('  - sellerIcon: visible (top header)');
                console.log('  - mainSellerIcon: visible (commerce icons)');
                console.log('  - sellerBadge: visible with ');
                console.log('  - sellerRegisterLink: HIDDEN');
                console.log('  - startSellingBtn: HIDDEN');
                console.log('  - loginLink: HIDDEN');
                console.log('  - registerLink: HIDDEN');
                
                // Test homepage navigation
                console.log(' Testing homepage navigation...');
                goToSellerHomepage();
                
            } else if (currentUser) {
                console.log(' USER LOGGED IN (NOT SELLER) - Should see:');
                console.log('  - sellerIcon: HIDDEN');
                console.log('  - mainSellerIcon: HIDDEN');
                console.log('  - sellerBadge: HIDDEN');
                console.log('  - sellerRegisterLink: visible');
                console.log('  - startSellingBtn: visible');
                console.log('  - loginLink: HIDDEN');
                console.log('  - registerLink: HIDDEN');
            } else {
                console.log(' NO USER LOGGED IN - Should see:');
                console.log('  - sellerIcon: HIDDEN');
                console.log('  - mainSellerIcon: HIDDEN');
                console.log('  - sellerBadge: HIDDEN');
                console.log('  - sellerRegisterLink: visible');
                console.log('  - startSellingBtn: visible');
                console.log('  - loginLink: visible');
                console.log('  - registerLink: visible');
            }
            
            console.log('');
            console.log(' ISSUES & FIXES:');
            console.log('If seller icons are not showing for logged-in sellers:');
            console.log('1. Check if currentUser.role === "seller"');
            console.log('2. Check if updateAuthUI() is being called');
            console.log('3. Check if element IDs are correct');
            console.log('4. Check CSS display properties');
            console.log('5. Check localStorage persistence');
            console.log('');
            console.log(' DEBUG COMPLETE!');
        }

        // Add to global scope
        window.debugUnifiedSellerSystem = debugUnifiedSellerSystem;
        
        console.log(' Unified Seller System Debug function added:');
        console.log('- debugUnifiedSellerSystem() - Complete system diagnosis');

        function setButtonLoading(buttonId, loading) {
            const button = document.getElementById(buttonId);
            const buttonText = document.getElementById(buttonId.replace('Btn', 'BtnText'));
            
            if (loading) {
                button.disabled = true;
                buttonText.innerHTML = '<div class="spinner"></div>Processing...';
            } else {
                button.disabled = false;
                buttonText.textContent = buttonText.textContent.replace('Processing...', '').replace('<div class="spinner"></div>', '');
            }
        }

        function switchModal(fromModal, toModal) {
            closeModal(fromModal);
            setTimeout(() => {
                if (toModal === 'registerModal') showRegisterModal();
                else if (toModal === 'sellerRegisterModal') showSellerRegisterModal();
                else if (toModal === 'loginModal') showLoginModal();
            }, 300);
        }

        function clearFormErrors(modalId) {
            const modal = document.getElementById(modalId);
            const errorElements = modal.querySelectorAll('.error');
            errorElements.forEach(element => element.textContent = '');
        }

        function setButtonLoading(buttonId, loading) {
            const button = document.getElementById(buttonId);
            const buttonText = document.getElementById(buttonId.replace('Btn', 'BtnText'));
            
            if (loading) {
                button.disabled = true;
                buttonText.innerHTML = '<div class="spinner"></div>Processing...';
            } else {
                button.disabled = false;
                buttonText.textContent = buttonText.textContent.replace('Processing...', '').replace('<div class="spinner"></div>', '');
            }
        }

        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function validatePhone(phone) {
            const re = /^[\d\s\-\+\(\)]+$/;
            return re.test(phone) && phone.length >= 10;
        }

        // Form handlers
        async function handleLogin(event) {
            event.preventDefault();
            clearFormErrors('loginModal');

            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const rememberMe = document.getElementById('rememberMe').checked;
            const role = document.querySelector('input[name="loginRole"]:checked').value;

            let isValid = true;

            if (!validateEmail(email)) {
                document.getElementById('loginEmailError').textContent = 'Please enter a valid email';
                isValid = false;
            }

            if (password.length < 6) {
                document.getElementById('loginPasswordError').textContent = 'Password must be at least 6 characters';
                isValid = false;
            }

            if (!isValid) return;

            setButtonLoading('loginBtn', true);

            try {
                let endpoint, requestBody;
                
                if (role === 'seller') {
                    // Use dedicated seller login endpoint
                    endpoint = `${BACKEND_URL}/api/seller/login`;
                    requestBody = {
                        email,
                        password
                    };
                    console.log(' Attempting seller login:', { endpoint, email });
                } else {
                    // Use unified login endpoint for users and admins
                    endpoint = `${BACKEND_URL}/api/user/login`;
                    requestBody = {
                        email,
                        password,
                        role,
                        rememberMe
                    };
                    console.log(' Attempting user/admin login:', { endpoint, email, role });
                }
                
                const response = await fetch(endpoint, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include',
                    body: JSON.stringify(requestBody)
                });

                console.log(' Login response status:', response.status);
                console.log(' Login response headers:', response.headers);

                // Check if response is JSON
                const contentType = response.headers.get('content-type');
                if (!contentType || !contentType.includes('application/json')) {
                    console.error(' Non-JSON response:', contentType);
                    const text = await response.text();
                    console.error(' Response text:', text);
                    throw new Error(`Server returned non-JSON response: ${contentType}`);
                }

                const data = await response.json();
                console.log(' Login response data:', data);

                setButtonLoading('loginBtn', false);

                if (data.success) {
                    // Store user data (handle different response formats)
                    if (role === 'seller') {
                        // Seller login returns data.seller
                        currentUser = data.seller;
                        currentUser.role = 'seller';
                        currentUser.sellerStatus = currentUser.approvalStatus;
                    } else {
                        // User/admin login returns data.user
                        currentUser = data.user;
                    }
                    
                    // Cache user data in localStorage for persistence
                    localStorage.setItem('ecoloopUser', JSON.stringify(currentUser));
                    
                    // Update UI based on role
                    updateAuthUI();
                    
                    closeModal('loginModal');
                    document.getElementById('loginForm').reset();
                    
                    // Show success message
                    showToast(`Welcome back, ${currentUser.firstName || currentUser.name || currentUser.email}!`, 'success');
                    
                    // Handle role-specific behavior
                    if (role === 'seller') {
                        // Seller login - always approved if we reach here (backend checked)
                        showToast('Access granted to Seller Dashboard', 'success');
                        setTimeout(() => {
                            showSellerDashboard();
                        }, 500);
                    } else if (role === 'admin') {
                        // Admin login
                        setTimeout(() => {
                            showAdminDashboard();
                        }, 500);
                    } else {
                        // Regular user - continue to homepage
                        showToast('Welcome to EcoLoop Kenya!', 'success');
                    }
                    
                    // Trigger dashboard checks for seller and admin roles
                    setTimeout(() => {
                        checkAndShowSellerDashboard();
                        checkAndShowAdminIcon();
                    }, 1000);
                    
                } else {
                    // Handle specific error messages for different scenarios
                    const errorMessage = data.message || data.error || 'Login failed';
                    console.log(' Login error:', { errorMessage, role, data });
                    
                    if (errorMessage.includes('Seller not found')) {
                        document.getElementById('loginEmailError').textContent = 'No seller account found with this email. Please register as a seller first.';
                        showToast('No seller account found with this email. Please register as a seller first.', 'error');
                    } else if (errorMessage.includes('Incorrect password')) {
                        document.getElementById('loginPasswordError').textContent = 'Incorrect password. Please try again.';
                        showToast('Incorrect password. Please try again.', 'error');
                    } else if (errorMessage.includes('pending admin approval')) {
                        document.getElementById('loginEmailError').textContent = 'Your seller account is awaiting admin approval.';
                        showToast('Your seller account is awaiting admin approval.', 'warning');
                    } else if (errorMessage.includes('rejected')) {
                        document.getElementById('loginEmailError').textContent = 'Your seller account has been rejected. Please contact support.';
                        showToast('Your seller account has been rejected. Please contact support.', 'error');
                    } else if (errorMessage.includes('not active')) {
                        document.getElementById('loginEmailError').textContent = 'Your seller account is not active. Please contact support.';
                        showToast('Your seller account is not active. Please contact support.', 'error');
                    } else if (errorMessage.includes('not registered as a seller')) {
                        document.getElementById('loginEmailError').textContent = 'You are not registered as a seller. Please register as a seller first.';
                        showToast('You are not registered as a seller. Please register as a seller first.', 'error');
                    } else if (errorMessage.includes('registered as a seller')) {
                        document.getElementById('loginEmailError').textContent = 'This account is registered as a seller. Please use Seller Login instead.';
                        showToast('This account is registered as a seller. Please use Seller Login instead.', 'error');
                    } else if (errorMessage.includes('user account') && errorMessage.includes('not found')) {
                        document.getElementById('loginEmailError').textContent = 'No user account found with this email. Please register first.';
                        showToast('No user account found with this email. Please register first.', 'error');
                    } else if (errorMessage.includes('Invalid email or password')) {
                        if (role === 'seller') {
                            document.getElementById('loginEmailError').textContent = 'Invalid email or password for seller account.';
                        } else {
                            document.getElementById('loginEmailError').textContent = 'Invalid email or password for user account.';
                        }
                        showToast('Invalid credentials. Please check your email and password.', 'error');
                    } else if (errorMessage.includes('Invalid role specified')) {
                        document.getElementById('loginEmailError').textContent = 'Please select a valid login role (User or Seller).';
                        showToast('Please select a valid login role (User or Seller).', 'error');
                    } else if (errorMessage.includes('Database connection error')) {
                        document.getElementById('loginEmailError').textContent = 'Server database error. Please try again later.';
                        showToast('Server database error. Please try again later.', 'error');
                    } else if (errorMessage.includes('Password verification error')) {
                        document.getElementById('loginEmailError').textContent = 'Password verification failed. Please try again.';
                        showToast('Password verification failed. Please try again.', 'error');
                    } else {
                        // Generic error
                        document.getElementById('loginEmailError').textContent = errorMessage;
                        showToast(errorMessage, 'error');
                    }
                }
            } catch (error) {
                setButtonLoading('loginBtn', false);
                console.error(' Network/Fetch error:', error);
                
                // Provide specific error messages based on the error type
                if (error.name === 'TypeError' && error.message.includes('fetch')) {
                    document.getElementById('loginEmailError').textContent = 'Cannot connect to server. Please check your internet connection.';
                    showToast('Cannot connect to server. Please check your internet connection.', 'error');
                } else if (error.name === 'TypeError' && error.message.includes('JSON')) {
                    document.getElementById('loginEmailError').textContent = 'Server response error. Please try again.';
                    showToast('Server response error. Please try again.', 'error');
                } else if (error.message.includes('non-JSON response')) {
                    document.getElementById('loginEmailError').textContent = 'Server returned invalid response. Please try again.';
                    showToast('Server returned invalid response. Please try again.', 'error');
                } else if (error.message.includes('CORS')) {
                    document.getElementById('loginEmailError').textContent = 'CORS error. Please contact support.';
                    showToast('CORS error. Please contact support.', 'error');
                } else {
                    document.getElementById('loginEmailError').textContent = 'Network error: ' + error.message;
                    showToast('Network error: ' + error.message, 'error');
                }
            }
        }

        // Update authentication UI based on user role
        function updateAuthUI() {
            const userActions = document.querySelector('.user-actions');
            if (!userActions) return;
            
            if (currentUser) {
                // User is logged in - update header
                const initials = currentUser.firstName ? currentUser.firstName.charAt(0).toUpperCase() : 
                                currentUser.name ? currentUser.name.charAt(0).toUpperCase() : 
                                currentUser.email.charAt(0).toUpperCase();
                
                let dashboardLinks = '';
                
                // Add role-specific dashboard links
                if (currentUser.role === 'seller' && currentUser.sellerStatus === 'approved') {
                    dashboardLinks += `<a href="#" onclick="showSellerDashboard(); return false;"><i class="fas fa-store"></i> Seller Dashboard</a>`;
                } else if (currentUser.role === 'admin') {
                    dashboardLinks += `<a href="#" onclick="showAdminDashboard(); return false;"><i class="fas fa-cog"></i> Admin Dashboard</a>`;
                }
                
                userActions.innerHTML = `
                    <div class="user-info">
                        <div class="user-avatar">${initials}</div>
                        <span><i class="fas fa-user"></i> ${currentUser.firstName || currentUser.name || currentUser.email}</span>
                        <a href="#" onclick="handleLogout(); return false;"><i class="fas fa-sign-out-alt"></i> Logout</a>
                    </div>
                    ${dashboardLinks}
                    <a href="#" onclick="showToast('Help section coming soon!', 'info'); return false;"><i class="fas fa-question-circle"></i> Help</a>
                    ${currentUser.role === 'admin' ? '' : '<a href="admin/admin-login.html"><i class="fas fa-leaf"></i> Admin</a>'}
                `;

                // Trigger dashboard visibility checks
                setTimeout(() => {
                    checkAndShowSellerDashboard();
                    checkAndShowAdminIcon();
                }, 100);
                
            } else {
                // User is logged out - restore original links
                userActions.innerHTML = `
                    <a href="#" onclick="showLoginModal(); return false;"><i class="fas fa-user"></i> Login</a>
                    <a href="#" onclick="showRegisterModal(); return false;"><i class="fas fa-user-plus"></i> Register</a>
                    <a href="#" onclick="showSellerRegisterModal(); return false;"><i class="fas fa-store"></i> Sell</a>
                    <a href="#" onclick="showToast('Help section coming soon!', 'info'); return false;"><i class="fas fa-question-circle"></i> Help</a>
                    <a href="admin/admin-login.html"><i class="fas fa-leaf"></i> Admin</a>
                `;
            }
        }

        // Handle logout
        async function handleLogout() {
            try {
                const response = await fetch(`${BACKEND_URL}/api/user/logout`, {
                    method: 'POST',
                    credentials: 'include'
                });

                const data = await response.json();

                if (data.success) {
                    currentUser = null;
                    updateAuthUI();
                    
                    // Hide dashboards
                    closeSellerDashboard();
                    closeAdminDashboard();
                    
                    // Hide seller and admin icons
                    document.getElementById('sellerIcon')?.classList.remove('show');
                    document.getElementById('adminIcon')?.classList.remove('show');
                    
                    showToast('Logged out successfully', 'success');
                } else {
                    showToast('Logout failed. Please try again.', 'error');
                }
            } catch (error) {
                console.error('Logout error:', error);
                // Fallback logout
                currentUser = null;
                updateAuthUI();
                closeSellerDashboard();
                closeAdminDashboard();
                showToast('Logged out', 'success');
            }
        }

        async function handleRegister(event) {
            event.preventDefault();
            clearFormErrors('registerModal');

            const firstName = document.getElementById('registerFirstName').value;
            const lastName = document.getElementById('registerLastName').value;
            const email = document.getElementById('registerEmail').value;
            const phone = document.getElementById('registerPhone').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;

            let isValid = true;

            if (firstName.length < 2) {
                document.getElementById('registerFirstNameError').textContent = 'First name must be at least 2 characters';
                isValid = false;
            }

            if (lastName.length < 2) {
                document.getElementById('registerLastNameError').textContent = 'Last name must be at least 2 characters';
                isValid = false;
            }

            if (!validateEmail(email)) {
                document.getElementById('registerEmailError').textContent = 'Please enter a valid email';
                isValid = false;
            }

            if (!validatePhone(phone)) {
                document.getElementById('registerPhoneError').textContent = 'Please enter a valid phone number';
                isValid = false;
            }

            if (password.length < 6) {
                document.getElementById('registerPasswordError').textContent = 'Password must be at least 6 characters';
                isValid = false;
            }

            if (password !== confirmPassword) {
                document.getElementById('registerConfirmPasswordError').textContent = 'Passwords do not match';
                isValid = false;
            }

            if (!isValid) return;

            setButtonLoading('registerBtn', true);

            const userData = {
                firstName,
                lastName,
                email,
                phone,
                password
            };

            const result = await authManager.register(userData);

            setButtonLoading('registerBtn', false);

            if (result.success) {
                closeModal('registerModal');
                document.getElementById('registerForm').reset();
                setTimeout(() => showLoginModal(), 1000);
            } else {
                document.getElementById('registerEmailError').textContent = result.error;
            }
        }

        async function handleSellerRegister(event) {
            event.preventDefault();
            clearFormErrors('sellerRegisterModal');

            const firstName = document.getElementById('sellerFirstName').value;
            const lastName = document.getElementById('sellerLastName').value;
            const email = document.getElementById('sellerEmail').value;
            const phone = document.getElementById('sellerPhone').value;
            const password = document.getElementById('sellerPassword').value;
            const confirmPassword = document.getElementById('sellerConfirmPassword').value;
            const businessName = document.getElementById('businessName').value;
            const businessType = document.getElementById('businessType').value;
            const businessDescription = document.getElementById('businessDescription').value;
            const businessAddress = document.getElementById('businessAddress').value;
            const businessCity = document.getElementById('businessCity').value;
            const businessCountry = document.getElementById('businessCountry').value;

            let isValid = true;

            if (firstName.length < 2) {
                document.getElementById('sellerFirstNameError').textContent = 'First name must be at least 2 characters';
                isValid = false;
            }

            if (lastName.length < 2) {
                document.getElementById('sellerLastNameError').textContent = 'Last name must be at least 2 characters';
                isValid = false;
            }

            if (!validateEmail(email)) {
                document.getElementById('sellerEmailError').textContent = 'Please enter a valid email';
                isValid = false;
            }

            if (!validatePhone(phone)) {
                document.getElementById('sellerPhoneError').textContent = 'Please enter a valid phone number';
                isValid = false;
            }

            if (password.length < 6) {
                document.getElementById('sellerPasswordError').textContent = 'Password must be at least 6 characters';
                isValid = false;
            }

            if (password !== confirmPassword) {
                document.getElementById('sellerConfirmPasswordError').textContent = 'Passwords do not match';
                isValid = false;
            }

            if (businessName.length < 2) {
                document.getElementById('businessNameError').textContent = 'Business name must be at least 2 characters';
                isValid = false;
            }

            if (!businessType) {
                document.getElementById('businessTypeError').textContent = 'Please select a business type';
                isValid = false;
            }

            if (businessDescription.length < 10) {
                document.getElementById('businessDescriptionError').textContent = 'Business description must be at least 10 characters';
                isValid = false;
            }

            if (!isValid) return;

            setButtonLoading('sellerRegisterBtn', true);

            const sellerData = {
                firstName,
                lastName,
                email,
                phone,
                password,
                businessName,
                businessType,
                businessDescription,
                businessAddress,
                businessCity,
                businessCountry,
                // Add all the required fields that backend expects
                storeName: businessName, // Use businessName as storeName
                storeDescription: businessDescription,
                storeCategory: businessType,
                businessLicense: 'pending', // Default value
                taxIdentification: 'pending', // Default value
                bankName: 'pending', // Default value
                bankAccount: 'pending', // Default value
                bankAccountName: `${firstName} ${lastName}`,
                socialMedia: 'pending', // Default value
                operatingHours: '9-5', // Default value
                // Add address fields for personal address too
                streetAddress: businessAddress,
                city: businessCity,
                state: businessCity, // Use city as state
                postalCode: '00100', // Default postal code
                country: businessCountry
            };

            const result = await authManager.sellerRegister(sellerData);

            setButtonLoading('sellerRegisterBtn', false);

            if (result.success) {
                closeModal('sellerRegisterModal');
                document.getElementById('sellerRegisterForm').reset();
                setTimeout(() => showLoginModal(), 2000);
            } else {
                document.getElementById('sellerEmailError').textContent = result.error;
            }
        }

        // Close modals when clicking outside
        window.addEventListener('click', function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
                document.body.style.overflow = 'auto';
                clearFormErrors(event.target.id);
            }
        });

        // Toast notification function
        function showToast(message, type = 'info', duration = 3000) {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, duration);
        }

        // Categories data
        const categories = [
            { name: "Electronics", icon: "fa-microchip", count: 0 },
            { name: "Fashion", icon: "fa-hat-cowboy", count: 0 },
            { name: "Gaming", icon: "fa-dragon", count: 0 },
            { name: "Home & Kitchen", icon: "fa-blender", count: 0 },
            { name: "Sports", icon: "fa-dumbbell", count: 0 },
            { name: "Books", icon: "fa-book-open", count: 0 }
        ];

        // Enhanced products data with full details
        const sampleProducts = [
            {
                id: 1,
                title: "Wireless Headphones",
                price: "KES 2,500",
                description: "High-quality wireless headphones with noise cancellation",
                category: "Electronics",
                image: "https://via.placeholder.com/300x200/2ecc71/ffffff?text=Headphones",
                specifications: {
                    "Brand": "EcoSound",
                    "Connectivity": "Bluetooth 5.0",
                    "Battery Life": "30 hours",
                    "Noise Cancellation": "Active ANC",
                    "Weight": "250g",
                    "Color": "Midnight Black"
                },
                rating: 4.5,
                stock: 15,
                features: ["Active Noise Cancellation", "30-hour battery life", "Premium sound quality", "Comfortable fit"]
            },
            {
                id: 2,
                title: "Smart Watch",
                price: "KES 5,000",
                description: "Feature-rich smartwatch with health tracking",
                category: "Electronics",
                image: "https://via.placeholder.com/300x200/3498db/ffffff?text=Smart+Watch",
                specifications: {
                    "Brand": "EcoTime",
                    "Display": "1.4\" AMOLED",
                    "Battery Life": "7 days",
                    "Water Resistance": "IP68",
                    "Compatibility": "iOS & Android",
                    "Sensors": "Heart rate, GPS, Accelerometer"
                },
                rating: 4.3,
                stock: 8,
                features: ["Heart rate monitoring", "GPS tracking", "Water resistant", "7-day battery"]
            },
            {
                id: 3,
                title: "Running Shoes",
                price: "KES 3,500",
                description: "Comfortable running shoes for all terrains",
                category: "Sports",
                image: "https://via.placeholder.com/300x200/e74c3c/ffffff?text=Shoes",
                specifications: {
                    "Brand": "EcoRun",
                    "Material": "Recycled polyester",
                    "Weight": "280g",
                    "Sole": "Eco-friendly rubber",
                    "Sizes": "US 6-12",
                    "Gender": "Unisex"
                },
                rating: 4.7,
                stock: 25,
                features: ["Eco-friendly materials", "All-terrain grip", "Breathable design", "Arch support"]
            },
            {
                id: 4,
                title: "Coffee Maker",
                price: "KES 4,200",
                description: "Automatic coffee maker with timer",
                category: "Home & Kitchen",
                image: "https://via.placeholder.com/300x200/f39c12/ffffff?text=Coffee+Maker",
                specifications: {
                    "Brand": "EcoBrew",
                    "Capacity": "12 cups",
                    "Programmable": "Yes, 24-hour timer",
                    "Auto Shut-off": "2 hours",
                    "Power": "900W",
                    "Material": "Stainless steel"
                },
                rating: 4.4,
                stock: 12,
                features: ["Programmable timer", "Auto shut-off", "12-cup capacity", "Easy cleaning"]
            },
            {
                id: 5,
                title: "Laptop Backpack",
                price: "KES 1,800",
                description: "Durable backpack with laptop compartment",
                category: "Fashion",
                image: "https://via.placeholder.com/300x200/9b59b6/ffffff?text=Backpack",
                specifications: {
                    "Brand": "EcoCarry",
                    "Material": "Recycled fabric",
                    "Laptop Compartment": "Up to 15.6\"",
                    "Capacity": "25L",
                    "Water Resistant": "Yes",
                    "Weight": "600g"
                },
                rating: 4.6,
                stock: 20,
                features: ["Laptop protection", "Water resistant", "Multiple pockets", "Eco-friendly materials"]
            },
            {
                id: 6,
                title: "Programming Book",
                price: "KES 1,200",
                description: "Learn programming with this comprehensive guide",
                category: "Books",
                image: "https://via.placeholder.com/300x200/1abc9c/ffffff?text=Book",
                specifications: {
                    "Title": "Modern Web Development",
                    "Author": "EcoTech Press",
                    "Pages": "450",
                    "Language": "English",
                    "Format": "Paperback",
                    "ISBN": "978-123-456-789"
                },
                rating: 4.8,
                stock: 30,
                features: ["Comprehensive guide", "Practical examples", "Latest technologies", "Beginner friendly"]
            }
        ];

        // Initialize website
        document.addEventListener('DOMContentLoaded', function() {
            console.log(' EcoLoop Kenya - Website initialized');
            loadCategories();
            loadProducts();
            setupSearch();
        });

        // Load categories
        function loadCategories() {
            const grid = document.getElementById('categoriesGrid');
            if (!grid) return;
            
            // Update category counts based on products
            categories.forEach(category => {
                category.count = sampleProducts.filter(p => p.category === category.name).length;
            });
            
            grid.innerHTML = categories.map(category => createCategoryCard(category)).join('');
        }

        // Create category card
        function createCategoryCard(category) {
            return `
                <div class="category-card" onclick="filterByCategory('${category.name}')">
                    <div class="category-icon">
                        <i class="fas ${category.icon}"></i>
                    </div>
                    <div class="category-name">${category.name}</div>
                    <div class="category-count">${category.count} Products</div>
                </div>
            `;
        }

        // Load products
        function loadProducts(categoryFilter = null) {
            const grid = document.getElementById('productsGrid');
            if (!grid) return;
            
            let productsToShow = categoryFilter 
                ? sampleProducts.filter(p => p.category === categoryFilter)
                : sampleProducts;
            
            if (productsToShow.length === 0) {
                grid.innerHTML = '<div style="text-align: center; padding: 40px;">No products found in this category.</div>';
                return;
            }
            
            grid.innerHTML = productsToShow.map(product => createProductCard(product)).join('');
        }

        // Create product card
        function createProductCard(product) {
            return `
                <div class="product-card">
                    <img src="${product.image}" alt="${product.title}" class="product-image">
                    <div class="product-info">
                        <h3 class="product-title">${product.title}</h3>
                        <div class="product-price">${product.price}</div>
                        <p class="product-description">${product.description}</p>
                        <div class="product-actions">
                            <button class="btn" onclick="showProductDetails(${product.id})">View Details</button>
                            <button class="btn btn-wishlist" onclick="addToWishlist(${product.id})" title="Add to Wishlist">
                                <i class="fas fa-heart"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Filter by category
        function filterByCategory(categoryName) {
            loadProducts(categoryName);
            showToast(`Showing products in ${categoryName}`, 'success');
            
            // Scroll to products section
            document.getElementById('products').scrollIntoView({ behavior: 'smooth' });
        }

        // Setup search functionality
        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        performSearch();
                    }
                });
            }
        }

        // Perform search
        function performSearch() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            if (!searchTerm) return;
            
            const results = sampleProducts.filter(p => 
                p.title.toLowerCase().includes(searchTerm) ||
                p.category.toLowerCase().includes(searchTerm) ||
                p.description.toLowerCase().includes(searchTerm)
            );
            
            const grid = document.getElementById('productsGrid');
            if (results.length > 0) {
                grid.innerHTML = results.map(product => createProductCard(product)).join('');
                showToast(`Found ${results.length} products for "${searchTerm}"`, 'success');
            } else {
                grid.innerHTML = '<div style="text-align: center; padding: 40px;">No products found for your search.</div>';
                showToast('No products found', 'warning');
            }
            
            // Scroll to products section
            document.getElementById('products').scrollIntoView({ behavior: 'smooth' });
        }

        // Initialize website
        document.addEventListener('DOMContentLoaded', function() {
            console.log(' EcoLoop Kenya - Website initialized');
            loadCategories();
            loadProducts();
            setupSearch();
        });

        // Product Details Functions
        let currentProduct = null;

        // Show product details modal
        function showProductDetails(productId) {
            const product = sampleProducts.find(p => p.id === productId);
            if (!product) {
                showToast('Product not found', 'error');
                return;
            }

            currentProduct = product;
            
            // Populate modal with product data
            document.getElementById('productTitle').textContent = product.title;
            document.getElementById('productImage').src = product.image;
            document.getElementById('productImage').alt = product.title;
            document.getElementById('productPrice').textContent = product.price;
            document.getElementById('productDescription').textContent = product.description;
            
            // Set rating
            const ratingStars = generateStars(product.rating || 4);
            document.getElementById('productRating').innerHTML = ratingStars;
            document.getElementById('ratingValue').textContent = `(${product.rating || 4.0})`;
            
            // Set stock badge
            const stockBadge = document.getElementById('stockBadge');
            if (product.stock > 0) {
                stockBadge.textContent = `In Stock (${product.stock})`;
                stockBadge.className = 'stock-badge';
            } else {
                stockBadge.textContent = 'Out of Stock';
                stockBadge.className = 'stock-badge out-of-stock';
            }
            
            // Set features
            const featuresList = document.getElementById('productFeatures');
            if (product.features && product.features.length > 0) {
                featuresList.innerHTML = product.features.map(feature => `<li>${feature}</li>`).join('');
            } else {
                featuresList.innerHTML = '<li>No specific features listed</li>';
            }
            
            // Set specifications
            const specificationsGrid = document.getElementById('productSpecifications');
            if (product.specifications) {
                specificationsGrid.innerHTML = Object.entries(product.specifications)
                    .map(([key, value]) => `
                        <div class="spec-item">
                            <span class="spec-label">${key}:</span>
                            <span class="spec-value">${value}</span>
                        </div>
                    `).join('');
            } else {
                specificationsGrid.innerHTML = '<div class="spec-item"><span class="spec-label">No specifications available</span></div>';
            }
            
            // Show modal
            document.getElementById('productDetailsModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
            
            console.log(` Showing details for product: ${product.title}`);
        }

        // Close product details modal
        function closeProductDetailsModal() {
            document.getElementById('productDetailsModal').style.display = 'none';
            document.body.style.overflow = 'auto';
            currentProduct = null;
        }

        // Generate star rating HTML
        function generateStars(rating) {
            const fullStars = Math.floor(rating);
            const halfStar = rating % 1 >= 0.5 ? 1 : 0;
            const emptyStars = 5 - fullStars - halfStar;
            
            let stars = '';
            for (let i = 0; i < fullStars; i++) {
                stars += '';
            }
            if (halfStar) {
                stars += '';
            }
            for (let i = 0; i < emptyStars; i++) {
                stars += '';
            }
            
            return stars;
        }

        // Add to cart functionality
        function addToCart(productId = null) {
            const product = productId ? sampleProducts.find(p => p.id === productId) : currentProduct;
            if (!product) {
                showToast('No product selected', 'error');
                return;
            }
            
            if (product.stock <= 0) {
                showToast('Product is out of stock', 'error');
                return;
            }

            // Check if user is logged in
            if (!currentUser) {
                showToast('Please login to add items to cart', 'info');
                showLoginModal();
                return;
            }

            // Add to cart with animation
            animateItemToCart(productId || product.id);
            
            // Call backend API
            addToCartBackend(product.id, 1);
        }

        // Backend cart functions
        async function addToCartBackend(productId, quantity) {
            try {
                // Try backend API first
                const response = await fetch(`${BACKEND_URL}/api/cart/add`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include',
                    body: JSON.stringify({ productId, quantity })
                });

                const data = await response.json();
                
                if (data.success) {
                    showToast('Product added to cart', 'success');
                    updateCartBadge();
                    loadCartItems();
                } else {
                    throw new Error(data.message || 'Backend failed');
                }
            } catch (error) {
                console.log('Backend cart add failed, using localStorage fallback:', error);
                // Fallback to localStorage
                addToCartLocalStorage(productId, quantity);
            }
        }

        // LocalStorage fallback functions
        function addToCartLocalStorage(productId, quantity) {
            const product = sampleProducts.find(p => p.id === productId);
            if (!product) return;

            let cart = JSON.parse(localStorage.getItem('ecoloopCart') || '[]');
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += quantity;
                showToast('Cart quantity updated', 'success');
            } else {
                cart.push({
                    id: productId,
                    title: product.title,
                    price: product.price,
                    image: product.image,
                    quantity: quantity
                });
                showToast('Product added to cart', 'success');
            }
            
            localStorage.setItem('ecoloopCart', JSON.stringify(cart));
            updateCartBadge();
            renderCartItems(cart);
        }

        async function removeFromCart(productId) {
            try {
                const response = await fetch(`${BACKEND_URL}/api/cart/remove`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include',
                    body: JSON.stringify({ productId })
                });

                const data = await response.json();
                
                if (data.success) {
                    showToast('Item removed from cart', 'success');
                    updateCartBadge();
                    loadCartItems();
                } else {
                    showToast(data.message || 'Failed to remove item', 'error');
                }
            } catch (error) {
                console.error('Cart remove error:', error);
                showToast('Failed to remove item', 'error');
            }
        }

        async function updateCartQuantity(productId, quantity) {
            try {
                const response = await fetch(`${BACKEND_URL}/api/cart/update`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include',
                    body: JSON.stringify({ productId, quantity })
                });

                const data = await response.json();
                
                if (data.success) {
                    updateCartBadge();
                    loadCartItems();
                } else {
                    showToast(data.message || 'Failed to update quantity', 'error');
                }
            } catch (error) {
                console.error('Cart update error:', error);
                showToast('Failed to update quantity', 'error');
            }
        }

        async function loadCartItems() {
            try {
                const response = await fetch(`${BACKEND_URL}/api/cart`, {
                    credentials: 'include'
                });

                const data = await response.json();
                
                if (data.success) {
                    renderCartItems(data.cart);
                    updateCartBadge();
                }
            } catch (error) {
                console.error('Load cart error:', error);
            }
        }

        function renderCartItems(cartItems) {
            const cartItemsContainer = document.getElementById('cartItems');
            const cartEmpty = document.getElementById('cartEmpty');
            const cartSummary = document.getElementById('cartSummary');
            
            if (!cartItems || cartItems.length === 0) {
                cartItemsContainer.innerHTML = '';
                cartEmpty.style.display = 'block';
                cartSummary.style.display = 'none';
                return;
            }

            cartEmpty.style.display = 'none';
            cartSummary.style.display = 'block';

            let subtotal = 0;
            const itemsHTML = cartItems.map(item => {
                const product = sampleProducts.find(p => p.id === item.productId);
                if (!product) return '';
                
                const itemTotal = parseFloat(product.price.replace(/[^\d.]/g, '')) * item.quantity;
                subtotal += itemTotal;
                
                return `
                    <div class="cart-item">
                        <img src="${product.image}" alt="${product.title}" class="cart-item-image">
                        <div class="cart-item-details">
                            <div class="cart-item-title">${product.title}</div>
                            <div class="cart-item-price">${product.price}</div>
                            <div class="cart-item-quantity">
                                <span>Qty:</span>
                                <div class="quantity-controls">
                                    <button class="quantity-btn" onclick="updateCartQuantity(${item.productId}, ${item.quantity - 1})">-</button>
                                    <span class="quantity-value">${item.quantity}</span>
                                    <button class="quantity-btn" onclick="updateCartQuantity(${item.productId}, ${item.quantity + 1})">+</button>
                                </div>
                            </div>
                            <div class="cart-item-actions">
                                <button class="btn-remove" onclick="removeFromCart(${item.productId})">
                                    <i class="fas fa-trash"></i> Remove
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            cartItemsContainer.innerHTML = itemsHTML;

            // Update summary
            const shipping = subtotal > 0 ? 200 : 0; // KES 200 shipping
            const total = subtotal + shipping;
            
            document.getElementById('cartSubtotal').textContent = `KES ${subtotal.toFixed(2)}`;
            document.getElementById('cartShipping').textContent = `KES ${shipping.toFixed(2)}`;
            document.getElementById('cartTotal').textContent = `KES ${total.toFixed(2)}`;
        }

        // Wishlist functions
        function addToWishlist(productId = null) {
            const product = productId ? sampleProducts.find(p => p.id === productId) : currentProduct;
            if (!product) {
                showToast('No product selected', 'error');
                return;
            }

            // Check if user is logged in
            if (!currentUser) {
                showToast('Please login to add items to wishlist', 'info');
                showLoginModal();
                return;
            }

            // Add to wishlist with animation
            animateItemToWishlist(productId || product.id);
            
            // Call backend API
            addToWishlistBackend(product.id);
        }

        async function addToWishlistBackend(productId) {
            try {
                // Try backend API first
                const response = await fetch(`${BACKEND_URL}/api/wishlist/add`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include',
                    body: JSON.stringify({ productId })
                });

                const data = await response.json();
                
                if (data.success) {
                    showToast('Product added to wishlist', 'success');
                    updateWishlistBadge();
                    loadWishlistItems();
                } else {
                    throw new Error(data.message || 'Backend failed');
                }
            } catch (error) {
                console.log('Backend wishlist add failed, using localStorage fallback:', error);
                // Fallback to localStorage
                addToWishlistLocalStorage(productId);
            }
        }

        function addToWishlistLocalStorage(productId) {
            const product = sampleProducts.find(p => p.id === productId);
            if (!product) return;

            let wishlist = JSON.parse(localStorage.getItem('ecoloopWishlist') || '[]');
            const existingItem = wishlist.find(item => item.id === productId);
            
            if (existingItem) {
                showToast('Product already in wishlist', 'info');
            } else {
                wishlist.push({
                    id: productId,
                    title: product.title,
                    price: product.price,
                    image: product.image
                });
                showToast('Product added to wishlist', 'success');
            }
            
            localStorage.setItem('ecoloopWishlist', JSON.stringify(wishlist));
            updateWishlistBadge();
            renderWishlistItems(wishlist);
        }

        async function removeFromWishlist(productId) {
            try {
                // Try backend API first
                const response = await fetch(`${BACKEND_URL}/api/wishlist/remove`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include',
                    body: JSON.stringify({ productId })
                });

                const data = await response.json();
                
                if (data.success) {
                    showToast('Item removed from wishlist', 'success');
                    updateWishlistBadge();
                    loadWishlistItems();
                } else {
                    throw new Error(data.message || 'Backend failed');
                }
            } catch (error) {
                console.log('Backend wishlist remove failed, using localStorage fallback:', error);
                // Fallback to localStorage
                removeFromWishlistLocalStorage(productId);
            }
        }

        function removeFromWishlistLocalStorage(productId) {
            let wishlist = JSON.parse(localStorage.getItem('ecoloopWishlist') || '[]');
            wishlist = wishlist.filter(item => item.id !== productId);
            localStorage.setItem('ecoloopWishlist', JSON.stringify(wishlist));
            showToast('Item removed from wishlist', 'success');
            updateWishlistBadge();
            renderWishlistItems(wishlist);
        }

        async function moveToCartFromWishlist(productId) {
            try {
                // Try backend API first
                const response = await fetch(`${BACKEND_URL}/api/wishlist/move-to-cart`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include',
                    body: JSON.stringify({ productId })
                });

                const data = await response.json();
                
                if (data.success) {
                    showToast('Item moved to cart', 'success');
                    updateWishlistBadge();
                    updateCartBadge();
                    loadWishlistItems();
                    loadCartItems();
                } else {
                    throw new Error(data.message || 'Backend failed');
                }
            } catch (error) {
                console.log('Backend move to cart failed, using localStorage fallback:', error);
                // Fallback to localStorage
                moveToCartFromWishlistLocalStorage(productId);
            }
        }

        function moveToCartFromWishlistLocalStorage(productId) {
            // Remove from wishlist
            let wishlist = JSON.parse(localStorage.getItem('ecoloopWishlist') || '[]');
            wishlist = wishlist.filter(item => item.id !== productId);
            localStorage.setItem('ecoloopWishlist', JSON.stringify(wishlist));
            
            // Add to cart
            addToCartLocalStorage(productId, 1);
            
            showToast('Item moved to cart', 'success');
            updateWishlistBadge();
            renderWishlistItems(wishlist);
        }

        async function loadWishlistItems() {
            try {
                // Try backend API first
                const response = await fetch(`${BACKEND_URL}/api/wishlist`, {
                    credentials: 'include'
                });

                const data = await response.json();
                
                if (data.success) {
                    renderWishlistItems(data.wishlist);
                    updateWishlistBadge();
                } else {
                    throw new Error(data.message || 'Backend failed');
                }
            } catch (error) {
                console.log('Backend wishlist load failed, using localStorage fallback:', error);
                // Fallback to localStorage
                const wishlist = JSON.parse(localStorage.getItem('ecoloopWishlist') || '[]');
                renderWishlistItems(wishlist);
                updateWishlistBadge();
            }
        }

        function renderWishlistItems(wishlistItems) {
            const wishlistItemsContainer = document.getElementById('wishlistItems');
            const wishlistEmpty = document.getElementById('wishlistEmpty');
            
            if (!wishlistItems || wishlistItems.length === 0) {
                wishlistItemsContainer.innerHTML = '';
                wishlistEmpty.style.display = 'block';
                return;
            }

            wishlistEmpty.style.display = 'none';

            const itemsHTML = wishlistItems.map(item => {
                // Handle both backend format (item.productId) and localStorage format (item.id)
                const productId = item.productId || item.id;
                const product = sampleProducts.find(p => p.id === productId);
                if (!product) return '';
                
                return `
                    <div class="wishlist-item">
                        <img src="${product.image}" alt="${product.title}" class="wishlist-item-image">
                        <div class="wishlist-item-details">
                            <div class="wishlist-item-title">${product.title}</div>
                            <div class="wishlist-item-price">${product.price}</div>
                            <div class="wishlist-item-actions">
                                <button class="btn-move-to-cart" onclick="moveToCartFromWishlist(${productId})">
                                    <i class="fas fa-shopping-cart"></i> Move to Cart
                                </button>
                                <button class="btn-remove" onclick="removeFromWishlist(${productId})">
                                    <i class="fas fa-trash"></i> Remove
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            wishlistItemsContainer.innerHTML = itemsHTML;
        }

        // UI Functions
        function toggleCart() {
            const cartSidebar = document.getElementById('cartSidebar');
            const overlay = document.getElementById('overlay');
            
            if (cartSidebar.classList.contains('open')) {
                closeCart();
            } else {
                openCart();
            }
        }

        function openCart() {
            const cartSidebar = document.getElementById('cartSidebar');
            const overlay = document.getElementById('overlay');
            
            cartSidebar.classList.add('open');
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            loadCartItems();
        }

        function closeCart() {
            const cartSidebar = document.getElementById('cartSidebar');
            const overlay = document.getElementById('overlay');
            
            cartSidebar.classList.remove('open');
            overlay.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        function toggleWishlist() {
            const wishlistSidebar = document.getElementById('wishlistSidebar');
            const overlay = document.getElementById('overlay');
            
            if (wishlistSidebar.classList.contains('open')) {
                closeWishlist();
            } else {
                openWishlist();
            }
        }

        function openWishlist() {
            const wishlistSidebar = document.getElementById('wishlistSidebar');
            const overlay = document.getElementById('overlay');
            
            wishlistSidebar.classList.add('open');
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            loadWishlistItems();
        }

        function closeWishlist() {
            const wishlistSidebar = document.getElementById('wishlistSidebar');
            const overlay = document.getElementById('overlay');
            
            wishlistSidebar.classList.remove('open');
            overlay.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        function updateCartBadge() {
            const badge = document.getElementById('cartBadge');
            if (!badge) return;
            
            // Get cart count from backend or localStorage as fallback
            const cartItems = JSON.parse(localStorage.getItem('ecoloopCart') || '[]');
            const count = cartItems.reduce((sum, item) => sum + item.quantity, 0);
            
            badge.textContent = count;
            badge.classList.add('animate');
            setTimeout(() => badge.classList.remove('animate'), 600);
        }

        function updateWishlistBadge() {
            const badge = document.getElementById('wishlistBadge');
            if (!badge) return;
            
            // Get wishlist count from backend or localStorage as fallback
            const wishlistItems = JSON.parse(localStorage.getItem('ecoloopWishlist') || '[]');
            const count = wishlistItems.length;
            
            badge.textContent = count;
            badge.classList.add('animate');
            setTimeout(() => badge.classList.remove('animate'), 600);
        }

        function proceedToCheckout() {
            if (!currentUser) {
                showToast('Please login to proceed to checkout', 'info');
                showLoginModal();
                return;
            }
            
            showToast('Proceeding to checkout...', 'info');
            // In a real app, this would redirect to checkout page
            setTimeout(() => {
                closeCart();
                showToast('Checkout functionality coming soon!', 'info');
            }, 1000);
        }

        // Animation functions
        function animateItemToCart(productId) {
            const productCard = document.querySelector(`[onclick*="${productId}"]`);
            const cartIcon = document.querySelector('.icon-wrapper[onclick*="toggleCart"]');
            
            if (productCard && cartIcon) {
                const cartRect = cartIcon.getBoundingClientRect();
                const productRect = productCard.getBoundingClientRect();
                
                // Create flying item animation
                const flyingItem = document.createElement('div');
                flyingItem.innerHTML = '<i class="fas fa-shopping-cart" style="color: #00ffff; font-size: 20px;"></i>';
                flyingItem.style.cssText = `
                    position: fixed;
                    top: ${productRect.top}px;
                    left: ${productRect.left}px;
                    z-index: 10002;
                    transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                `;
                
                document.body.appendChild(flyingItem);
                
                setTimeout(() => {
                    flyingItem.style.top = cartRect.top + 'px';
                    flyingItem.style.left = cartRect.left + 'px';
                    flyingItem.style.transform = 'scale(0)';
                    flyingItem.style.opacity = '0';
                }, 10);
                
                setTimeout(() => {
                    document.body.removeChild(flyingItem);
                }, 800);
            }
        }

        function animateItemToWishlist(productId) {
            const productCard = document.querySelector(`[onclick*="${productId}"]`);
            const wishlistIcon = document.querySelector('.icon-wrapper[onclick*="toggleWishlist"]');
            
            if (productCard && wishlistIcon) {
                const wishlistRect = wishlistIcon.getBoundingClientRect();
                const productRect = productCard.getBoundingClientRect();
                
                // Create flying item animation
                const flyingItem = document.createElement('div');
                flyingItem.innerHTML = '<i class="fas fa-heart" style="color: #e74c3c; font-size: 20px;"></i>';
                flyingItem.style.cssText = `
                    position: fixed;
                    top: ${productRect.top}px;
                    left: ${productRect.left}px;
                    z-index: 10002;
                    transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                `;
                
                document.body.appendChild(flyingItem);
                
                setTimeout(() => {
                    flyingItem.style.top = wishlistRect.top + 'px';
                    flyingItem.style.left = wishlistRect.left + 'px';
                    flyingItem.style.transform = 'scale(0)';
                    flyingItem.style.opacity = '0';
                }, 10);
                
                setTimeout(() => {
                    document.body.removeChild(flyingItem);
                }, 800);
            }
        }

        // Buy now functionality
        function buyNow() {
            if (!currentProduct) {
                showToast('No product selected', 'error');
                return;
            }
            
            if (currentProduct.stock <= 0) {
                showToast('Product is out of stock', 'error');
                return;
            }
            
            // Add to cart and redirect to checkout (or show checkout modal)
            addToCart();
            
            // In a real app, this would redirect to checkout
            showToast('Proceeding to checkout...', 'info');
            
            // For now, just close the modal
            setTimeout(() => {
                closeProductDetailsModal();
            }, 1000);
        }

        // Update cart count display
        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('ecoloopCart') || '[]');
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            
            // Update cart count if cart icon exists
            const cartCountElements = document.querySelectorAll('.cart-count');
            cartCountElements.forEach(element => {
                element.textContent = totalItems;
            });
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const productModal = document.getElementById('productDetailsModal');
            if (event.target === productModal) {
                closeProductDetailsModal();
            }
        }

        // Initialize cart count on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateCartBadge();
            updateWishlistBadge();
        });

        // Seller Dashboard Functions
        let sellerData = null;
        let sellerProducts = [];
        let uploadedImages = [];

        // Check if user is a seller and show dashboard
        function checkAndShowSellerDashboard() {
            if (!currentUser) return;
            
            // Check if user has seller role and is approved
            if (currentUser.role === 'seller' && currentUser.sellerStatus === 'approved') {
                showSellerDashboard();
            } else if (currentUser.role === 'seller') {
                // Seller but not approved
                showSellerPendingMessage();
            }
        }

        // Show seller dashboard
        function showSellerDashboard() {
            document.getElementById('sellerDashboard').style.display = 'block';
            document.body.style.overflow = 'hidden';
            
            // Initialize seller dashboard
            initializeSellerDashboard();
        }

        // Close seller dashboard
        function closeSellerDashboard() {
            document.getElementById('sellerDashboard').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Seller logout
        function sellerLogout() {
            closeSellerDashboard();
            // Use existing logout function
            if (typeof authManager !== 'undefined') {
                authManager.logout();
            }
        }

        // Show pending message for sellers
        function showSellerPendingMessage() {
            const status = currentUser.sellerStatus || 'pending';
            let message = '';
            
            switch(status) {
                case 'pending':
                    message = 'Your seller account is pending admin approval. You will be notified once approved.';
                    break;
                case 'rejected':
                    message = 'Your seller account has been rejected. Please contact support for more information.';
                    break;
                default:
                    message = 'Your seller account status is unknown. Please contact support.';
            }
            
            showToast(message, 'warning');
        }

        // Initialize seller dashboard
        async function initializeSellerDashboard() {
            // Update seller info in header
            updateSellerHeader();
            
            // Load seller data
            await loadSellerData();
            
            // Load seller products
            await loadSellerProducts();
            
            // Update dashboard stats
            updateDashboardStats();
            
            // Load recent activity
            loadRecentActivity();
            
            // Set up event listeners
            setupDashboardEventListeners();
        }

        // Update seller header info
        function updateSellerHeader() {
            if (!currentUser) return;
            
            document.getElementById('sellerName').textContent = currentUser.firstName || currentUser.email || 'Seller';
            
            // Set avatar with first letter of name
            const firstLetter = (currentUser.firstName || currentUser.email || 'S')[0].toUpperCase();
            document.getElementById('sellerAvatar').textContent = firstLetter;
        }

        // Load seller data from backend
        async function loadSellerData() {
            try {
                const response = await fetch(`${BACKEND_URL}/api/seller/account/status`, {
                    credentials: 'include'
                });
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.success) {
                        sellerData = data.seller;
                        updateAccountSection();
                    }
                }
            } catch (error) {
                console.error('Failed to load seller data:', error);
                // Use current user data as fallback
                sellerData = currentUser;
                updateAccountSection();
            }
        }

        // Update account section
        function updateAccountSection() {
            if (!sellerData) return;
            
            document.getElementById('sellerFullName').textContent = 
                `${sellerData.firstName || ''} ${sellerData.lastName || ''}`.trim() || 'N/A';
            document.getElementById('sellerEmail').textContent = sellerData.email || 'N/A';
            document.getElementById('sellerPhone').textContent = sellerData.phone || 'N/A';
            document.getElementById('sellerBusinessName').textContent = sellerData.businessName || 'N/A';
            
            // Update account status
            const statusElement = document.getElementById('sellerAccountStatus');
            const status = sellerData.sellerStatus || 'pending';
            statusElement.textContent = status.toUpperCase();
            statusElement.className = `status-badge status-${status}`;
            
            // Update registration date
            const regDate = sellerData.createdAt ? new Date(sellerData.createdAt).toLocaleDateString() : 'N/A';
            document.getElementById('sellerRegDate').textContent = regDate;
            
            // Update product counts
            const totalProducts = sellerProducts.length;
            const approvedProducts = sellerProducts.filter(p => p.status === 'approved').length;
            
            document.getElementById('sellerTotalProducts').textContent = totalProducts;
            document.getElementById('sellerApprovedCount').textContent = approvedProducts;
        }

        // Load seller products
        async function loadSellerProducts() {
            try {
                const response = await fetch(`${BACKEND_URL}/api/seller/products`, {
                    credentials: 'include'
                });
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.success) {
                        sellerProducts = data.products || [];
                        updateProductsTable();
                        updateFeaturedProducts();
                    }
                }
            } catch (error) {
                console.error('Failed to load seller products:', error);
                // Use empty array as fallback
                sellerProducts = [];
                updateProductsTable();
                updateFeaturedProducts();
            }
        }

        // Update dashboard statistics
        function updateDashboardStats() {
            const totalProducts = sellerProducts.length;
            const approvedProducts = sellerProducts.filter(p => p.status === 'approved').length;
            const featuredProducts = sellerProducts.filter(p => p.status === 'featured').length;
            const pendingProducts = sellerProducts.filter(p => p.status === 'pending').length;
            
            document.getElementById('totalProducts').textContent = totalProducts;
            document.getElementById('approvedProducts').textContent = approvedProducts;
            document.getElementById('featuredProducts').textContent = featuredProducts;
            document.getElementById('pendingProducts').textContent = pendingProducts;
        }

        // Load recent activity
        function loadRecentActivity() {
            const activityList = document.getElementById('recentActivityList');
            
            // Generate sample activity from products
            const activities = [];
            
            sellerProducts.forEach(product => {
                activities.push({
                    type: 'product',
                    title: `Product "${product.name}" uploaded`,
                    time: new Date(product.createdAt).toLocaleDateString(),
                    icon: 'fa-upload'
                });
                
                if (product.status === 'approved') {
                    activities.push({
                        type: 'success',
                        title: `Product "${product.name}" approved`,
                        time: new Date(product.updatedAt).toLocaleDateString(),
                        icon: 'fa-check-circle'
                    });
                }
                
                if (product.status === 'featured') {
                    activities.push({
                        type: 'featured',
                        title: `Product "${product.name}" featured`,
                        time: new Date(product.updatedAt).toLocaleDateString(),
                        icon: 'fa-star'
                    });
                }
            });
            
            // Sort by date (most recent first)
            activities.sort((a, b) => new Date(b.time) - new Date(a.time));
            
            // Display only recent 5 activities
            const recentActivities = activities.slice(0, 5);
            
            if (recentActivities.length === 0) {
                activityList.innerHTML = '<div class="activity-item"><div class="activity-content"><div class="activity-title">No recent activity</div><div class="activity-time">Start by uploading your first product</div></div></div>';
            } else {
                activityList.innerHTML = recentActivities.map(activity => `
                    <div class="activity-item">
                        <div class="activity-icon">
                            <i class="fas ${activity.icon}"></i>
                        </div>
                        <div class="activity-content">
                            <div class="activity-title">${activity.title}</div>
                            <div class="activity-time">${activity.time}</div>
                        </div>
                    </div>
                `).join('');
            }
        }

        // Set up dashboard event listeners
        function setupDashboardEventListeners() {
            // Product upload form
            const uploadForm = document.getElementById('productUploadForm');
            if (uploadForm) {
                uploadForm.addEventListener('submit', handleProductUpload);
            }
            
            // Image upload
            const imageInput = document.getElementById('productImages');
            const dropZone = document.getElementById('imageDropZone');
            
            if (imageInput && dropZone) {
                // Click to upload
                dropZone.addEventListener('click', () => imageInput.click());
                
                // File selection
                imageInput.addEventListener('change', handleImageSelection);
                
                // Drag and drop
                dropZone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    dropZone.classList.add('dragover');
                });
                
                dropZone.addEventListener('dragleave', () => {
                    dropZone.classList.remove('dragover');
                });
                
                dropZone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    dropZone.classList.remove('dragover');
                    handleImageDrop(e);
                });
            }
            
            // Product filters
            const statusFilter = document.getElementById('productStatusFilter');
            const categoryFilter = document.getElementById('productCategoryFilter');
            const searchInput = document.getElementById('productSearch');
            
            if (statusFilter) statusFilter.addEventListener('change', filterProducts);
            if (categoryFilter) categoryFilter.addEventListener('change', filterProducts);
            if (searchInput) searchInput.addEventListener('input', filterProducts);
        }

        // Show dashboard section
        function showDashboardSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.dashboard-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(`dashboard${sectionName.charAt(0).toUpperCase() + sectionName.slice(1)}`).classList.add('active');
            
            // Update navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            document.querySelector(`[data-section="${sectionName}"]`).classList.add('active');
            
            // Load section-specific data
            switch(sectionName) {
                case 'products':
                    updateProductsTable();
                    break;
                case 'featured':
                    updateFeaturedProducts();
                    break;
                case 'account':
                    updateAccountSection();
                    loadNotifications();
                    break;
            }
        }

        // Handle product upload
        async function handleProductUpload(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            
            // Add uploaded images
            uploadedImages.forEach((image, index) => {
                formData.append(`image${index}`, image.file);
            });
            
            try {
                const response = await fetch(`${BACKEND_URL}/api/seller/product/upload`, {
                    method: 'POST',
                    credentials: 'include',
                    body: formData
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showToast('Product uploaded successfully! It will be reviewed by admin.', 'success');
                    resetUploadForm();
                    
                    // Reload products
                    await loadSellerProducts();
                    updateDashboardStats();
                    
                    // Switch to products section
                    showDashboardSection('products');
                } else {
                    showToast(data.message || 'Failed to upload product', 'error');
                }
            } catch (error) {
                console.error('Product upload error:', error);
                showToast('Failed to upload product. Please try again.', 'error');
            }
        }

        // Handle image selection
        function handleImageSelection(e) {
            const files = Array.from(e.target.files);
            processImageFiles(files);
        }

        // Handle image drop
        function handleImageDrop(e) {
            const files = Array.from(e.dataTransfer.files);
            const imageFiles = files.filter(file => file.type.startsWith('image/'));
            processImageFiles(imageFiles);
        }

        // Process image files
        function processImageFiles(files) {
            files.forEach(file => {
                // Check file size (5MB max)
                if (file.size > 5 * 1024 * 1024) {
                    showToast(`File ${file.name} is too large. Max size is 5MB.`, 'error');
                    return;
                }
                
                // Check file type
                if (!file.type.match(/^image\/(jpeg|jpg|png|gif)$/)) {
                    showToast(`File ${file.name} is not a supported image format.`, 'error');
                    return;
                }
                
                // Create preview
                const reader = new FileReader();
                reader.onload = (e) => {
                    const imageData = {
                        file: file,
                        preview: e.target.result,
                        name: file.name
                    };
                    uploadedImages.push(imageData);
                    updateImagePreview();
                };
                reader.readAsDataURL(file);
            });
        }

        // Update image preview
        function updateImagePreview() {
            const container = document.getElementById('imagePreviewContainer');
            
            container.innerHTML = uploadedImages.map((image, index) => `
                <div class="image-preview">
                    <img src="${image.preview}" alt="${image.name}">
                    <button class="remove-btn" onclick="removeImage(${index})"></button>
                </div>
            `).join('');
        }

        // Remove image
        function removeImage(index) {
            uploadedImages.splice(index, 1);
            updateImagePreview();
        }

        // Reset upload form
        function resetUploadForm() {
            document.getElementById('productUploadForm').reset();
            uploadedImages = [];
            updateImagePreview();
        }

        // Update products table
        function updateProductsTable() {
            const tbody = document.getElementById('productsTableBody');
            const noProductsMessage = document.getElementById('noProductsMessage');
            
            const filteredProducts = getFilteredProducts();
            
            if (filteredProducts.length === 0) {
                tbody.innerHTML = '';
                noProductsMessage.style.display = 'block';
            } else {
                noProductsMessage.style.display = 'none';
                tbody.innerHTML = filteredProducts.map(product => `
                    <tr>
                        <td>
                            <img src="${product.image || 'https://picsum.photos/seed/' + product.id + '/50/50.jpg'}" 
                                 alt="${product.name}" class="product-image-thumb">
                        </td>
                        <td>${product.name}</td>
                        <td>${product.category}</td>
                        <td>KES ${product.price}</td>
                        <td>${product.stock}</td>
                        <td>
                            <span class="status-badge status-${product.status}">${product.status}</span>
                        </td>
                        <td>
                            ${getProductActions(product)}
                        </td>
                    </tr>
                `).join('');
            }
        }

        // Get filtered products
        function getFilteredProducts() {
            const statusFilter = document.getElementById('productStatusFilter')?.value || 'all';
            const categoryFilter = document.getElementById('productCategoryFilter')?.value || 'all';
            const searchTerm = document.getElementById('productSearch')?.value.toLowerCase() || '';
            
            return sellerProducts.filter(product => {
                const matchesStatus = statusFilter === 'all' || product.status === statusFilter;
                const matchesCategory = categoryFilter === 'all' || product.category === categoryFilter;
                const matchesSearch = searchTerm === '' || 
                    product.name.toLowerCase().includes(searchTerm) ||
                    product.description.toLowerCase().includes(searchTerm);
                
                return matchesStatus && matchesCategory && matchesSearch;
            });
        }

        // Filter products
        function filterProducts() {
            updateProductsTable();
        }

        // Get product actions
        function getProductActions(product) {
            // Only allow edit/delete for pending products
            if (product.status === 'pending') {
                return `
                    <button class="btn-secondary" onclick="editProduct('${product.id}')">
                        <i class="fas fa-edit"></i> Edit
                    </button>
                    <button class="btn-secondary" onclick="deleteProduct('${product.id}')">
                        <i class="fas fa-trash"></i> Delete
                    </button>
                `;
            }
            
            return '<span style="color: #888;">No actions available</span>';
        }

        // Edit product (placeholder for now)
        function editProduct(productId) {
            showToast('Edit product feature coming soon!', 'info');
        }

        // Delete product
        async function deleteProduct(productId) {
            if (!confirm('Are you sure you want to delete this product?')) return;
            
            try {
                const response = await fetch(`${BACKEND_URL}/api/seller/product/${productId}`, {
                    method: 'DELETE',
                    credentials: 'include'
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showToast('Product deleted successfully', 'success');
                    await loadSellerProducts();
                    updateDashboardStats();
                } else {
                    showToast(data.message || 'Failed to delete product', 'error');
                }
            } catch (error) {
                console.error('Delete product error:', error);
                showToast('Failed to delete product. Please try again.', 'error');
            }
        }

        // Update featured products
        function updateFeaturedProducts() {
            const container = document.getElementById('featuredProductsGrid');
            const noFeaturedMessage = document.getElementById('noFeaturedProducts');
            
            const featuredProducts = sellerProducts.filter(p => p.status === 'featured');
            
            if (featuredProducts.length === 0) {
                container.innerHTML = '';
                noFeaturedMessage.style.display = 'block';
            } else {
                noFeaturedMessage.style.display = 'none';
                container.innerHTML = featuredProducts.map(product => `
                    <div class="featured-product-card">
                        <img src="${product.image || 'https://picsum.photos/seed/' + product.id + '/300/200.jpg'}" 
                             alt="${product.name}" class="featured-product-image">
                        <div class="featured-product-info">
                            <div class="featured-product-name">${product.name}</div>
                            <div class="featured-product-price">KES ${product.price}</div>
                            <div style="color: #b0b0b0; font-size: 14px;">${product.description}</div>
                        </div>
                    </div>
                `).join('');
            }
        }

        // Load notifications
        function loadNotifications() {
            const notificationsList = document.getElementById('sellerNotifications');
            
            // Generate sample notifications from product status changes
            const notifications = [];
            
            sellerProducts.forEach(product => {
                if (product.status === 'rejected') {
                    notifications.push({
                        type: 'error',
                        title: `Product "${product.name}" rejected`,
                        message: product.rejectionReason || 'Product did not meet approval criteria.',
                        time: new Date(product.updatedAt).toLocaleDateString()
                    });
                }
                
                if (product.status === 'approved') {
                    notifications.push({
                        type: 'success',
                        title: `Product "${product.name}" approved`,
                        message: 'Your product has been approved and is now live.',
                        time: new Date(product.updatedAt).toLocaleDateString()
                    });
                }
                
                if (product.status === 'featured') {
                    notifications.push({
                        type: 'info',
                        title: `Product "${product.name}" featured`,
                        message: 'Your product has been selected as a featured item!',
                        time: new Date(product.updatedAt).toLocaleDateString()
                    });
                }
            });
            
            // Sort by date (most recent first)
            notifications.sort((a, b) => new Date(b.time) - new Date(a.time));
            
            if (notifications.length === 0) {
                notificationsList.innerHTML = '<div class="notification-item info">No notifications</div>';
            } else {
                notificationsList.innerHTML = notifications.map(notification => `
                    <div class="notification-item ${notification.type}">
                        <div style="font-weight: 600; margin-bottom: 5px;">${notification.title}</div>
                        <div style="font-size: 14px; margin-bottom: 5px;">${notification.message}</div>
                        <div style="font-size: 12px; color: #888;">${notification.time}</div>
                    </div>
                `).join('');
            }
        }

        // Make functions globally available
        window.showDashboardSection = showDashboardSection;
        window.sellerLogout = sellerLogout;
        window.resetUploadForm = resetUploadForm;
        window.removeImage = removeImage;
        window.editProduct = editProduct;
        window.deleteProduct = deleteProduct;

        // Enhanced checkAuthStatus to check for seller and admin roles
        const originalCheckAuthStatus = authManager?.checkAuthStatus;
        if (originalCheckAuthStatus) {
            authManager.checkAuthStatus = async function() {
                await originalCheckAuthStatus.call(this);
                
                // Check if user is a seller or admin and show appropriate dashboard
                if (currentUser) {
                    checkAndShowSellerDashboard();
                    checkAndShowAdminIcon();
                }
            };
        }

        // Admin Dashboard Functions
        let adminData = null;
        let adminStats = {};
        let pendingSellers = [];
        let pendingProducts = [];
        let allUsers = [];
        let realTimeInterval = null;

        // Check if user is admin and show admin icon
        function checkAndShowAdminIcon() {
            if (!currentUser) return;
            
            // Check if user has admin role
            if (currentUser.role === 'admin') {
                document.getElementById('adminIcon').classList.add('show');
                // Auto-show admin dashboard for admin users
                setTimeout(() => {
                    showAdminDashboard();
                }, 500);
            }
        }

        // Show admin dashboard
        function showAdminDashboard() {
            document.getElementById('adminDashboard').style.display = 'block';
            document.body.style.overflow = 'hidden';
            
            // Initialize admin dashboard
            initializeAdminDashboard();
        }

        // Close admin dashboard
        function closeAdminDashboard() {
            document.getElementById('adminDashboard').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Admin logout
        function adminLogout() {
            closeAdminDashboard();
            // Use existing logout function
            if (typeof authManager !== 'undefined') {
                authManager.logout();
            }
        }

        // Initialize admin dashboard
        async function initializeAdminDashboard() {
            // Update admin info in header
            updateAdminHeader();
            
            // Load admin data
            await loadAdminData();
            
            // Load dashboard stats
            await loadAdminStats();
            
            // Load pending sellers
            await loadPendingSellers();
            
            // Load pending products
            await loadPendingProducts();
            
            // Load all users
            await loadAllUsers();
            
            // Start real-time updates
            startRealTimeUpdates();
            
            // Set up event listeners
            setupAdminEventListeners();
        }

        // Update admin header info
        function updateAdminHeader() {
            if (!currentUser) return;
            
            document.getElementById('adminName').textContent = currentUser.firstName || currentUser.email || 'Admin';
            
            // Set avatar with first letter of name
            const firstLetter = (currentUser.firstName || currentUser.email || 'A')[0].toUpperCase();
            document.getElementById('adminAvatar').textContent = firstLetter;
        }

        // Load admin data from backend
        async function loadAdminData() {
            try {
                const response = await fetch(`${BACKEND_URL}/api/admin/stats`, {
                    credentials: 'include'
                });
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.success) {
                        adminData = data.admin;
                    }
                }
            } catch (error) {
                console.error('Failed to load admin data:', error);
                // Use current user data as fallback
                adminData = currentUser;
            }
        }

        // Load admin statistics
        async function loadAdminStats() {
            try {
                const response = await fetch(`${BACKEND_URL}/api/admin/stats`, {
                    credentials: 'include'
                });
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.success) {
                        adminStats = data.stats || {};
                        updateDashboardStats();
                    }
                }
            } catch (error) {
                console.error('Failed to load admin stats:', error);
                // Use mock data as fallback
                adminStats = {
                    totalUsers: 150,
                    totalSellers: 25,
                    pendingSellers: 5,
                    pendingProducts: 12,
                    activeProducts: 85,
                    totalOrders: 320,
                    activeUsers: 45,
                    totalRevenue: 125000
                };
                updateDashboardStats();
            }
        }

        // Update dashboard statistics
        function updateDashboardStats() {
            document.getElementById('totalUsers').textContent = adminStats.totalUsers || 0;
            document.getElementById('totalSellers').textContent = adminStats.totalSellers || 0;
            document.getElementById('pendingSellers').textContent = adminStats.pendingSellers || 0;
            document.getElementById('pendingProducts').textContent = adminStats.pendingProducts || 0;
            document.getElementById('activeProducts').textContent = adminStats.activeProducts || 0;
            document.getElementById('totalOrders').textContent = adminStats.totalOrders || 0;
            document.getElementById('activeUsers').textContent = adminStats.activeUsers || 0;
            document.getElementById('totalRevenue').textContent = (adminStats.totalRevenue || 0).toLocaleString();
            
            // Update badges
            document.getElementById('pendingSellersBadge').textContent = adminStats.pendingSellers || 0;
            document.getElementById('pendingProductsBadge').textContent = adminStats.pendingProducts || 0;
        }

        // Load pending sellers
        async function loadPendingSellers() {
            try {
                const response = await fetch(`${BACKEND_URL}/api/admin/sellers/pending`, {
                    credentials: 'include'
                });
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.success) {
                        pendingSellers = data.sellers || [];
                        updatePendingSellersList();
                    }
                }
            } catch (error) {
                console.error('Failed to load pending sellers:', error);
                // Use mock data as fallback
                pendingSellers = [
                    {
                        id: '1',
                        firstName: 'John',
                        lastName: 'Doe',
                        email: 'john@example.com',
                        phone: '+254712345678',
                        businessName: 'John Electronics',
                        createdAt: new Date().toISOString()
                    }
                ];
                updatePendingSellersList();
            }
        }

        // Update pending sellers list
        function updatePendingSellersList() {
            const container = document.getElementById('pendingSellersList');
            
            if (pendingSellers.length === 0) {
                container.innerHTML = '<div class="approval-item"><div class="approval-title">No pending seller applications</div></div>';
            } else {
                container.innerHTML = pendingSellers.map(seller => `
                    <div class="approval-item">
                        <div class="approval-header">
                            <div class="approval-title">${seller.businessName || `${seller.firstName} ${seller.lastName}`}</div>
                            <div class="approval-actions">
                                <button class="btn-approve" onclick="approveSeller('${seller.id}')">Approve</button>
                                <button class="btn-reject" onclick="rejectSeller('${seller.id}')">Reject</button>
                            </div>
                        </div>
                        <div class="approval-details">
                            <div class="detail-item">
                                <span class="detail-label">Name</span>
                                <span class="detail-value">${seller.firstName} ${seller.lastName}</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Email</span>
                                <span class="detail-value">${seller.email}</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Phone</span>
                                <span class="detail-value">${seller.phone || 'N/A'}</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Applied</span>
                                <span class="detail-value">${new Date(seller.createdAt).toLocaleDateString()}</span>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
        }

        // Load pending products
        async function loadPendingProducts() {
            try {
                const response = await fetch(`${BACKEND_URL}/api/admin/products/pending`, {
                    credentials: 'include'
                });
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.success) {
                        pendingProducts = data.products || [];
                        updatePendingProductsList();
                    }
                }
            } catch (error) {
                console.error('Failed to load pending products:', error);
                // Use mock data as fallback
                pendingProducts = [
                    {
                        id: '1',
                        name: 'Smartphone XYZ',
                        category: 'Electronics',
                        price: 25000,
                        description: 'Latest smartphone with amazing features',
                        sellerName: 'John Electronics',
                        image: 'https://picsum.photos/seed/phone1/80/80.jpg',
                        createdAt: new Date().toISOString()
                    }
                ];
                updatePendingProductsList();
            }
        }

        // Update pending products list
        function updatePendingProductsList() {
            const container = document.getElementById('pendingProductsList');
            
            if (pendingProducts.length === 0) {
                container.innerHTML = '<div class="approval-item"><div class="approval-title">No pending product approvals</div></div>';
            } else {
                container.innerHTML = pendingProducts.map(product => `
                    <div class="approval-item">
                        <div class="approval-header">
                            <div class="approval-title">${product.name}</div>
                            <div class="approval-actions">
                                <button class="btn-approve" onclick="approveProduct('${product.id}')">Approve</button>
                                <button class="btn-reject" onclick="rejectProduct('${product.id}')">Reject</button>
                            </div>
                        </div>
                        <div class="product-preview">
                            <img src="${product.image || 'https://picsum.photos/seed/' + product.id + '/80/80.jpg'}" 
                                 alt="${product.name}" class="product-image">
                            <div class="product-info">
                                <div class="product-name">${product.name}</div>
                                <div class="product-category">${product.category}</div>
                            </div>
                        </div>
                        <div class="approval-details">
                            <div class="detail-item">
                                <span class="detail-label">Price</span>
                                <span class="detail-value">KES ${product.price}</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Seller</span>
                                <span class="detail-value">${product.sellerName}</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Category</span>
                                <span class="detail-value">${product.category}</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Submitted</span>
                                <span class="detail-value">${new Date(product.createdAt).toLocaleDateString()}</span>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
        }

        // Load all users
        async function loadAllUsers() {
            try {
                const response = await fetch(`${BACKEND_URL}/api/admin/users`, {
                    credentials: 'include'
                });
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.success) {
                        allUsers = data.users || [];
                        updateUsersList();
                    }
                }
            } catch (error) {
                console.error('Failed to load users:', error);
                // Use mock data as fallback
                allUsers = [
                    {
                        id: '1',
                        firstName: 'John',
                        lastName: 'Doe',
                        email: 'john@example.com',
                        role: 'user',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '2',
                        firstName: 'Jane',
                        lastName: 'Smith',
                        email: 'jane@example.com',
                        role: 'seller',
                        sellerStatus: 'approved',
                        createdAt: new Date().toISOString()
                    }
                ];
                updateUsersList();
            }
        }

        // Update users list
        function updateUsersList() {
            const container = document.getElementById('usersList');
            
            if (allUsers.length === 0) {
                container.innerHTML = '<div class="user-item"><div class="user-info"><div class="user-name">No users found</div></div></div>';
            } else {
                container.innerHTML = allUsers.map(user => `
                    <div class="user-item">
                        <div class="user-info">
                            <div class="user-name">${user.firstName} ${user.lastName}</div>
                            <div class="user-email">${user.email}</div>
                            <span class="user-role role-${user.role}">${user.role}</span>
                        </div>
                        <div class="user-actions">
                            <button class="btn-suspend" onclick="suspendUser('${user.id}')">Suspend</button>
                            <button class="btn-delete" onclick="deleteUser('${user.id}')">Delete</button>
                        </div>
                    </div>
                `).join('');
            }
        }

        // Show admin section
        function showAdminSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.admin-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(`admin${sectionName.charAt(0).toUpperCase() + sectionName.slice(1)}`).classList.add('active');
            
            // Update navigation
            document.querySelectorAll('.admin-nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            document.querySelector(`[data-section="${sectionName}"]`).classList.add('active');
            
            // Load section-specific data
            switch(sectionName) {
                case 'users':
                    loadAllUsers();
                    break;
                case 'sellers':
                    loadPendingSellers();
                    break;
                case 'products':
                    loadPendingProducts();
                    break;
                case 'dashboard':
                    loadAdminStats();
                    break;
            }
        }

        // Approve seller
        async function approveSeller(sellerId) {
            try {
                const response = await fetch(`${BACKEND_URL}/api/admin/sellers/approve`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include',
                    body: JSON.stringify({ sellerId })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showToast('Seller approved successfully!', 'success');
                    await loadPendingSellers();
                    await loadAdminStats();
                } else {
                    showToast(data.message || 'Failed to approve seller', 'error');
                }
            } catch (error) {
                console.error('Approve seller error:', error);
                showToast('Failed to approve seller. Please try again.', 'error');
            }
        }

        // Reject seller
        async function rejectSeller(sellerId) {
            if (!confirm('Are you sure you want to reject this seller application?')) return;
            
            try {
                const response = await fetch(`${BACKEND_URL}/api/admin/sellers/reject`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include',
                    body: JSON.stringify({ sellerId })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showToast('Seller application rejected', 'success');
                    await loadPendingSellers();
                    await loadAdminStats();
                } else {
                    showToast(data.message || 'Failed to reject seller', 'error');
                }
            } catch (error) {
                console.error('Reject seller error:', error);
                showToast('Failed to reject seller. Please try again.', 'error');
            }
        }

        // Approve product
        async function approveProduct(productId) {
            try {
                const response = await fetch(`${BACKEND_URL}/api/admin/products/approve`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include',
                    body: JSON.stringify({ productId })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showToast('Product approved successfully!', 'success');
                    await loadPendingProducts();
                    await loadAdminStats();
                } else {
                    showToast(data.message || 'Failed to approve product', 'error');
                }
            } catch (error) {
                console.error('Approve product error:', error);
                showToast('Failed to approve product. Please try again.', 'error');
            }
        }

        // Reject product
        async function rejectProduct(productId) {
            if (!confirm('Are you sure you want to reject this product?')) return;
            
            try {
                const response = await fetch(`${BACKEND_URL}/api/admin/products/reject`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include',
                    body: JSON.stringify({ productId })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showToast('Product rejected', 'success');
                    await loadPendingProducts();
                    await loadAdminStats();
                } else {
                    showToast(data.message || 'Failed to reject product', 'error');
                }
            } catch (error) {
                console.error('Reject product error:', error);
                showToast('Failed to reject product. Please try again.', 'error');
            }
        }

        // Suspend user
        async function suspendUser(userId) {
            if (!confirm('Are you sure you want to suspend this user?')) return;
            
            try {
                const response = await fetch(`${BACKEND_URL}/api/admin/users/suspend`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include',
                    body: JSON.stringify({ userId })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showToast('User suspended successfully', 'success');
                    await loadAllUsers();
                } else {
                    showToast(data.message || 'Failed to suspend user', 'error');
                }
            } catch (error) {
                console.error('Suspend user error:', error);
                showToast('Failed to suspend user. Please try again.', 'error');
            }
        }

        // Delete user
        async function deleteUser(userId) {
            if (!confirm('Are you sure you want to delete this user? This action cannot be undone.')) return;
            
            try {
                const response = await fetch(`${BACKEND_URL}/api/admin/users/${userId}`, {
                    method: 'DELETE',
                    credentials: 'include'
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showToast('User deleted successfully', 'success');
                    await loadAllUsers();
                    await loadAdminStats();
                } else {
                    showToast(data.message || 'Failed to delete user', 'error');
                }
            } catch (error) {
                console.error('Delete user error:', error);
                showToast('Failed to delete user. Please try again.', 'error');
            }
        }

        // System control functions
        function toggleMaintenance(element) {
            element.classList.toggle('active');
            const isActive = element.classList.contains('active');
            showToast(`Maintenance mode ${isActive ? 'enabled' : 'disabled'}`, 'info');
            // Update backend
            updateSystemSetting('maintenanceMode', isActive);
        }

        function toggleRegistrations(element) {
            element.classList.toggle('active');
            const isActive = element.classList.contains('active');
            showToast(`New registrations ${isActive ? 'enabled' : 'disabled'}`, 'info');
            updateSystemSetting('registrations', isActive);
        }

        function toggleUploads(element) {
            element.classList.toggle('active');
            const isActive = element.classList.contains('active');
            showToast(`Product uploads ${isActive ? 'enabled' : 'disabled'}`, 'info');
            updateSystemSetting('uploads', isActive);
        }

        function toggleSellerApps(element) {
            element.classList.toggle('active');
            const isActive = element.classList.contains('active');
            showToast(`Seller applications ${isActive ? 'enabled' : 'disabled'}`, 'info');
            updateSystemSetting('sellerApps', isActive);
        }

        function toggleWebsite(element) {
            element.classList.toggle('active');
            const isActive = element.classList.contains('active');
            showToast(`Website ${isActive ? 'online' : 'offline'}`, 'warning');
            updateSystemSetting('website', isActive);
        }

        function toggleUserReg(element) {
            element.classList.toggle('active');
            const isActive = element.classList.contains('active');
            showToast(`User registration ${isActive ? 'enabled' : 'disabled'}`, 'info');
            updateSystemSetting('userReg', isActive);
        }

        function toggleCart(element) {
            element.classList.toggle('active');
            const isActive = element.classList.contains('active');
            showToast(`Cart system ${isActive ? 'enabled' : 'disabled'}`, 'info');
            updateSystemSetting('cart', isActive);
        }

        function toggleWishlist(element) {
            element.classList.toggle('active');
            const isActive = element.classList.contains('active');
            showToast(`Wishlist system ${isActive ? 'enabled' : 'disabled'}`, 'info');
            updateSystemSetting('wishlist', isActive);
        }

        function toggleSearch(element) {
            element.classList.toggle('active');
            const isActive = element.classList.contains('active');
            showToast(`Product search ${isActive ? 'enabled' : 'disabled'}`, 'info');
            updateSystemSetting('search', isActive);
        }

        function toggleCategories(element) {
            element.classList.toggle('active');
            const isActive = element.classList.contains('active');
            showToast(`Category filters ${isActive ? 'enabled' : 'disabled'}`, 'info');
            updateSystemSetting('categories', isActive);
        }

        function toggleCategory(category, element) {
            element.classList.toggle('active');
            const isActive = element.classList.contains('active');
            showToast(`${category} category ${isActive ? 'enabled' : 'disabled'}`, 'info');
            updateSystemSetting(`category_${category}`, isActive);
        }

        function toggleAutoApproveProducts(element) {
            element.classList.toggle('active');
            const isActive = element.classList.contains('active');
            showToast(`Auto-approve products ${isActive ? 'enabled' : 'disabled'}`, 'info');
            updateSystemSetting('autoApproveProducts', isActive);
        }

        function toggleAutoApproveSellers(element) {
            element.classList.toggle('active');
            const isActive = element.classList.contains('active');
            showToast(`Auto-approve sellers ${isActive ? 'enabled' : 'disabled'}`, 'info');
            updateSystemSetting('autoApproveSellers', isActive);
        }

        function toggleEmailNotifications(element) {
            element.classList.toggle('active');
            const isActive = element.classList.contains('active');
            showToast(`Email notifications ${isActive ? 'enabled' : 'disabled'}`, 'info');
            updateSystemSetting('emailNotifications', isActive);
        }

        function toggleRealTimeUpdates(element) {
            element.classList.toggle('active');
            const isActive = element.classList.contains('active');
            showToast(`Real-time updates ${isActive ? 'enabled' : 'disabled'}`, 'info');
            updateSystemSetting('realTimeUpdates', isActive);
            
            if (isActive) {
                startRealTimeUpdates();
            } else {
                stopRealTimeUpdates();
            }
        }

        // Update system setting
        async function updateSystemSetting(setting, value) {
            try {
                await fetch(`${BACKEND_URL}/api/admin/settings`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include',
                    body: JSON.stringify({ setting, value })
                });
            } catch (error) {
                console.error('Failed to update system setting:', error);
            }
        }

        // Start real-time updates
        function startRealTimeUpdates() {
            if (realTimeInterval) return;
            
            realTimeInterval = setInterval(async () => {
                await loadAdminStats();
                await loadPendingSellers();
                await loadPendingProducts();
            }, 30000); // Update every 30 seconds
        }

        // Stop real-time updates
        function stopRealTimeUpdates() {
            if (realTimeInterval) {
                clearInterval(realTimeInterval);
                realTimeInterval = null;
            }
        }

        // Set up admin event listeners
        function setupAdminEventListeners() {
            // Add any additional event listeners here
        }

        // Make functions globally available
        window.showAdminSection = showAdminSection;
        window.showAdminDashboard = showAdminDashboard;
        window.adminLogout = adminLogout;
        window.approveSeller = approveSeller;
        window.rejectSeller = rejectSeller;
        window.approveProduct = approveProduct;
        window.rejectProduct = rejectProduct;
        window.suspendUser = suspendUser;
        window.deleteUser = deleteUser;
        window.toggleMaintenance = toggleMaintenance;
        window.toggleRegistrations = toggleRegistrations;
        window.toggleUploads = toggleUploads;
        window.toggleSellerApps = toggleSellerApps;
        window.toggleWebsite = toggleWebsite;
        window.toggleUserReg = toggleUserReg;
        window.toggleCart = toggleCart;
        window.toggleWishlist = toggleWishlist;
        window.toggleSearch = toggleSearch;
        window.toggleCategories = toggleCategories;
        window.toggleCategory = toggleCategory;
        window.toggleAutoApproveProducts = toggleAutoApproveProducts;
        window.toggleAutoApproveSellers = toggleAutoApproveSellers;
        window.toggleEmailNotifications = toggleEmailNotifications;
        window.toggleRealTimeUpdates = toggleRealTimeUpdates;

        // Clean up real-time updates on page unload
        window.addEventListener('beforeunload', () => {
            stopRealTimeUpdates();
        });

        // ============================================
        // NYUMBASURE JAVASCRIPT - COMPLETELY ISOLATED
        // ============================================
        
        // NyumbaSure Navigation Functions
        function showNyumbaSure() {
            // Hide all main sections
            document.querySelectorAll('section').forEach(section => {
                section.style.display = 'none';
            });
            
            // Hide other overlays
            document.getElementById('adminDashboard')?.classList.remove('active');
            document.getElementById('sellerDashboard')?.classList.remove('active');
            
            // Show NyumbaSure homepage
            document.getElementById('nyumbasure-homepage').classList.add('active');
            document.getElementById('nyumbasure-dashboard').classList.remove('active');
            
            // Scroll to top
            window.scrollTo(0, 0);
        }
        
        function hideNyumbaSure() {
            // Hide NyumbaSure sections
            document.getElementById('nyumbasure-homepage').classList.remove('active');
            document.getElementById('nyumbasure-dashboard').classList.remove('active');
            
            // Show all main sections
            document.querySelectorAll('section').forEach(section => {
                section.style.display = '';
            });
            
            // Scroll to top
            window.scrollTo(0, 0);
        }
        
        function showNyumbaSureDashboard() {
            // Hide homepage
            document.getElementById('nyumbasure-homepage').classList.remove('active');
            
            // Show dashboard
            document.getElementById('nyumbasure-dashboard').classList.add('active');
            
            // Scroll to top
            window.scrollTo(0, 0);
        }
        
        function showNyumbaSureUpload() {
            // Show dashboard and scroll to upload form
            showNyumbaSureDashboard();
            document.getElementById('nyumbasure-upload-form').scrollIntoView({ behavior: 'smooth' });
        }
        
        function showNyumbaSureListings() {
            // Show dashboard and scroll to listings table
            showNyumbaSureDashboard();
            document.querySelector('.nyumbasure-listings-table').scrollIntoView({ behavior: 'smooth' });
        }
        
        // NyumbaSure Form Functions
        function searchNyumbaSureProperties(event) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            const searchTerm = formData.get('search') || event.target.querySelector('input[type="text"]').value;
            const propertyType = formData.get('type') || event.target.querySelector('select').value;
            
            // Show loading state
            const button = event.target.querySelector('.nyumbasure-search-button');
            const originalText = button.textContent;
            button.textContent = 'Searching...';
            button.disabled = true;
            
            // Simulate search (in real implementation, this would call an API)
            setTimeout(() => {
                // Reset button
                button.textContent = originalText;
                button.disabled = false;
                
                // Show results notification
                showNyumbaSureNotification(`Found 3 properties matching "${searchTerm}"`, 'success');
                
                // Scroll to listings
                document.getElementById('nyumbasure-listings').scrollIntoView({ behavior: 'smooth' });
            }, 1500);
        }
        
        function uploadNyumbaSureProperty(event) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            const propertyData = {
                title: formData.get('title') || document.getElementById('nyumbasure-property-title').value,
                type: formData.get('type') || document.getElementById('nyumbasure-property-type').value,
                price: formData.get('price') || document.getElementById('nyumbasure-property-price').value,
                location: formData.get('location') || document.getElementById('nyumbasure-property-location').value,
                description: formData.get('description') || document.getElementById('nyumbasure-property-description').value
            };
            
            // Show loading state
            const button = event.target.querySelector('.nyumbasure-submit-button');
            const originalText = button.textContent;
            button.textContent = 'Uploading...';
            button.disabled = true;
            
            // Simulate upload (in real implementation, this would call an API)
            setTimeout(() => {
                // Reset button
                button.textContent = originalText;
                button.disabled = false;
                
                // Reset form
                event.target.reset();
                
                // Show success notification
                showNyumbaSureNotification('Property uploaded successfully! It will be reviewed within 24 hours.', 'success');
                
                // Scroll to listings
                showNyumbaSureListings();
            }, 2000);
        }
        
        function showNyumbaSureNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `nyumbasure-notification nyumbasure-notification-${type}`;
            notification.innerHTML = `
                <div class="nyumbasure-notification-content">
                    <span class="nyumbasure-notification-message">${message}</span>
                    <button class="nyumbasure-notification-close" onclick="this.parentElement.parentElement.remove()"></button>
                </div>
            `;
            
            // Add styles if not already present
            if (!document.querySelector('#nyumbasure-notification-styles')) {
                const styles = document.createElement('style');
                styles.id = 'nyumbasure-notification-styles';
                styles.textContent = `
                    .nyumbasure-notification {
                        position: fixed;
                        top: 20px;
                        right: 20px;
                        z-index: 10002;
                        min-width: 300px;
                        max-width: 400px;
                        background: white;
                        border-radius: 10px;
                        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
                        animation: nyumbasureSlideIn 0.3s ease-out;
                    }
                    
                    .nyumbasure-notification-success {
                        border-left: 4px solid #28a745;
                    }
                    
                    .nyumbasure-notification-error {
                        border-left: 4px solid #dc3545;
                    }
                    
                    .nyumbasure-notification-info {
                        border-left: 4px solid #0064c8;
                    }
                    
                    .nyumbasure-notification-content {
                        display: flex;
                        align-items: center;
                        justify-content: space-between;
                        padding: 15px 20px;
                    }
                    
                    .nyumbasure-notification-message {
                        flex: 1;
                        color: #333;
                        font-weight: 500;
                    }
                    
                    .nyumbasure-notification-close {
                        background: none;
                        border: none;
                        font-size: 20px;
                        cursor: pointer;
                        color: #666;
                        padding: 0;
                        margin-left: 10px;
                    }
                    
                    .nyumbasure-notification-close:hover {
                        color: #333;
                    }
                    
                    @keyframes nyumbasureSlideIn {
                        from {
                            transform: translateX(100%);
                            opacity: 0;
                        }
                        to {
                            transform: translateX(0);
                            opacity: 1;
                        }
                    }
                `;
                document.head.appendChild(styles);
            }
            
            // Add to page
            document.body.appendChild(notification);
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 5000);
        }
        
        // Make NyumbaSure functions globally available
        window.showNyumbaSure = showNyumbaSure;
        window.hideNyumbaSure = hideNyumbaSure;
        window.showNyumbaSureDashboard = showNyumbaSureDashboard;
        window.showNyumbaSureUpload = showNyumbaSureUpload;
        window.showNyumbaSureListings = showNyumbaSureListings;
        window.searchNyumbaSureProperties = searchNyumbaSureProperties;
        window.uploadNyumbaSureProperty = uploadNyumbaSureProperty;
        window.showNyumbaSureNotification = showNyumbaSureNotification;

        </script>
        <script src="assets/js/productLayer.js"></script>
        
        <!-- ============================================
             NYUMBASURE HTML - COMPLETELY ISOLATED
             ============================================ -->
        
        <!-- NyumbaSure Homepage -->
        <div id="nyumbasure-homepage" class="nyumbasure-homepage">
            <!-- Navigation -->
            <div class="nyumbasure-navigation">
                <a href="#" class="nyumbasure-nav-button" onclick="hideNyumbaSure(); return false;"> Back to EcoLoop</a>
                <a href="#" class="nyumbasure-nav-button" onclick="showNyumbaSureDashboard(); return false;">Dashboard</a>
            </div>
            
            <!-- Hero Section -->
            <section class="nyumbasure-hero">
                <div class="nyumbasure-hero-content">
                    <h1>NyumbaSure</h1>
                    <p>Verified Affordable Housing & Rentals Platform</p>
                    <a href="#nyumbasure-listings" class="nyumbasure-cta-button">Explore Properties</a>
                </div>
            </section>
            
            <!-- Features Section -->
            <section class="nyumbasure-features">
                <div class="nyumbasure-container">
                    <h2 class="nyumbasure-section-title">Why Choose NyumbaSure?</h2>
                    <div class="nyumbasure-features-grid">
                        <div class="nyumbasure-feature-card">
                            <span class="nyumbasure-feature-icon"></span>
                            <h3 class="nyumbasure-feature-title">Verified Listings</h3>
                            <p class="nyumbasure-feature-description">All properties are thoroughly verified for authenticity and legality</p>
                        </div>
                        <div class="nyumbasure-feature-card">
                            <span class="nyumbasure-feature-icon"></span>
                            <h3 class="nyumbasure-feature-title">Affordable Prices</h3>
                            <p class="nyumbasure-feature-description">Competitive pricing with no hidden fees or unexpected charges</p>
                        </div>
                        <div class="nyumbasure-feature-card">
                            <span class="nyumbasure-feature-icon"></span>
                            <h3 class="nyumbasure-feature-title">Secure Transactions</h3>
                            <p class="nyumbasure-feature-description">Safe payment processing and fraud protection for all users</p>
                        </div>
                        <div class="nyumbasure-feature-card">
                            <span class="nyumbasure-feature-icon"></span>
                            <h3 class="nyumbasure-feature-title">Wide Selection</h3>
                            <p class="nyumbasure-feature-description">Diverse property types from apartments to family homes</p>
                        </div>
                        <div class="nyumbasure-feature-card">
                            <span class="nyumbasure-feature-icon"></span>
                            <h3 class="nyumbasure-feature-title">Direct Support</h3>
                            <p class="nyumbasure-feature-description">Personalized assistance throughout your rental journey</p>
                        </div>
                        <div class="nyumbasure-feature-card">
                            <span class="nyumbasure-feature-icon"></span>
                            <h3 class="nyumbasure-feature-title">Easy to Use</h3>
                            <p class="nyumbasure-feature-description">Intuitive platform designed for seamless property search</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Search Section -->
            <section class="nyumbasure-search-section">
                <div class="nyumbasure-search-container">
                    <h2 class="nyumbasure-section-title">Find Your Perfect Home</h2>
                    <form class="nyumbasure-search-form" onsubmit="searchNyumbaSureProperties(event)">
                        <input type="text" class="nyumbasure-search-input" placeholder="Search by location, property type..." required>
                        <select class="nyumbasure-search-select">
                            <option value="">All Types</option>
                            <option value="apartment">Apartment</option>
                            <option value="house">House</option>
                            <option value="studio">Studio</option>
                            <option value="office">Office Space</option>
                        </select>
                        <button type="submit" class="nyumbasure-search-button">Search</button>
                    </form>
                </div>
            </section>
            
            <!-- Listings Section -->
            <section class="nyumbasure-listings" id="nyumbasure-listings">
                <div class="nyumbasure-container">
                    <h2 class="nyumbasure-section-title">Featured Properties</h2>
                    <div class="nyumbasure-listings-grid">
                        <div class="nyumbasure-listing-card">
                            <img src="https://via.placeholder.com/400x200/0064c8/ffffff?text=Modern+Apartment" alt="Property" class="nyumbasure-listing-image">
                            <div class="nyumbasure-listing-content">
                                <div class="nyumbasure-listing-price">KES 25,000/month</div>
                                <h3 class="nyumbasure-listing-title">Modern 2BR Apartment</h3>
                                <div class="nyumbasure-listing-location"> Kilimani, Nairobi</div>
                                <span class="nyumbasure-listing-verified"> Verified</span>
                            </div>
                        </div>
                        <div class="nyumbasure-listing-card">
                            <img src="https://via.placeholder.com/400x200/0064c8/ffffff?text=Family+House" alt="Property" class="nyumbasure-listing-image">
                            <div class="nyumbasure-listing-content">
                                <div class="nyumbasure-listing-price">KES 45,000/month</div>
                                <h3 class="nyumbasure-listing-title">Spacious 3BR Family House</h3>
                                <div class="nyumbasure-listing-location"> Lavington, Nairobi</div>
                                <span class="nyumbasure-listing-verified"> Verified</span>
                            </div>
                        </div>
                        <div class="nyumbasure-listing-card">
                            <img src="https://via.placeholder.com/400x200/0064c8/ffffff?text=Studio+Apartment" alt="Property" class="nyumbasure-listing-image">
                            <div class="nyumbasure-listing-content">
                                <div class="nyumbasure-listing-price">KES 15,000/month</div>
                                <h3 class="nyumbasure-listing-title">Cozy Studio Apartment</h3>
                                <div class="nyumbasure-listing-location"> Westlands, Nairobi</div>
                                <span class="nyumbasure-listing-verified"> Verified</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- How It Works Section -->
            <section class="nyumbasure-how-it-works">
                <div class="nyumbasure-container">
                    <h2 class="nyumbasure-section-title">How It Works</h2>
                    <div class="nyumbasure-steps">
                        <div class="nyumbasure-step">
                            <div class="nyumbasure-step-number">1</div>
                            <h3 class="nyumbasure-step-title">Search Properties</h3>
                            <p class="nyumbasure-step-description">Browse our verified listings using advanced filters</p>
                        </div>
                        <div class="nyumbasure-step">
                            <div class="nyumbasure-step-number">2</div>
                            <h3 class="nyumbasure-step-title">Schedule Viewing</h3>
                            <p class="nyumbasure-step-description">Book property viewings at your convenience</p>
                        </div>
                        <div class="nyumbasure-step">
                            <div class="nyumbasure-step-number">3</div>
                            <h3 class="nyumbasure-step-title">Apply Online</h3>
                            <p class="nyumbasure-step-description">Submit your application securely online</p>
                        </div>
                        <div class="nyumbasure-step">
                            <div class="nyumbasure-step-number">4</div>
                            <h3 class="nyumbasure-step-title">Move In</h3>
                            <p class="nyumbasure-step-description">Complete paperwork and get your keys</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Pricing Section -->
            <section class="nyumbasure-pricing">
                <div class="nyumbasure-container">
                    <h2 class="nyumbasure-section-title">Transparent Pricing</h2>
                    <div class="nyumbasure-pricing-grid">
                        <div class="nyumbasure-pricing-card">
                            <div class="nyumbasure-price">FREE</div>
                            <div class="nyumbasure-price-period">For Tenants</div>
                            <h3 class="nyumbasure-pricing-title">Basic Search</h3>
                            <ul class="nyumbasure-pricing-features">
                                <li> Browse all listings</li>
                                <li> Property photos</li>
                                <li> Contact landlords</li>
                                <li> Save favorites</li>
                            </ul>
                            <a href="#" class="nyumbasure-pricing-button">Start Searching</a>
                        </div>
                        <div class="nyumbasure-pricing-card featured">
                            <div class="nyumbasure-price">KES 500</div>
                            <div class="nyumbasure-price-period">For Landlords</div>
                            <h3 class="nyumbasure-pricing-title">Premium Listing</h3>
                            <ul class="nyumbasure-pricing-features">
                                <li> Featured placement</li>
                                <li> Verified badge</li>
                                <li> Priority support</li>
                                <li> Analytics dashboard</li>
                                <li> Unlimited listings</li>
                            </ul>
                            <a href="#" class="nyumbasure-pricing-button">List Property</a>
                        </div>
                        <div class="nyumbasure-pricing-card">
                            <div class="nyumbasure-price">KES 1,000</div>
                            <div class="nyumbasure-price-period">For Agents</div>
                            <h3 class="nyumbasure-pricing-title">Professional</h3>
                            <ul class="nyumbasure-pricing-features">
                                <li> Multiple listings</li>
                                <li> Agent verification</li>
                                <li> Client management</li>
                                <li> Marketing tools</li>
                            </ul>
                            <a href="#" class="nyumbasure-pricing-button">Become Agent</a>
                        </div>
                    </div>
                </div>
            </section>
        </div>
        
        <!-- NyumbaSure Dashboard -->
        <div id="nyumbasure-dashboard" class="nyumbasure-dashboard">
            <!-- Dashboard Header -->
            <header class="nyumbasure-dashboard-header">
                <nav class="nyumbasure-dashboard-nav">
                    <div class="nyumbasure-dashboard-logo">
                        <span></span>
                        <span>NyumbaSure Dashboard</span>
                    </div>
                    <div class="nyumbasure-dashboard-menu">
                        <a href="#" onclick="showNyumbaSure(); return false;">Homepage</a>
                        <a href="#" onclick="showNyumbaSureUpload(); return false;">Upload Property</a>
                        <a href="#" onclick="showNyumbaSureListings(); return false;">My Listings</a>
                        <a href="#" onclick="hideNyumbaSure(); return false;">Back to EcoLoop</a>
                    </div>
                </nav>
            </header>
            
            <!-- Dashboard Content -->
            <main class="nyumbasure-dashboard-content">
                <!-- Stats Section -->
                <div class="nyumbasure-dashboard-stats">
                    <div class="nyumbasure-stat-card">
                        <div class="nyumbasure-stat-number">12</div>
                        <div class="nyumbasure-stat-label">Active Listings</div>
                    </div>
                    <div class="nyumbasure-stat-card">
                        <div class="nyumbasure-stat-number">48</div>
                        <div class="nyumbasure-stat-label">Total Views</div>
                    </div>
                    <div class="nyumbasure-stat-card">
                        <div class="nyumbasure-stat-number">5</div>
                        <div class="nyumbasure-stat-label">Pending Applications</div>
                    </div>
                    <div class="nyumbasure-stat-card">
                        <div class="nyumbasure-stat-number">8</div>
                        <div class="nyumbasure-stat-label">Verified Properties</div>
                    </div>
                </div>
                
                <!-- Upload Property Form -->
                <div class="nyumbasure-upload-form" id="nyumbasure-upload-form">
                    <h2>Upload New Property</h2>
                    <form onsubmit="uploadNyumbaSureProperty(event)">
                        <div class="nyumbasure-form-row">
                            <div class="nyumbasure-form-group">
                                <label for="nyumbasure-property-title">Property Title</label>
                                <input type="text" id="nyumbasure-property-title" required>
                            </div>
                            <div class="nyumbasure-form-group">
                                <label for="nyumbasure-property-type">Property Type</label>
                                <select id="nyumbasure-property-type" required>
                                    <option value="">Select Type</option>
                                    <option value="apartment">Apartment</option>
                                    <option value="house">House</option>
                                    <option value="studio">Studio</option>
                                    <option value="office">Office Space</option>
                                </select>
                            </div>
                        </div>
                        <div class="nyumbasure-form-row">
                            <div class="nyumbasure-form-group">
                                <label for="nyumbasure-property-price">Monthly Rent (KES)</label>
                                <input type="number" id="nyumbasure-property-price" required>
                            </div>
                            <div class="nyumbasure-form-group">
                                <label for="nyumbasure-property-location">Location</label>
                                <input type="text" id="nyumbasure-property-location" required>
                            </div>
                        </div>
                        <div class="nyumbasure-form-group">
                            <label for="nyumbasure-property-description">Description</label>
                            <textarea id="nyumbasure-property-description" required></textarea>
                        </div>
                        <div class="nyumbasure-form-group">
                            <label for="nyumbasure-property-images">Property Images</label>
                            <input type="file" id="nyumbasure-property-images" multiple accept="image/*">
                        </div>
                        <button type="submit" class="nyumbasure-submit-button">Upload Property</button>
                    </form>
                </div>
                
                <!-- Listings Table -->
                <div class="nyumbasure-listings-table">
                    <table class="nyumbasure-table">
                        <thead>
                            <tr>
                                <th>Property</th>
                                <th>Type</th>
                                <th>Price</th>
                                <th>Location</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Modern 2BR Apartment</td>
                                <td>Apartment</td>
                                <td>KES 25,000</td>
                                <td>Kilimani</td>
                                <td><span class="nyumbasure-status-badge nyumbasure-status-verified">Verified</span></td>
                                <td><button class="nyumbasure-submit-button">Edit</button></td>
                            </tr>
                            <tr>
                                <td>Spacious 3BR House</td>
                                <td>House</td>
                                <td>KES 45,000</td>
                                <td>Lavington</td>
                                <td><span class="nyumbasure-status-badge nyumbasure-status-pending">Pending</span></td>
                                <td><button class="nyumbasure-submit-button">Edit</button></td>
                            </tr>
                            <tr>
                                <td>Cozy Studio</td>
                                <td>Studio</td>
                                <td>KES 15,000</td>
                                <td>Westlands</td>
                                <td><span class="nyumbasure-status-badge nyumbasure-status-verified">Verified</span></td>
                                <td><button class="nyumbasure-submit-button">Edit</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </main>
        </div>
    </body>
</html>
